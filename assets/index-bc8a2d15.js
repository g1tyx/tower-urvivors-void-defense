(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Vc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ea={exports:{}},Rs={},Ta={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vr=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Wc=Symbol.for("react.fragment"),$c=Symbol.for("react.strict_mode"),Yc=Symbol.for("react.profiler"),Kc=Symbol.for("react.provider"),Qc=Symbol.for("react.context"),Xc=Symbol.for("react.forward_ref"),qc=Symbol.for("react.suspense"),Zc=Symbol.for("react.memo"),Jc=Symbol.for("react.lazy"),ai=Symbol.iterator;function ed(e){return e===null||typeof e!="object"?null:(e=ai&&e[ai]||e["@@iterator"],typeof e=="function"?e:null)}var ba={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ra=Object.assign,Na={};function jn(e,t,n){this.props=e,this.context=t,this.refs=Na,this.updater=n||ba}jn.prototype.isReactComponent={};jn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ca(){}Ca.prototype=jn.prototype;function fo(e,t,n){this.props=e,this.context=t,this.refs=Na,this.updater=n||ba}var ho=fo.prototype=new Ca;ho.constructor=fo;Ra(ho,jn.prototype);ho.isPureReactComponent=!0;var ui=Array.isArray,ka=Object.prototype.hasOwnProperty,po={current:null},Ma={key:!0,ref:!0,__self:!0,__source:!0};function ja(e,t,n){var r,s={},l=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)ka.call(t,r)&&!Ma.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:vr,type:e,key:l,ref:i,props:s,_owner:po.current}}function td(e,t){return{$$typeof:vr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mo(e){return typeof e=="object"&&e!==null&&e.$$typeof===vr}function nd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ci=/\/+/g;function Vs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nd(""+e.key):t.toString(36)}function Fr(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case vr:case Gc:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Vs(i,0):r,ui(s)?(n="",e!=null&&(n=e.replace(ci,"$&/")+"/"),Fr(s,t,n,"",function(c){return c})):s!=null&&(mo(s)&&(s=td(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(ci,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",ui(e))for(var a=0;a<e.length;a++){l=e[a];var u=r+Vs(l,a);i+=Fr(l,t,n,u,s)}else if(u=ed(e),typeof u=="function")for(e=u.call(e),a=0;!(l=e.next()).done;)l=l.value,u=r+Vs(l,a++),i+=Fr(l,t,n,u,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function br(e,t,n){if(e==null)return e;var r=[],s=0;return Fr(e,r,"","",function(l){return t.call(n,l,s++)}),r}function rd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Re={current:null},Hr={transition:null},sd={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Hr,ReactCurrentOwner:po};function Ia(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:br,forEach:function(e,t,n){br(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return br(e,function(){t++}),t},toArray:function(e){return br(e,function(t){return t})||[]},only:function(e){if(!mo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=jn;G.Fragment=Wc;G.Profiler=Yc;G.PureComponent=fo;G.StrictMode=$c;G.Suspense=qc;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sd;G.act=Ia;G.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ra({},e.props),s=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=po.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)ka.call(t,u)&&!Ma.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:vr,type:e.type,key:s,ref:l,props:r,_owner:i}};G.createContext=function(e){return e={$$typeof:Qc,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kc,_context:e},e.Consumer=e};G.createElement=ja;G.createFactory=function(e){var t=ja.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Xc,render:e}};G.isValidElement=mo;G.lazy=function(e){return{$$typeof:Jc,_payload:{_status:-1,_result:e},_init:rd}};G.memo=function(e,t){return{$$typeof:Zc,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=Hr.transition;Hr.transition={};try{e()}finally{Hr.transition=t}};G.unstable_act=Ia;G.useCallback=function(e,t){return Re.current.useCallback(e,t)};G.useContext=function(e){return Re.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Re.current.useDeferredValue(e)};G.useEffect=function(e,t){return Re.current.useEffect(e,t)};G.useId=function(){return Re.current.useId()};G.useImperativeHandle=function(e,t,n){return Re.current.useImperativeHandle(e,t,n)};G.useInsertionEffect=function(e,t){return Re.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Re.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Re.current.useMemo(e,t)};G.useReducer=function(e,t,n){return Re.current.useReducer(e,t,n)};G.useRef=function(e){return Re.current.useRef(e)};G.useState=function(e){return Re.current.useState(e)};G.useSyncExternalStore=function(e,t,n){return Re.current.useSyncExternalStore(e,t,n)};G.useTransition=function(){return Re.current.useTransition()};G.version="18.3.1";Ta.exports=G;var H=Ta.exports;const ld=Vc(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=H,id=Symbol.for("react.element"),ad=Symbol.for("react.fragment"),ud=Object.prototype.hasOwnProperty,cd=od.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dd={key:!0,ref:!0,__self:!0,__source:!0};function Aa(e,t,n){var r,s={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)ud.call(t,r)&&!dd.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:id,type:e,key:l,ref:i,props:s,_owner:cd.current}}Rs.Fragment=ad;Rs.jsx=Aa;Rs.jsxs=Aa;Ea.exports=Rs;var o=Ea.exports,ml={},Oa={exports:{}},De={},_a={exports:{}},Pa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,z){var N=j.length;j.push(z);e:for(;0<N;){var A=N-1>>>1,V=j[A];if(0<s(V,z))j[A]=z,j[N]=V,N=A;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var z=j[0],N=j.pop();if(N!==z){j[0]=N;e:for(var A=0,V=j.length,B=V>>>1;A<B;){var F=2*(A+1)-1,ae=j[F],Be=F+1,gt=j[Be];if(0>s(ae,N))Be<V&&0>s(gt,ae)?(j[A]=gt,j[Be]=N,A=Be):(j[A]=ae,j[F]=N,A=F);else if(Be<V&&0>s(gt,N))j[A]=gt,j[Be]=N,A=Be;else break e}}return z}function s(j,z){var N=j.sortIndex-z.sortIndex;return N!==0?N:j.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],c=[],m=1,p=null,h=3,x=!1,b=!1,g=!1,E=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=j)r(c),z.sortIndex=z.expirationTime,t(u,z);else break;z=n(c)}}function S(j){if(g=!1,v(j),!b)if(n(u)!==null)b=!0,Ce(R);else{var z=n(c);z!==null&&D(S,z.startTime-j)}}function R(j,z){b=!1,g&&(g=!1,f(k),k=-1),x=!0;var N=h;try{for(v(z),p=n(u);p!==null&&(!(p.expirationTime>z)||j&&!U());){var A=p.callback;if(typeof A=="function"){p.callback=null,h=p.priorityLevel;var V=A(p.expirationTime<=z);z=e.unstable_now(),typeof V=="function"?p.callback=V:p===n(u)&&r(u),v(z)}else r(u);p=n(u)}if(p!==null)var B=!0;else{var F=n(c);F!==null&&D(S,F.startTime-z),B=!1}return B}finally{p=null,h=N,x=!1}}var C=!1,w=null,k=-1,I=5,O=-1;function U(){return!(e.unstable_now()-O<I)}function K(){if(w!==null){var j=e.unstable_now();O=j;var z=!0;try{z=w(!0,j)}finally{z?W():(C=!1,w=null)}}else C=!1}var W;if(typeof d=="function")W=function(){d(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ve=te.port2;te.port1.onmessage=K,W=function(){ve.postMessage(null)}}else W=function(){E(K,0)};function Ce(j){w=j,C||(C=!0,W())}function D(j,z){k=E(function(){j(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,Ce(R))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var N=h;h=z;try{return j()}finally{h=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var N=h;h=j;try{return z()}finally{h=N}},e.unstable_scheduleCallback=function(j,z,N){var A=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?A+N:A):N=A,j){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=N+V,j={id:m++,callback:z,priorityLevel:j,startTime:N,expirationTime:V,sortIndex:-1},N>A?(j.sortIndex=N,t(c,j),n(u)===null&&j===n(c)&&(g?(f(k),k=-1):g=!0,D(S,N-A))):(j.sortIndex=V,t(u,j),b||x||(b=!0,Ce(R))),j},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(j){var z=h;return function(){var N=h;h=z;try{return j.apply(this,arguments)}finally{h=N}}}})(Pa);_a.exports=Pa;var fd=_a.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd=H,ze=fd;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var La=new Set,er={};function en(e,t){Tn(e,t),Tn(e+"Capture",t)}function Tn(e,t){for(er[e]=t,e=0;e<t.length;e++)La.add(t[e])}var dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gl=Object.prototype.hasOwnProperty,pd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,di={},fi={};function md(e){return gl.call(fi,e)?!0:gl.call(di,e)?!1:pd.test(e)?fi[e]=!0:(di[e]=!0,!1)}function gd(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vd(e,t,n,r){if(t===null||typeof t>"u"||gd(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ne(e,t,n,r,s,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new Ne(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new Ne(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new Ne(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new Ne(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new Ne(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new Ne(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ge[e]=new Ne(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ge[e]=new Ne(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ge[e]=new Ne(e,5,!1,e.toLowerCase(),null,!1,!1)});var go=/[\-:]([a-z])/g;function vo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(go,vo);ge[t]=new Ne(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(go,vo);ge[t]=new Ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(go,vo);ge[t]=new Ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new Ne(e,1,!1,e.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ge[e]=new Ne(e,1,!1,e.toLowerCase(),null,!0,!0)});function yo(e,t,n,r){var s=ge.hasOwnProperty(t)?ge[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vd(t,n,s,r)&&(n=null),r||s===null?md(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mt=hd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rr=Symbol.for("react.element"),rn=Symbol.for("react.portal"),sn=Symbol.for("react.fragment"),xo=Symbol.for("react.strict_mode"),vl=Symbol.for("react.profiler"),za=Symbol.for("react.provider"),Da=Symbol.for("react.context"),wo=Symbol.for("react.forward_ref"),yl=Symbol.for("react.suspense"),xl=Symbol.for("react.suspense_list"),So=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),Ua=Symbol.for("react.offscreen"),hi=Symbol.iterator;function On(e){return e===null||typeof e!="object"?null:(e=hi&&e[hi]||e["@@iterator"],typeof e=="function"?e:null)}var se=Object.assign,Gs;function Fn(e){if(Gs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gs=t&&t[1]||""}return`
`+Gs+e}var Ws=!1;function $s(e,t){if(!e||Ws)return"";Ws=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),l=r.stack.split(`
`),i=s.length-1,a=l.length-1;1<=i&&0<=a&&s[i]!==l[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==l[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==l[a]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{Ws=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fn(e):""}function yd(e){switch(e.tag){case 5:return Fn(e.type);case 16:return Fn("Lazy");case 13:return Fn("Suspense");case 19:return Fn("SuspenseList");case 0:case 2:case 15:return e=$s(e.type,!1),e;case 11:return e=$s(e.type.render,!1),e;case 1:return e=$s(e.type,!0),e;default:return""}}function wl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sn:return"Fragment";case rn:return"Portal";case vl:return"Profiler";case xo:return"StrictMode";case yl:return"Suspense";case xl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Da:return(e.displayName||"Context")+".Consumer";case za:return(e._context.displayName||"Context")+".Provider";case wo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case So:return t=e.displayName||null,t!==null?t:wl(e.type)||"Memo";case yt:t=e._payload,e=e._init;try{return wl(e(t))}catch{}}return null}function xd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wl(t);case 8:return t===xo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ba(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wd(e){var t=Ba(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nr(e){e._valueTracker||(e._valueTracker=wd(e))}function Fa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ba(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sl(e,t){var n=t.checked;return se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pi(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ha(e,t){t=t.checked,t!=null&&yo(e,"checked",t,!1)}function El(e,t){Ha(e,t);var n=Pt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tl(e,t.type,Pt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mi(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tl(e,t,n){(t!=="number"||es(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hn=Array.isArray;function gn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Pt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function bl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gi(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(Hn(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pt(n)}}function Va(e,t){var n=Pt(t.value),r=Pt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function vi(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ga(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ga(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cr,Wa=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cr=Cr||document.createElement("div"),Cr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sd=["Webkit","ms","Moz","O"];Object.keys(Wn).forEach(function(e){Sd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wn[t]=Wn[e]})});function $a(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wn.hasOwnProperty(e)&&Wn[e]?(""+t).trim():t+"px"}function Ya(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$a(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ed=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nl(e,t){if(t){if(Ed[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kl=null;function Eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ml=null,vn=null,yn=null;function yi(e){if(e=wr(e)){if(typeof Ml!="function")throw Error(M(280));var t=e.stateNode;t&&(t=js(t),Ml(e.stateNode,e.type,t))}}function Ka(e){vn?yn?yn.push(e):yn=[e]:vn=e}function Qa(){if(vn){var e=vn,t=yn;if(yn=vn=null,yi(e),t)for(e=0;e<t.length;e++)yi(t[e])}}function Xa(e,t){return e(t)}function qa(){}var Ys=!1;function Za(e,t,n){if(Ys)return e(t,n);Ys=!0;try{return Xa(e,t,n)}finally{Ys=!1,(vn!==null||yn!==null)&&(qa(),Qa())}}function nr(e,t){var n=e.stateNode;if(n===null)return null;var r=js(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var jl=!1;if(dt)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){jl=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{jl=!1}function Td(e,t,n,r,s,l,i,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var $n=!1,ts=null,ns=!1,Il=null,bd={onError:function(e){$n=!0,ts=e}};function Rd(e,t,n,r,s,l,i,a,u){$n=!1,ts=null,Td.apply(bd,arguments)}function Nd(e,t,n,r,s,l,i,a,u){if(Rd.apply(this,arguments),$n){if($n){var c=ts;$n=!1,ts=null}else throw Error(M(198));ns||(ns=!0,Il=c)}}function tn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ja(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xi(e){if(tn(e)!==e)throw Error(M(188))}function Cd(e){var t=e.alternate;if(!t){if(t=tn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return xi(s),e;if(l===r)return xi(s),t;l=l.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=l;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=l;break}if(a===r){i=!0,r=s,n=l;break}a=a.sibling}if(!i){for(a=l.child;a;){if(a===n){i=!0,n=l,r=s;break}if(a===r){i=!0,r=l,n=s;break}a=a.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function eu(e){return e=Cd(e),e!==null?tu(e):null}function tu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tu(e);if(t!==null)return t;e=e.sibling}return null}var nu=ze.unstable_scheduleCallback,wi=ze.unstable_cancelCallback,kd=ze.unstable_shouldYield,Md=ze.unstable_requestPaint,oe=ze.unstable_now,jd=ze.unstable_getCurrentPriorityLevel,To=ze.unstable_ImmediatePriority,ru=ze.unstable_UserBlockingPriority,rs=ze.unstable_NormalPriority,Id=ze.unstable_LowPriority,su=ze.unstable_IdlePriority,Ns=null,rt=null;function Ad(e){if(rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Ns,e,void 0,(e.current.flags&128)===128)}catch{}}var qe=Math.clz32?Math.clz32:Pd,Od=Math.log,_d=Math.LN2;function Pd(e){return e>>>=0,e===0?32:31-(Od(e)/_d|0)|0}var kr=64,Mr=4194304;function Vn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ss(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Vn(a):(l&=i,l!==0&&(r=Vn(l)))}else i=n&~s,i!==0?r=Vn(i):l!==0&&(r=Vn(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qe(t),s=1<<n,r|=e[n],t&=~s;return r}function Ld(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-qe(l),a=1<<i,u=s[i];u===-1?(!(a&n)||a&r)&&(s[i]=Ld(a,t)):u<=t&&(e.expiredLanes|=a),l&=~a}}function Al(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lu(){var e=kr;return kr<<=1,!(kr&4194240)&&(kr=64),e}function Ks(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qe(t),e[t]=n}function Dd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-qe(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function bo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Q=0;function ou(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var iu,Ro,au,uu,cu,Ol=!1,jr=[],Nt=null,Ct=null,kt=null,rr=new Map,sr=new Map,wt=[],Ud="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Si(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":rr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(t.pointerId)}}function Pn(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=wr(t),t!==null&&Ro(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Bd(e,t,n,r,s){switch(t){case"focusin":return Nt=Pn(Nt,e,t,n,r,s),!0;case"dragenter":return Ct=Pn(Ct,e,t,n,r,s),!0;case"mouseover":return kt=Pn(kt,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return rr.set(l,Pn(rr.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,sr.set(l,Pn(sr.get(l)||null,e,t,n,r,s)),!0}return!1}function du(e){var t=Vt(e.target);if(t!==null){var n=tn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ja(n),t!==null){e.blockedOn=t,cu(e.priority,function(){au(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_l(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);kl=r,n.target.dispatchEvent(r),kl=null}else return t=wr(n),t!==null&&Ro(t),e.blockedOn=n,!1;t.shift()}return!0}function Ei(e,t,n){Vr(e)&&n.delete(t)}function Fd(){Ol=!1,Nt!==null&&Vr(Nt)&&(Nt=null),Ct!==null&&Vr(Ct)&&(Ct=null),kt!==null&&Vr(kt)&&(kt=null),rr.forEach(Ei),sr.forEach(Ei)}function Ln(e,t){e.blockedOn===t&&(e.blockedOn=null,Ol||(Ol=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,Fd)))}function lr(e){function t(s){return Ln(s,e)}if(0<jr.length){Ln(jr[0],e);for(var n=1;n<jr.length;n++){var r=jr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Nt!==null&&Ln(Nt,e),Ct!==null&&Ln(Ct,e),kt!==null&&Ln(kt,e),rr.forEach(t),sr.forEach(t),n=0;n<wt.length;n++)r=wt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<wt.length&&(n=wt[0],n.blockedOn===null);)du(n),n.blockedOn===null&&wt.shift()}var xn=mt.ReactCurrentBatchConfig,ls=!0;function Hd(e,t,n,r){var s=Q,l=xn.transition;xn.transition=null;try{Q=1,No(e,t,n,r)}finally{Q=s,xn.transition=l}}function Vd(e,t,n,r){var s=Q,l=xn.transition;xn.transition=null;try{Q=4,No(e,t,n,r)}finally{Q=s,xn.transition=l}}function No(e,t,n,r){if(ls){var s=_l(e,t,n,r);if(s===null)sl(e,t,r,os,n),Si(e,r);else if(Bd(s,e,t,n,r))r.stopPropagation();else if(Si(e,r),t&4&&-1<Ud.indexOf(e)){for(;s!==null;){var l=wr(s);if(l!==null&&iu(l),l=_l(e,t,n,r),l===null&&sl(e,t,r,os,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else sl(e,t,r,null,n)}}var os=null;function _l(e,t,n,r){if(os=null,e=Eo(r),e=Vt(e),e!==null)if(t=tn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ja(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return os=e,null}function fu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jd()){case To:return 1;case ru:return 4;case rs:case Id:return 16;case su:return 536870912;default:return 16}default:return 16}}var Et=null,Co=null,Gr=null;function hu(){if(Gr)return Gr;var e,t=Co,n=t.length,r,s="value"in Et?Et.value:Et.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[l-r];r++);return Gr=s.slice(e,1<r?1-r:void 0)}function Wr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ir(){return!0}function Ti(){return!1}function Ue(e){function t(n,r,s,l,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ir:Ti,this.isPropagationStopped=Ti,this}return se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Ue(In),xr=se({},In,{view:0,detail:0}),Gd=Ue(xr),Qs,Xs,zn,Cs=se({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zn&&(zn&&e.type==="mousemove"?(Qs=e.screenX-zn.screenX,Xs=e.screenY-zn.screenY):Xs=Qs=0,zn=e),Qs)},movementY:function(e){return"movementY"in e?e.movementY:Xs}}),bi=Ue(Cs),Wd=se({},Cs,{dataTransfer:0}),$d=Ue(Wd),Yd=se({},xr,{relatedTarget:0}),qs=Ue(Yd),Kd=se({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Qd=Ue(Kd),Xd=se({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qd=Ue(Xd),Zd=se({},In,{data:0}),Ri=Ue(Zd),Jd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=t0[e])?!!t[e]:!1}function Mo(){return n0}var r0=se({},xr,{key:function(e){if(e.key){var t=Jd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(e){return e.type==="keypress"?Wr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),s0=Ue(r0),l0=se({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ni=Ue(l0),o0=se({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),i0=Ue(o0),a0=se({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),u0=Ue(a0),c0=se({},Cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),d0=Ue(c0),f0=[9,13,27,32],jo=dt&&"CompositionEvent"in window,Yn=null;dt&&"documentMode"in document&&(Yn=document.documentMode);var h0=dt&&"TextEvent"in window&&!Yn,pu=dt&&(!jo||Yn&&8<Yn&&11>=Yn),Ci=String.fromCharCode(32),ki=!1;function mu(e,t){switch(e){case"keyup":return f0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ln=!1;function p0(e,t){switch(e){case"compositionend":return gu(t);case"keypress":return t.which!==32?null:(ki=!0,Ci);case"textInput":return e=t.data,e===Ci&&ki?null:e;default:return null}}function m0(e,t){if(ln)return e==="compositionend"||!jo&&mu(e,t)?(e=hu(),Gr=Co=Et=null,ln=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pu&&t.locale!=="ko"?null:t.data;default:return null}}var g0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g0[e.type]:t==="textarea"}function vu(e,t,n,r){Ka(r),t=is(t,"onChange"),0<t.length&&(n=new ko("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,or=null;function v0(e){ku(e,0)}function ks(e){var t=un(e);if(Fa(t))return e}function y0(e,t){if(e==="change")return t}var yu=!1;if(dt){var Zs;if(dt){var Js="oninput"in document;if(!Js){var ji=document.createElement("div");ji.setAttribute("oninput","return;"),Js=typeof ji.oninput=="function"}Zs=Js}else Zs=!1;yu=Zs&&(!document.documentMode||9<document.documentMode)}function Ii(){Kn&&(Kn.detachEvent("onpropertychange",xu),or=Kn=null)}function xu(e){if(e.propertyName==="value"&&ks(or)){var t=[];vu(t,or,e,Eo(e)),Za(v0,t)}}function x0(e,t,n){e==="focusin"?(Ii(),Kn=t,or=n,Kn.attachEvent("onpropertychange",xu)):e==="focusout"&&Ii()}function w0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ks(or)}function S0(e,t){if(e==="click")return ks(t)}function E0(e,t){if(e==="input"||e==="change")return ks(t)}function T0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Je=typeof Object.is=="function"?Object.is:T0;function ir(e,t){if(Je(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!gl.call(t,s)||!Je(e[s],t[s]))return!1}return!0}function Ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oi(e,t){var n=Ai(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ai(n)}}function wu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Su(){for(var e=window,t=es();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=es(e.document)}return t}function Io(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function b0(e){var t=Su(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wu(n.ownerDocument.documentElement,n)){if(r!==null&&Io(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Oi(n,l);var i=Oi(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var R0=dt&&"documentMode"in document&&11>=document.documentMode,on=null,Pl=null,Qn=null,Ll=!1;function _i(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ll||on==null||on!==es(r)||(r=on,"selectionStart"in r&&Io(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qn&&ir(Qn,r)||(Qn=r,r=is(Pl,"onSelect"),0<r.length&&(t=new ko("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=on)))}function Ar(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var an={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionend:Ar("Transition","TransitionEnd")},el={},Eu={};dt&&(Eu=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function Ms(e){if(el[e])return el[e];if(!an[e])return e;var t=an[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Eu)return el[e]=t[n];return e}var Tu=Ms("animationend"),bu=Ms("animationiteration"),Ru=Ms("animationstart"),Nu=Ms("transitionend"),Cu=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zt(e,t){Cu.set(e,t),en(t,[e])}for(var tl=0;tl<Pi.length;tl++){var nl=Pi[tl],N0=nl.toLowerCase(),C0=nl[0].toUpperCase()+nl.slice(1);zt(N0,"on"+C0)}zt(Tu,"onAnimationEnd");zt(bu,"onAnimationIteration");zt(Ru,"onAnimationStart");zt("dblclick","onDoubleClick");zt("focusin","onFocus");zt("focusout","onBlur");zt(Nu,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gn));function Li(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Nd(r,t,void 0,e),e.currentTarget=null}function ku(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==l&&s.isPropagationStopped())break e;Li(s,a,c),l=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,c=a.currentTarget,a=a.listener,u!==l&&s.isPropagationStopped())break e;Li(s,a,c),l=u}}}if(ns)throw e=Il,ns=!1,Il=null,e}function q(e,t){var n=t[Fl];n===void 0&&(n=t[Fl]=new Set);var r=e+"__bubble";n.has(r)||(Mu(t,e,2,!1),n.add(r))}function rl(e,t,n){var r=0;t&&(r|=4),Mu(n,e,r,t)}var Or="_reactListening"+Math.random().toString(36).slice(2);function ar(e){if(!e[Or]){e[Or]=!0,La.forEach(function(n){n!=="selectionchange"&&(k0.has(n)||rl(n,!1,e),rl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Or]||(t[Or]=!0,rl("selectionchange",!1,t))}}function Mu(e,t,n,r){switch(fu(t)){case 1:var s=Hd;break;case 4:s=Vd;break;default:s=No}n=s.bind(null,t,n,e),s=void 0,!jl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function sl(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Vt(a),i===null)return;if(u=i.tag,u===5||u===6){r=l=i;continue e}a=a.parentNode}}r=r.return}Za(function(){var c=l,m=Eo(n),p=[];e:{var h=Cu.get(e);if(h!==void 0){var x=ko,b=e;switch(e){case"keypress":if(Wr(n)===0)break e;case"keydown":case"keyup":x=s0;break;case"focusin":b="focus",x=qs;break;case"focusout":b="blur",x=qs;break;case"beforeblur":case"afterblur":x=qs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=$d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=i0;break;case Tu:case bu:case Ru:x=Qd;break;case Nu:x=u0;break;case"scroll":x=Gd;break;case"wheel":x=d0;break;case"copy":case"cut":case"paste":x=qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ni}var g=(t&4)!==0,E=!g&&e==="scroll",f=g?h!==null?h+"Capture":null:h;g=[];for(var d=c,v;d!==null;){v=d;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,f!==null&&(S=nr(d,f),S!=null&&g.push(ur(d,S,v)))),E)break;d=d.return}0<g.length&&(h=new x(h,b,null,n,m),p.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==kl&&(b=n.relatedTarget||n.fromElement)&&(Vt(b)||b[ft]))break e;if((x||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,x?(b=n.relatedTarget||n.toElement,x=c,b=b?Vt(b):null,b!==null&&(E=tn(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=c),x!==b)){if(g=bi,S="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(g=Ni,S="onPointerLeave",f="onPointerEnter",d="pointer"),E=x==null?h:un(x),v=b==null?h:un(b),h=new g(S,d+"leave",x,n,m),h.target=E,h.relatedTarget=v,S=null,Vt(m)===c&&(g=new g(f,d+"enter",b,n,m),g.target=v,g.relatedTarget=E,S=g),E=S,x&&b)t:{for(g=x,f=b,d=0,v=g;v;v=nn(v))d++;for(v=0,S=f;S;S=nn(S))v++;for(;0<d-v;)g=nn(g),d--;for(;0<v-d;)f=nn(f),v--;for(;d--;){if(g===f||f!==null&&g===f.alternate)break t;g=nn(g),f=nn(f)}g=null}else g=null;x!==null&&zi(p,h,x,g,!1),b!==null&&E!==null&&zi(p,E,b,g,!0)}}e:{if(h=c?un(c):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var R=y0;else if(Mi(h))if(yu)R=E0;else{R=w0;var C=x0}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=S0);if(R&&(R=R(e,c))){vu(p,R,n,m);break e}C&&C(e,h,c),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Tl(h,"number",h.value)}switch(C=c?un(c):window,e){case"focusin":(Mi(C)||C.contentEditable==="true")&&(on=C,Pl=c,Qn=null);break;case"focusout":Qn=Pl=on=null;break;case"mousedown":Ll=!0;break;case"contextmenu":case"mouseup":case"dragend":Ll=!1,_i(p,n,m);break;case"selectionchange":if(R0)break;case"keydown":case"keyup":_i(p,n,m)}var w;if(jo)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else ln?mu(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(pu&&n.locale!=="ko"&&(ln||k!=="onCompositionStart"?k==="onCompositionEnd"&&ln&&(w=hu()):(Et=m,Co="value"in Et?Et.value:Et.textContent,ln=!0)),C=is(c,k),0<C.length&&(k=new Ri(k,e,null,n,m),p.push({event:k,listeners:C}),w?k.data=w:(w=gu(n),w!==null&&(k.data=w)))),(w=h0?p0(e,n):m0(e,n))&&(c=is(c,"onBeforeInput"),0<c.length&&(m=new Ri("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:c}),m.data=w))}ku(p,t)})}function ur(e,t,n){return{instance:e,listener:t,currentTarget:n}}function is(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=nr(e,n),l!=null&&r.unshift(ur(e,l,s)),l=nr(e,t),l!=null&&r.push(ur(e,l,s))),e=e.return}return r}function nn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zi(e,t,n,r,s){for(var l=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=nr(n,l),u!=null&&i.unshift(ur(n,u,a))):s||(u=nr(n,l),u!=null&&i.push(ur(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var M0=/\r\n?/g,j0=/\u0000|\uFFFD/g;function Di(e){return(typeof e=="string"?e:""+e).replace(M0,`
`).replace(j0,"")}function _r(e,t,n){if(t=Di(t),Di(e)!==t&&n)throw Error(M(425))}function as(){}var zl=null,Dl=null;function Ul(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bl=typeof setTimeout=="function"?setTimeout:void 0,I0=typeof clearTimeout=="function"?clearTimeout:void 0,Ui=typeof Promise=="function"?Promise:void 0,A0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ui<"u"?function(e){return Ui.resolve(null).then(e).catch(O0)}:Bl;function O0(e){setTimeout(function(){throw e})}function ll(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),lr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);lr(t)}function Mt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var An=Math.random().toString(36).slice(2),nt="__reactFiber$"+An,cr="__reactProps$"+An,ft="__reactContainer$"+An,Fl="__reactEvents$"+An,_0="__reactListeners$"+An,P0="__reactHandles$"+An;function Vt(e){var t=e[nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ft]||n[nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bi(e);e!==null;){if(n=e[nt])return n;e=Bi(e)}return t}e=n,n=e.parentNode}return null}function wr(e){return e=e[nt]||e[ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function un(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function js(e){return e[cr]||null}var Hl=[],cn=-1;function Dt(e){return{current:e}}function J(e){0>cn||(e.current=Hl[cn],Hl[cn]=null,cn--)}function X(e,t){cn++,Hl[cn]=e.current,e.current=t}var Lt={},Se=Dt(Lt),Ie=Dt(!1),Qt=Lt;function bn(e,t){var n=e.type.contextTypes;if(!n)return Lt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ae(e){return e=e.childContextTypes,e!=null}function us(){J(Ie),J(Se)}function Fi(e,t,n){if(Se.current!==Lt)throw Error(M(168));X(Se,t),X(Ie,n)}function ju(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(M(108,xd(e)||"Unknown",s));return se({},n,r)}function cs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lt,Qt=Se.current,X(Se,e),X(Ie,Ie.current),!0}function Hi(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=ju(e,t,Qt),r.__reactInternalMemoizedMergedChildContext=e,J(Ie),J(Se),X(Se,e)):J(Ie),X(Ie,n)}var ot=null,Is=!1,ol=!1;function Iu(e){ot===null?ot=[e]:ot.push(e)}function L0(e){Is=!0,Iu(e)}function Ut(){if(!ol&&ot!==null){ol=!0;var e=0,t=Q;try{var n=ot;for(Q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ot=null,Is=!1}catch(s){throw ot!==null&&(ot=ot.slice(e+1)),nu(To,Ut),s}finally{Q=t,ol=!1}}return null}var dn=[],fn=0,ds=null,fs=0,Fe=[],He=0,Xt=null,it=1,at="";function Ft(e,t){dn[fn++]=fs,dn[fn++]=ds,ds=e,fs=t}function Au(e,t,n){Fe[He++]=it,Fe[He++]=at,Fe[He++]=Xt,Xt=e;var r=it;e=at;var s=32-qe(r)-1;r&=~(1<<s),n+=1;var l=32-qe(t)+s;if(30<l){var i=s-s%5;l=(r&(1<<i)-1).toString(32),r>>=i,s-=i,it=1<<32-qe(t)+s|n<<s|r,at=l+e}else it=1<<l|n<<s|r,at=e}function Ao(e){e.return!==null&&(Ft(e,1),Au(e,1,0))}function Oo(e){for(;e===ds;)ds=dn[--fn],dn[fn]=null,fs=dn[--fn],dn[fn]=null;for(;e===Xt;)Xt=Fe[--He],Fe[He]=null,at=Fe[--He],Fe[He]=null,it=Fe[--He],Fe[He]=null}var Le=null,Pe=null,ee=!1,Xe=null;function Ou(e,t){var n=Ve(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vi(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Le=e,Pe=Mt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Le=e,Pe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xt!==null?{id:it,overflow:at}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ve(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Le=e,Pe=null,!0):!1;default:return!1}}function Vl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gl(e){if(ee){var t=Pe;if(t){var n=t;if(!Vi(e,t)){if(Vl(e))throw Error(M(418));t=Mt(n.nextSibling);var r=Le;t&&Vi(e,t)?Ou(r,n):(e.flags=e.flags&-4097|2,ee=!1,Le=e)}}else{if(Vl(e))throw Error(M(418));e.flags=e.flags&-4097|2,ee=!1,Le=e}}}function Gi(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Le=e}function Pr(e){if(e!==Le)return!1;if(!ee)return Gi(e),ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ul(e.type,e.memoizedProps)),t&&(t=Pe)){if(Vl(e))throw _u(),Error(M(418));for(;t;)Ou(e,t),t=Mt(t.nextSibling)}if(Gi(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pe=Mt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pe=null}}else Pe=Le?Mt(e.stateNode.nextSibling):null;return!0}function _u(){for(var e=Pe;e;)e=Mt(e.nextSibling)}function Rn(){Pe=Le=null,ee=!1}function _o(e){Xe===null?Xe=[e]:Xe.push(e)}var z0=mt.ReactCurrentBatchConfig;function Dn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var a=s.refs;i===null?delete a[l]:a[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function Lr(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wi(e){var t=e._init;return t(e._payload)}function Pu(e){function t(f,d){if(e){var v=f.deletions;v===null?(f.deletions=[d],f.flags|=16):v.push(d)}}function n(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function r(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function s(f,d){return f=Ot(f,d),f.index=0,f.sibling=null,f}function l(f,d,v){return f.index=v,e?(v=f.alternate,v!==null?(v=v.index,v<d?(f.flags|=2,d):v):(f.flags|=2,d)):(f.flags|=1048576,d)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,d,v,S){return d===null||d.tag!==6?(d=hl(v,f.mode,S),d.return=f,d):(d=s(d,v),d.return=f,d)}function u(f,d,v,S){var R=v.type;return R===sn?m(f,d,v.props.children,S,v.key):d!==null&&(d.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yt&&Wi(R)===d.type)?(S=s(d,v.props),S.ref=Dn(f,d,v),S.return=f,S):(S=Zr(v.type,v.key,v.props,null,f.mode,S),S.ref=Dn(f,d,v),S.return=f,S)}function c(f,d,v,S){return d===null||d.tag!==4||d.stateNode.containerInfo!==v.containerInfo||d.stateNode.implementation!==v.implementation?(d=pl(v,f.mode,S),d.return=f,d):(d=s(d,v.children||[]),d.return=f,d)}function m(f,d,v,S,R){return d===null||d.tag!==7?(d=Kt(v,f.mode,S,R),d.return=f,d):(d=s(d,v),d.return=f,d)}function p(f,d,v){if(typeof d=="string"&&d!==""||typeof d=="number")return d=hl(""+d,f.mode,v),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Rr:return v=Zr(d.type,d.key,d.props,null,f.mode,v),v.ref=Dn(f,null,d),v.return=f,v;case rn:return d=pl(d,f.mode,v),d.return=f,d;case yt:var S=d._init;return p(f,S(d._payload),v)}if(Hn(d)||On(d))return d=Kt(d,f.mode,v,null),d.return=f,d;Lr(f,d)}return null}function h(f,d,v,S){var R=d!==null?d.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return R!==null?null:a(f,d,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Rr:return v.key===R?u(f,d,v,S):null;case rn:return v.key===R?c(f,d,v,S):null;case yt:return R=v._init,h(f,d,R(v._payload),S)}if(Hn(v)||On(v))return R!==null?null:m(f,d,v,S,null);Lr(f,v)}return null}function x(f,d,v,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return f=f.get(v)||null,a(d,f,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rr:return f=f.get(S.key===null?v:S.key)||null,u(d,f,S,R);case rn:return f=f.get(S.key===null?v:S.key)||null,c(d,f,S,R);case yt:var C=S._init;return x(f,d,v,C(S._payload),R)}if(Hn(S)||On(S))return f=f.get(v)||null,m(d,f,S,R,null);Lr(d,S)}return null}function b(f,d,v,S){for(var R=null,C=null,w=d,k=d=0,I=null;w!==null&&k<v.length;k++){w.index>k?(I=w,w=null):I=w.sibling;var O=h(f,w,v[k],S);if(O===null){w===null&&(w=I);break}e&&w&&O.alternate===null&&t(f,w),d=l(O,d,k),C===null?R=O:C.sibling=O,C=O,w=I}if(k===v.length)return n(f,w),ee&&Ft(f,k),R;if(w===null){for(;k<v.length;k++)w=p(f,v[k],S),w!==null&&(d=l(w,d,k),C===null?R=w:C.sibling=w,C=w);return ee&&Ft(f,k),R}for(w=r(f,w);k<v.length;k++)I=x(w,f,k,v[k],S),I!==null&&(e&&I.alternate!==null&&w.delete(I.key===null?k:I.key),d=l(I,d,k),C===null?R=I:C.sibling=I,C=I);return e&&w.forEach(function(U){return t(f,U)}),ee&&Ft(f,k),R}function g(f,d,v,S){var R=On(v);if(typeof R!="function")throw Error(M(150));if(v=R.call(v),v==null)throw Error(M(151));for(var C=R=null,w=d,k=d=0,I=null,O=v.next();w!==null&&!O.done;k++,O=v.next()){w.index>k?(I=w,w=null):I=w.sibling;var U=h(f,w,O.value,S);if(U===null){w===null&&(w=I);break}e&&w&&U.alternate===null&&t(f,w),d=l(U,d,k),C===null?R=U:C.sibling=U,C=U,w=I}if(O.done)return n(f,w),ee&&Ft(f,k),R;if(w===null){for(;!O.done;k++,O=v.next())O=p(f,O.value,S),O!==null&&(d=l(O,d,k),C===null?R=O:C.sibling=O,C=O);return ee&&Ft(f,k),R}for(w=r(f,w);!O.done;k++,O=v.next())O=x(w,f,k,O.value,S),O!==null&&(e&&O.alternate!==null&&w.delete(O.key===null?k:O.key),d=l(O,d,k),C===null?R=O:C.sibling=O,C=O);return e&&w.forEach(function(K){return t(f,K)}),ee&&Ft(f,k),R}function E(f,d,v,S){if(typeof v=="object"&&v!==null&&v.type===sn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Rr:e:{for(var R=v.key,C=d;C!==null;){if(C.key===R){if(R=v.type,R===sn){if(C.tag===7){n(f,C.sibling),d=s(C,v.props.children),d.return=f,f=d;break e}}else if(C.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yt&&Wi(R)===C.type){n(f,C.sibling),d=s(C,v.props),d.ref=Dn(f,C,v),d.return=f,f=d;break e}n(f,C);break}else t(f,C);C=C.sibling}v.type===sn?(d=Kt(v.props.children,f.mode,S,v.key),d.return=f,f=d):(S=Zr(v.type,v.key,v.props,null,f.mode,S),S.ref=Dn(f,d,v),S.return=f,f=S)}return i(f);case rn:e:{for(C=v.key;d!==null;){if(d.key===C)if(d.tag===4&&d.stateNode.containerInfo===v.containerInfo&&d.stateNode.implementation===v.implementation){n(f,d.sibling),d=s(d,v.children||[]),d.return=f,f=d;break e}else{n(f,d);break}else t(f,d);d=d.sibling}d=pl(v,f.mode,S),d.return=f,f=d}return i(f);case yt:return C=v._init,E(f,d,C(v._payload),S)}if(Hn(v))return b(f,d,v,S);if(On(v))return g(f,d,v,S);Lr(f,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,d!==null&&d.tag===6?(n(f,d.sibling),d=s(d,v),d.return=f,f=d):(n(f,d),d=hl(v,f.mode,S),d.return=f,f=d),i(f)):n(f,d)}return E}var Nn=Pu(!0),Lu=Pu(!1),hs=Dt(null),ps=null,hn=null,Po=null;function Lo(){Po=hn=ps=null}function zo(e){var t=hs.current;J(hs),e._currentValue=t}function Wl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wn(e,t){ps=e,Po=hn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(je=!0),e.firstContext=null)}function We(e){var t=e._currentValue;if(Po!==e)if(e={context:e,memoizedValue:t,next:null},hn===null){if(ps===null)throw Error(M(308));hn=e,ps.dependencies={lanes:0,firstContext:e}}else hn=hn.next=e;return t}var Gt=null;function Do(e){Gt===null?Gt=[e]:Gt.push(e)}function zu(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Do(t)):(n.next=s.next,s.next=n),t.interleaved=n,ht(e,r)}function ht(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xt=!1;function Uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ct(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ht(e,n)}return s=r.interleaved,s===null?(t.next=t,Do(r)):(t.next=s.next,s.next=t),r.interleaved=t,ht(e,n)}function $r(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bo(e,n)}}function $i(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ms(e,t,n,r){var s=e.updateQueue;xt=!1;var l=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,i===null?l=c:i.next=c,i=u;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==i&&(a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=u))}if(l!==null){var p=s.baseState;i=0,m=c=u=null,a=l;do{var h=a.lane,x=a.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,g=a;switch(h=t,x=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){p=b.call(x,p,h);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,h=typeof b=="function"?b.call(x,p,h):b,h==null)break e;p=se({},p,h);break e;case 2:xt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(c=m=x,u=p):m=m.next=x,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Zt|=i,e.lanes=i,e.memoizedState=p}}function Yi(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var Sr={},st=Dt(Sr),dr=Dt(Sr),fr=Dt(Sr);function Wt(e){if(e===Sr)throw Error(M(174));return e}function Bo(e,t){switch(X(fr,t),X(dr,e),X(st,Sr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rl(t,e)}J(st),X(st,t)}function Cn(){J(st),J(dr),J(fr)}function Uu(e){Wt(fr.current);var t=Wt(st.current),n=Rl(t,e.type);t!==n&&(X(dr,e),X(st,n))}function Fo(e){dr.current===e&&(J(st),J(dr))}var ne=Dt(0);function gs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var il=[];function Ho(){for(var e=0;e<il.length;e++)il[e]._workInProgressVersionPrimary=null;il.length=0}var Yr=mt.ReactCurrentDispatcher,al=mt.ReactCurrentBatchConfig,qt=0,re=null,ue=null,fe=null,vs=!1,Xn=!1,hr=0,D0=0;function ye(){throw Error(M(321))}function Vo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Je(e[n],t[n]))return!1;return!0}function Go(e,t,n,r,s,l){if(qt=l,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yr.current=e===null||e.memoizedState===null?H0:V0,e=n(r,s),Xn){l=0;do{if(Xn=!1,hr=0,25<=l)throw Error(M(301));l+=1,fe=ue=null,t.updateQueue=null,Yr.current=G0,e=n(r,s)}while(Xn)}if(Yr.current=ys,t=ue!==null&&ue.next!==null,qt=0,fe=ue=re=null,vs=!1,t)throw Error(M(300));return e}function Wo(){var e=hr!==0;return hr=0,e}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?re.memoizedState=fe=e:fe=fe.next=e,fe}function $e(){if(ue===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=ue.next;var t=fe===null?re.memoizedState:fe.next;if(t!==null)fe=t,ue=e;else{if(e===null)throw Error(M(310));ue=e,e={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?re.memoizedState=fe=e:fe=fe.next=e}return fe}function pr(e,t){return typeof t=="function"?t(e):t}function ul(e){var t=$e(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=ue,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var i=s.next;s.next=l.next,l.next=i}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=i=null,u=null,c=l;do{var m=c.lane;if((qt&m)===m)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=p,i=r):u=u.next=p,re.lanes|=m,Zt|=m}c=c.next}while(c!==null&&c!==l);u===null?i=r:u.next=a,Je(r,t.memoizedState)||(je=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,re.lanes|=l,Zt|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cl(e){var t=$e(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do l=e(l,i.action),i=i.next;while(i!==s);Je(l,t.memoizedState)||(je=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Bu(){}function Fu(e,t){var n=re,r=$e(),s=t(),l=!Je(r.memoizedState,s);if(l&&(r.memoizedState=s,je=!0),r=r.queue,$o(Gu.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,mr(9,Vu.bind(null,n,r,s,t),void 0,null),he===null)throw Error(M(349));qt&30||Hu(n,t,s)}return s}function Hu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vu(e,t,n,r){t.value=n,t.getSnapshot=r,Wu(t)&&$u(e)}function Gu(e,t,n){return n(function(){Wu(t)&&$u(e)})}function Wu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Je(e,n)}catch{return!0}}function $u(e){var t=ht(e,1);t!==null&&Ze(t,e,1,-1)}function Ki(e){var t=tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e},t.queue=e,e=e.dispatch=F0.bind(null,re,e),[t.memoizedState,e]}function mr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Yu(){return $e().memoizedState}function Kr(e,t,n,r){var s=tt();re.flags|=e,s.memoizedState=mr(1|t,n,void 0,r===void 0?null:r)}function As(e,t,n,r){var s=$e();r=r===void 0?null:r;var l=void 0;if(ue!==null){var i=ue.memoizedState;if(l=i.destroy,r!==null&&Vo(r,i.deps)){s.memoizedState=mr(t,n,l,r);return}}re.flags|=e,s.memoizedState=mr(1|t,n,l,r)}function Qi(e,t){return Kr(8390656,8,e,t)}function $o(e,t){return As(2048,8,e,t)}function Ku(e,t){return As(4,2,e,t)}function Qu(e,t){return As(4,4,e,t)}function Xu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,n){return n=n!=null?n.concat([e]):null,As(4,4,Xu.bind(null,t,e),n)}function Yo(){}function Zu(e,t){var n=$e();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ju(e,t){var n=$e();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ec(e,t,n){return qt&21?(Je(n,t)||(n=lu(),re.lanes|=n,Zt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,je=!0),e.memoizedState=n)}function U0(e,t){var n=Q;Q=n!==0&&4>n?n:4,e(!0);var r=al.transition;al.transition={};try{e(!1),t()}finally{Q=n,al.transition=r}}function tc(){return $e().memoizedState}function B0(e,t,n){var r=At(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nc(e))rc(t,n);else if(n=zu(e,t,n,r),n!==null){var s=be();Ze(n,e,r,s),sc(n,t,r)}}function F0(e,t,n){var r=At(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nc(e))rc(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,a=l(i,n);if(s.hasEagerState=!0,s.eagerState=a,Je(a,i)){var u=t.interleaved;u===null?(s.next=s,Do(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=zu(e,t,s,r),n!==null&&(s=be(),Ze(n,e,r,s),sc(n,t,r))}}function nc(e){var t=e.alternate;return e===re||t!==null&&t===re}function rc(e,t){Xn=vs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sc(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bo(e,n)}}var ys={readContext:We,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},H0={readContext:We,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:We,useEffect:Qi,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Kr(4194308,4,Xu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Kr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kr(4,2,e,t)},useMemo:function(e,t){var n=tt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=tt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=B0.bind(null,re,e),[r.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:Ki,useDebugValue:Yo,useDeferredValue:function(e){return tt().memoizedState=e},useTransition:function(){var e=Ki(!1),t=e[0];return e=U0.bind(null,e[1]),tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=re,s=tt();if(ee){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),he===null)throw Error(M(349));qt&30||Hu(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Qi(Gu.bind(null,r,l,e),[e]),r.flags|=2048,mr(9,Vu.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=tt(),t=he.identifierPrefix;if(ee){var n=at,r=it;n=(r&~(1<<32-qe(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=D0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},V0={readContext:We,useCallback:Zu,useContext:We,useEffect:$o,useImperativeHandle:qu,useInsertionEffect:Ku,useLayoutEffect:Qu,useMemo:Ju,useReducer:ul,useRef:Yu,useState:function(){return ul(pr)},useDebugValue:Yo,useDeferredValue:function(e){var t=$e();return ec(t,ue.memoizedState,e)},useTransition:function(){var e=ul(pr)[0],t=$e().memoizedState;return[e,t]},useMutableSource:Bu,useSyncExternalStore:Fu,useId:tc,unstable_isNewReconciler:!1},G0={readContext:We,useCallback:Zu,useContext:We,useEffect:$o,useImperativeHandle:qu,useInsertionEffect:Ku,useLayoutEffect:Qu,useMemo:Ju,useReducer:cl,useRef:Yu,useState:function(){return cl(pr)},useDebugValue:Yo,useDeferredValue:function(e){var t=$e();return ue===null?t.memoizedState=e:ec(t,ue.memoizedState,e)},useTransition:function(){var e=cl(pr)[0],t=$e().memoizedState;return[e,t]},useMutableSource:Bu,useSyncExternalStore:Fu,useId:tc,unstable_isNewReconciler:!1};function Ke(e,t){if(e&&e.defaultProps){t=se({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function $l(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:se({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Os={isMounted:function(e){return(e=e._reactInternals)?tn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=be(),s=At(e),l=ct(r,s);l.payload=t,n!=null&&(l.callback=n),t=jt(e,l,s),t!==null&&(Ze(t,e,s,r),$r(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=be(),s=At(e),l=ct(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=jt(e,l,s),t!==null&&(Ze(t,e,s,r),$r(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=be(),r=At(e),s=ct(n,r);s.tag=2,t!=null&&(s.callback=t),t=jt(e,s,r),t!==null&&(Ze(t,e,r,n),$r(t,e,r))}};function Xi(e,t,n,r,s,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):t.prototype&&t.prototype.isPureReactComponent?!ir(n,r)||!ir(s,l):!0}function lc(e,t,n){var r=!1,s=Lt,l=t.contextType;return typeof l=="object"&&l!==null?l=We(l):(s=Ae(t)?Qt:Se.current,r=t.contextTypes,l=(r=r!=null)?bn(e,s):Lt),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Os,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function qi(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Os.enqueueReplaceState(t,t.state,null)}function Yl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Uo(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=We(l):(l=Ae(t)?Qt:Se.current,s.context=bn(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&($l(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Os.enqueueReplaceState(s,s.state,null),ms(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function kn(e,t){try{var n="",r=t;do n+=yd(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Kl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var W0=typeof WeakMap=="function"?WeakMap:Map;function oc(e,t,n){n=ct(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ws||(ws=!0,so=r),Kl(e,t)},n}function ic(e,t,n){n=ct(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Kl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Kl(e,t),typeof r!="function"&&(It===null?It=new Set([this]):It.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Zi(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new W0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=lf.bind(null,e,t,n),t.then(e,e))}function Ji(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ea(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ct(-1,1),t.tag=2,jt(n,t,1))),n.lanes|=1),e)}var $0=mt.ReactCurrentOwner,je=!1;function Te(e,t,n,r){t.child=e===null?Lu(t,null,n,r):Nn(t,e.child,n,r)}function ta(e,t,n,r,s){n=n.render;var l=t.ref;return wn(t,s),r=Go(e,t,n,r,l,s),n=Wo(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pt(e,t,s)):(ee&&n&&Ao(t),t.flags|=1,Te(e,t,r,s),t.child)}function na(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!ti(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,ac(e,t,l,r,s)):(e=Zr(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:ir,n(i,r)&&e.ref===t.ref)return pt(e,t,s)}return t.flags|=1,e=Ot(l,r),e.ref=t.ref,e.return=t,t.child=e}function ac(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(ir(l,r)&&e.ref===t.ref)if(je=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(je=!0);else return t.lanes=e.lanes,pt(e,t,s)}return Ql(e,t,n,r,s)}function uc(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(mn,_e),_e|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,X(mn,_e),_e|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,X(mn,_e),_e|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,X(mn,_e),_e|=r;return Te(e,t,s,n),t.child}function cc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ql(e,t,n,r,s){var l=Ae(n)?Qt:Se.current;return l=bn(t,l),wn(t,s),n=Go(e,t,n,r,l,s),r=Wo(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pt(e,t,s)):(ee&&r&&Ao(t),t.flags|=1,Te(e,t,n,s),t.child)}function ra(e,t,n,r,s){if(Ae(n)){var l=!0;cs(t)}else l=!1;if(wn(t,s),t.stateNode===null)Qr(e,t),lc(t,n,r),Yl(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=We(c):(c=Ae(n)?Qt:Se.current,c=bn(t,c));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==c)&&qi(t,i,r,c),xt=!1;var h=t.memoizedState;i.state=h,ms(t,r,i,s),u=t.memoizedState,a!==r||h!==u||Ie.current||xt?(typeof m=="function"&&($l(t,n,m,r),u=t.memoizedState),(a=xt||Xi(t,n,a,r,h,u,c))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Du(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ke(t.type,a),i.props=c,p=t.pendingProps,h=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=We(u):(u=Ae(n)?Qt:Se.current,u=bn(t,u));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==p||h!==u)&&qi(t,i,r,u),xt=!1,h=t.memoizedState,i.state=h,ms(t,r,i,s);var b=t.memoizedState;a!==p||h!==b||Ie.current||xt?(typeof x=="function"&&($l(t,n,x,r),b=t.memoizedState),(c=xt||Xi(t,n,c,r,h,b,u)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,b,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,b,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),i.props=r,i.state=b,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Xl(e,t,n,r,l,s)}function Xl(e,t,n,r,s,l){cc(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Hi(t,n,!1),pt(e,t,l);r=t.stateNode,$0.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Nn(t,e.child,null,l),t.child=Nn(t,null,a,l)):Te(e,t,a,l),t.memoizedState=r.state,s&&Hi(t,n,!0),t.child}function dc(e){var t=e.stateNode;t.pendingContext?Fi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(e,t.context,!1),Bo(e,t.containerInfo)}function sa(e,t,n,r,s){return Rn(),_o(s),t.flags|=256,Te(e,t,n,r),t.child}var ql={dehydrated:null,treeContext:null,retryLane:0};function Zl(e){return{baseLanes:e,cachePool:null,transitions:null}}function fc(e,t,n){var r=t.pendingProps,s=ne.current,l=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),X(ne,s&1),e===null)return Gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,l?(r=t.mode,l=t.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ls(i,r,0,null),e=Kt(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Zl(n),t.memoizedState=ql,e):Ko(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Y0(e,t,i,r,a,s,n);if(l){l=r.fallback,i=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ot(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Ot(a,l):(l=Kt(l,i,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,i=e.child.memoizedState,i=i===null?Zl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=ql,r}return l=e.child,e=l.sibling,r=Ot(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ko(e,t){return t=Ls({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zr(e,t,n,r){return r!==null&&_o(r),Nn(t,e.child,null,n),e=Ko(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Y0(e,t,n,r,s,l,i){if(n)return t.flags&256?(t.flags&=-257,r=dl(Error(M(422))),zr(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Ls({mode:"visible",children:r.children},s,0,null),l=Kt(l,s,i,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Nn(t,e.child,null,i),t.child.memoizedState=Zl(i),t.memoizedState=ql,l);if(!(t.mode&1))return zr(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(M(419)),r=dl(l,r,void 0),zr(e,t,i,r)}if(a=(i&e.childLanes)!==0,je||a){if(r=he,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,ht(e,s),Ze(r,e,s,-1))}return ei(),r=dl(Error(M(421))),zr(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=of.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Pe=Mt(s.nextSibling),Le=t,ee=!0,Xe=null,e!==null&&(Fe[He++]=it,Fe[He++]=at,Fe[He++]=Xt,it=e.id,at=e.overflow,Xt=t),t=Ko(t,r.children),t.flags|=4096,t)}function la(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Wl(e.return,t,n)}function fl(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function hc(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(Te(e,t,r.children,n),r=ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&la(e,n,t);else if(e.tag===19)la(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(X(ne,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&gs(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),fl(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&gs(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}fl(t,!0,n,null,l);break;case"together":fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=Ot(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ot(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function K0(e,t,n){switch(t.tag){case 3:dc(t),Rn();break;case 5:Uu(t);break;case 1:Ae(t.type)&&cs(t);break;case 4:Bo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;X(hs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(X(ne,ne.current&1),t.flags|=128,null):n&t.child.childLanes?fc(e,t,n):(X(ne,ne.current&1),e=pt(e,t,n),e!==null?e.sibling:null);X(ne,ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),X(ne,ne.current),r)break;return null;case 22:case 23:return t.lanes=0,uc(e,t,n)}return pt(e,t,n)}var pc,Jl,mc,gc;pc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jl=function(){};mc=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Wt(st.current);var l=null;switch(n){case"input":s=Sl(e,s),r=Sl(e,r),l=[];break;case"select":s=se({},s,{value:void 0}),r=se({},r,{value:void 0}),l=[];break;case"textarea":s=bl(e,s),r=bl(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=as)}Nl(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(er.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(l||(l=[]),l.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(l=l||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(er.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&q("scroll",e),l||a===u||(l=[])):(l=l||[]).push(c,u))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};gc=function(e,t,n,r){n!==r&&(t.flags|=4)};function Un(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Q0(e,t,n){var r=t.pendingProps;switch(Oo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(t),null;case 1:return Ae(t.type)&&us(),xe(t),null;case 3:return r=t.stateNode,Cn(),J(Ie),J(Se),Ho(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Pr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xe!==null&&(io(Xe),Xe=null))),Jl(e,t),xe(t),null;case 5:Fo(t);var s=Wt(fr.current);if(n=t.type,e!==null&&t.stateNode!=null)mc(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return xe(t),null}if(e=Wt(st.current),Pr(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[nt]=t,r[cr]=l,e=(t.mode&1)!==0,n){case"dialog":q("cancel",r),q("close",r);break;case"iframe":case"object":case"embed":q("load",r);break;case"video":case"audio":for(s=0;s<Gn.length;s++)q(Gn[s],r);break;case"source":q("error",r);break;case"img":case"image":case"link":q("error",r),q("load",r);break;case"details":q("toggle",r);break;case"input":pi(r,l),q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},q("invalid",r);break;case"textarea":gi(r,l),q("invalid",r)}Nl(n,l),s=null;for(var i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&_r(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&_r(r.textContent,a,e),s=["children",""+a]):er.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&q("scroll",r)}switch(n){case"input":Nr(r),mi(r,l,!0);break;case"textarea":Nr(r),vi(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=as)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ga(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[nt]=t,e[cr]=r,pc(e,t,!1,!1),t.stateNode=e;e:{switch(i=Cl(n,r),n){case"dialog":q("cancel",e),q("close",e),s=r;break;case"iframe":case"object":case"embed":q("load",e),s=r;break;case"video":case"audio":for(s=0;s<Gn.length;s++)q(Gn[s],e);s=r;break;case"source":q("error",e),s=r;break;case"img":case"image":case"link":q("error",e),q("load",e),s=r;break;case"details":q("toggle",e),s=r;break;case"input":pi(e,r),s=Sl(e,r),q("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=se({},r,{value:void 0}),q("invalid",e);break;case"textarea":gi(e,r),s=bl(e,r),q("invalid",e);break;default:s=r}Nl(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="style"?Ya(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Wa(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&tr(e,u):typeof u=="number"&&tr(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(er.hasOwnProperty(l)?u!=null&&l==="onScroll"&&q("scroll",e):u!=null&&yo(e,l,u,i))}switch(n){case"input":Nr(e),mi(e,r,!1);break;case"textarea":Nr(e),vi(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Pt(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?gn(e,!!r.multiple,l,!1):r.defaultValue!=null&&gn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=as)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xe(t),null;case 6:if(e&&t.stateNode!=null)gc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=Wt(fr.current),Wt(st.current),Pr(t)){if(r=t.stateNode,n=t.memoizedProps,r[nt]=t,(l=r.nodeValue!==n)&&(e=Le,e!==null))switch(e.tag){case 3:_r(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_r(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nt]=t,t.stateNode=r}return xe(t),null;case 13:if(J(ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ee&&Pe!==null&&t.mode&1&&!(t.flags&128))_u(),Rn(),t.flags|=98560,l=!1;else if(l=Pr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(M(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(M(317));l[nt]=t}else Rn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xe(t),l=!1}else Xe!==null&&(io(Xe),Xe=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?ce===0&&(ce=3):ei())),t.updateQueue!==null&&(t.flags|=4),xe(t),null);case 4:return Cn(),Jl(e,t),e===null&&ar(t.stateNode.containerInfo),xe(t),null;case 10:return zo(t.type._context),xe(t),null;case 17:return Ae(t.type)&&us(),xe(t),null;case 19:if(J(ne),l=t.memoizedState,l===null)return xe(t),null;if(r=(t.flags&128)!==0,i=l.rendering,i===null)if(r)Un(l,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=gs(e),i!==null){for(t.flags|=128,Un(l,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return X(ne,ne.current&1|2),t.child}e=e.sibling}l.tail!==null&&oe()>Mn&&(t.flags|=128,r=!0,Un(l,!1),t.lanes=4194304)}else{if(!r)if(e=gs(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Un(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!ee)return xe(t),null}else 2*oe()-l.renderingStartTime>Mn&&n!==1073741824&&(t.flags|=128,r=!0,Un(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=oe(),t.sibling=null,n=ne.current,X(ne,r?n&1|2:n&1),t):(xe(t),null);case 22:case 23:return Jo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_e&1073741824&&(xe(t),t.subtreeFlags&6&&(t.flags|=8192)):xe(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function X0(e,t){switch(Oo(t),t.tag){case 1:return Ae(t.type)&&us(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),J(Ie),J(Se),Ho(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fo(t),null;case 13:if(J(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(ne),null;case 4:return Cn(),null;case 10:return zo(t.type._context),null;case 22:case 23:return Jo(),null;case 24:return null;default:return null}}var Dr=!1,we=!1,q0=typeof WeakSet=="function"?WeakSet:Set,_=null;function pn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(e,t,r)}else n.current=null}function eo(e,t,n){try{n()}catch(r){le(e,t,r)}}var oa=!1;function Z0(e,t){if(zl=ls,e=Su(),Io(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,c=0,m=0,p=e,h=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(a=i+s),p!==l||r!==0&&p.nodeType!==3||(u=i+r),p.nodeType===3&&(i+=p.nodeValue.length),(x=p.firstChild)!==null;)h=p,p=x;for(;;){if(p===e)break t;if(h===n&&++c===s&&(a=i),h===l&&++m===r&&(u=i),(x=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=x}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dl={focusedElem:e,selectionRange:n},ls=!1,_=t;_!==null;)if(t=_,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_=e;else for(;_!==null;){t=_;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,E=b.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ke(t.type,g),E);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){le(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,_=e;break}_=t.return}return b=oa,oa=!1,b}function qn(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&eo(t,n,l)}s=s.next}while(s!==r)}}function _s(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function to(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vc(e){var t=e.alternate;t!==null&&(e.alternate=null,vc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nt],delete t[cr],delete t[Fl],delete t[_0],delete t[P0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yc(e){return e.tag===5||e.tag===3||e.tag===4}function ia(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function no(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=as));else if(r!==4&&(e=e.child,e!==null))for(no(e,t,n),e=e.sibling;e!==null;)no(e,t,n),e=e.sibling}function ro(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ro(e,t,n),e=e.sibling;e!==null;)ro(e,t,n),e=e.sibling}var pe=null,Qe=!1;function vt(e,t,n){for(n=n.child;n!==null;)xc(e,t,n),n=n.sibling}function xc(e,t,n){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Ns,n)}catch{}switch(n.tag){case 5:we||pn(n,t);case 6:var r=pe,s=Qe;pe=null,vt(e,t,n),pe=r,Qe=s,pe!==null&&(Qe?(e=pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(Qe?(e=pe,n=n.stateNode,e.nodeType===8?ll(e.parentNode,n):e.nodeType===1&&ll(e,n),lr(e)):ll(pe,n.stateNode));break;case 4:r=pe,s=Qe,pe=n.stateNode.containerInfo,Qe=!0,vt(e,t,n),pe=r,Qe=s;break;case 0:case 11:case 14:case 15:if(!we&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&eo(n,t,i),s=s.next}while(s!==r)}vt(e,t,n);break;case 1:if(!we&&(pn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){le(n,t,a)}vt(e,t,n);break;case 21:vt(e,t,n);break;case 22:n.mode&1?(we=(r=we)||n.memoizedState!==null,vt(e,t,n),we=r):vt(e,t,n);break;default:vt(e,t,n)}}function aa(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new q0),t.forEach(function(r){var s=af.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ye(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:pe=a.stateNode,Qe=!1;break e;case 3:pe=a.stateNode.containerInfo,Qe=!0;break e;case 4:pe=a.stateNode.containerInfo,Qe=!0;break e}a=a.return}if(pe===null)throw Error(M(160));xc(l,i,s),pe=null,Qe=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){le(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wc(t,e),t=t.sibling}function wc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ye(t,e),et(e),r&4){try{qn(3,e,e.return),_s(3,e)}catch(g){le(e,e.return,g)}try{qn(5,e,e.return)}catch(g){le(e,e.return,g)}}break;case 1:Ye(t,e),et(e),r&512&&n!==null&&pn(n,n.return);break;case 5:if(Ye(t,e),et(e),r&512&&n!==null&&pn(n,n.return),e.flags&32){var s=e.stateNode;try{tr(s,"")}catch(g){le(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&Ha(s,l),Cl(a,i);var c=Cl(a,l);for(i=0;i<u.length;i+=2){var m=u[i],p=u[i+1];m==="style"?Ya(s,p):m==="dangerouslySetInnerHTML"?Wa(s,p):m==="children"?tr(s,p):yo(s,m,p,c)}switch(a){case"input":El(s,l);break;case"textarea":Va(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?gn(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?gn(s,!!l.multiple,l.defaultValue,!0):gn(s,!!l.multiple,l.multiple?[]:"",!1))}s[cr]=l}catch(g){le(e,e.return,g)}}break;case 6:if(Ye(t,e),et(e),r&4){if(e.stateNode===null)throw Error(M(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(g){le(e,e.return,g)}}break;case 3:if(Ye(t,e),et(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lr(t.containerInfo)}catch(g){le(e,e.return,g)}break;case 4:Ye(t,e),et(e);break;case 13:Ye(t,e),et(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(qo=oe())),r&4&&aa(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(we=(c=we)||m,Ye(t,e),we=c):Ye(t,e),et(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(_=e,m=e.child;m!==null;){for(p=_=m;_!==null;){switch(h=_,x=h.child,h.tag){case 0:case 11:case 14:case 15:qn(4,h,h.return);break;case 1:pn(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){le(r,n,g)}}break;case 5:pn(h,h.return);break;case 22:if(h.memoizedState!==null){ca(p);continue}}x!==null?(x.return=h,_=x):ca(p)}m=m.sibling}e:for(m=null,p=e;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,c?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=p.stateNode,u=p.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=$a("display",i))}catch(g){le(e,e.return,g)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){le(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ye(t,e),et(e),r&4&&aa(e);break;case 21:break;default:Ye(t,e),et(e)}}function et(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yc(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(tr(s,""),r.flags&=-33);var l=ia(e);ro(e,l,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=ia(e);no(e,a,i);break;default:throw Error(M(161))}}catch(u){le(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function J0(e,t,n){_=e,Sc(e)}function Sc(e,t,n){for(var r=(e.mode&1)!==0;_!==null;){var s=_,l=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Dr;if(!i){var a=s.alternate,u=a!==null&&a.memoizedState!==null||we;a=Dr;var c=we;if(Dr=i,(we=u)&&!c)for(_=s;_!==null;)i=_,u=i.child,i.tag===22&&i.memoizedState!==null?da(s):u!==null?(u.return=i,_=u):da(s);for(;l!==null;)_=l,Sc(l),l=l.sibling;_=s,Dr=a,we=c}ua(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,_=l):ua(e)}}function ua(e){for(;_!==null;){var t=_;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:we||_s(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!we)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ke(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Yi(t,l,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yi(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&lr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}we||t.flags&512&&to(t)}catch(h){le(t,t.return,h)}}if(t===e){_=null;break}if(n=t.sibling,n!==null){n.return=t.return,_=n;break}_=t.return}}function ca(e){for(;_!==null;){var t=_;if(t===e){_=null;break}var n=t.sibling;if(n!==null){n.return=t.return,_=n;break}_=t.return}}function da(e){for(;_!==null;){var t=_;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_s(4,t)}catch(u){le(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){le(t,s,u)}}var l=t.return;try{to(t)}catch(u){le(t,l,u)}break;case 5:var i=t.return;try{to(t)}catch(u){le(t,i,u)}}}catch(u){le(t,t.return,u)}if(t===e){_=null;break}var a=t.sibling;if(a!==null){a.return=t.return,_=a;break}_=t.return}}var ef=Math.ceil,xs=mt.ReactCurrentDispatcher,Qo=mt.ReactCurrentOwner,Ge=mt.ReactCurrentBatchConfig,$=0,he=null,ie=null,me=0,_e=0,mn=Dt(0),ce=0,gr=null,Zt=0,Ps=0,Xo=0,Zn=null,Me=null,qo=0,Mn=1/0,lt=null,ws=!1,so=null,It=null,Ur=!1,Tt=null,Ss=0,Jn=0,lo=null,Xr=-1,qr=0;function be(){return $&6?oe():Xr!==-1?Xr:Xr=oe()}function At(e){return e.mode&1?$&2&&me!==0?me&-me:z0.transition!==null?(qr===0&&(qr=lu()),qr):(e=Q,e!==0||(e=window.event,e=e===void 0?16:fu(e.type)),e):1}function Ze(e,t,n,r){if(50<Jn)throw Jn=0,lo=null,Error(M(185));yr(e,n,r),(!($&2)||e!==he)&&(e===he&&(!($&2)&&(Ps|=n),ce===4&&St(e,me)),Oe(e,r),n===1&&$===0&&!(t.mode&1)&&(Mn=oe()+500,Is&&Ut()))}function Oe(e,t){var n=e.callbackNode;zd(e,t);var r=ss(e,e===he?me:0);if(r===0)n!==null&&wi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&wi(n),t===1)e.tag===0?L0(fa.bind(null,e)):Iu(fa.bind(null,e)),A0(function(){!($&6)&&Ut()}),n=null;else{switch(ou(r)){case 1:n=To;break;case 4:n=ru;break;case 16:n=rs;break;case 536870912:n=su;break;default:n=rs}n=Mc(n,Ec.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ec(e,t){if(Xr=-1,qr=0,$&6)throw Error(M(327));var n=e.callbackNode;if(Sn()&&e.callbackNode!==n)return null;var r=ss(e,e===he?me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Es(e,r);else{t=r;var s=$;$|=2;var l=bc();(he!==e||me!==t)&&(lt=null,Mn=oe()+500,Yt(e,t));do try{rf();break}catch(a){Tc(e,a)}while(1);Lo(),xs.current=l,$=s,ie!==null?t=0:(he=null,me=0,t=ce)}if(t!==0){if(t===2&&(s=Al(e),s!==0&&(r=s,t=oo(e,s))),t===1)throw n=gr,Yt(e,0),St(e,r),Oe(e,oe()),n;if(t===6)St(e,r);else{if(s=e.current.alternate,!(r&30)&&!tf(s)&&(t=Es(e,r),t===2&&(l=Al(e),l!==0&&(r=l,t=oo(e,l))),t===1))throw n=gr,Yt(e,0),St(e,r),Oe(e,oe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Ht(e,Me,lt);break;case 3:if(St(e,r),(r&130023424)===r&&(t=qo+500-oe(),10<t)){if(ss(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){be(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Bl(Ht.bind(null,e,Me,lt),t);break}Ht(e,Me,lt);break;case 4:if(St(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-qe(r);l=1<<i,i=t[i],i>s&&(s=i),r&=~l}if(r=s,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ef(r/1960))-r,10<r){e.timeoutHandle=Bl(Ht.bind(null,e,Me,lt),r);break}Ht(e,Me,lt);break;case 5:Ht(e,Me,lt);break;default:throw Error(M(329))}}}return Oe(e,oe()),e.callbackNode===n?Ec.bind(null,e):null}function oo(e,t){var n=Zn;return e.current.memoizedState.isDehydrated&&(Yt(e,t).flags|=256),e=Es(e,t),e!==2&&(t=Me,Me=n,t!==null&&io(t)),e}function io(e){Me===null?Me=e:Me.push.apply(Me,e)}function tf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Je(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function St(e,t){for(t&=~Xo,t&=~Ps,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qe(t),r=1<<n;e[n]=-1,t&=~r}}function fa(e){if($&6)throw Error(M(327));Sn();var t=ss(e,0);if(!(t&1))return Oe(e,oe()),null;var n=Es(e,t);if(e.tag!==0&&n===2){var r=Al(e);r!==0&&(t=r,n=oo(e,r))}if(n===1)throw n=gr,Yt(e,0),St(e,t),Oe(e,oe()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ht(e,Me,lt),Oe(e,oe()),null}function Zo(e,t){var n=$;$|=1;try{return e(t)}finally{$=n,$===0&&(Mn=oe()+500,Is&&Ut())}}function Jt(e){Tt!==null&&Tt.tag===0&&!($&6)&&Sn();var t=$;$|=1;var n=Ge.transition,r=Q;try{if(Ge.transition=null,Q=1,e)return e()}finally{Q=r,Ge.transition=n,$=t,!($&6)&&Ut()}}function Jo(){_e=mn.current,J(mn)}function Yt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,I0(n)),ie!==null)for(n=ie.return;n!==null;){var r=n;switch(Oo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&us();break;case 3:Cn(),J(Ie),J(Se),Ho();break;case 5:Fo(r);break;case 4:Cn();break;case 13:J(ne);break;case 19:J(ne);break;case 10:zo(r.type._context);break;case 22:case 23:Jo()}n=n.return}if(he=e,ie=e=Ot(e.current,null),me=_e=t,ce=0,gr=null,Xo=Ps=Zt=0,Me=Zn=null,Gt!==null){for(t=0;t<Gt.length;t++)if(n=Gt[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=s,r.next=i}n.pending=r}Gt=null}return e}function Tc(e,t){do{var n=ie;try{if(Lo(),Yr.current=ys,vs){for(var r=re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vs=!1}if(qt=0,fe=ue=re=null,Xn=!1,hr=0,Qo.current=null,n===null||n.return===null){ce=1,gr=t,ie=null;break}e:{var l=e,i=n.return,a=n,u=t;if(t=me,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,m=a,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=Ji(i);if(x!==null){x.flags&=-257,ea(x,i,a,l,t),x.mode&1&&Zi(l,c,t),t=x,u=c;var b=t.updateQueue;if(b===null){var g=new Set;g.add(u),t.updateQueue=g}else b.add(u);break e}else{if(!(t&1)){Zi(l,c,t),ei();break e}u=Error(M(426))}}else if(ee&&a.mode&1){var E=Ji(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ea(E,i,a,l,t),_o(kn(u,a));break e}}l=u=kn(u,a),ce!==4&&(ce=2),Zn===null?Zn=[l]:Zn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=oc(l,u,t);$i(l,f);break e;case 1:a=u;var d=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof d.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(It===null||!It.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=ic(l,a,t);$i(l,S);break e}}l=l.return}while(l!==null)}Nc(n)}catch(R){t=R,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(1)}function bc(){var e=xs.current;return xs.current=ys,e===null?ys:e}function ei(){(ce===0||ce===3||ce===2)&&(ce=4),he===null||!(Zt&268435455)&&!(Ps&268435455)||St(he,me)}function Es(e,t){var n=$;$|=2;var r=bc();(he!==e||me!==t)&&(lt=null,Yt(e,t));do try{nf();break}catch(s){Tc(e,s)}while(1);if(Lo(),$=n,xs.current=r,ie!==null)throw Error(M(261));return he=null,me=0,ce}function nf(){for(;ie!==null;)Rc(ie)}function rf(){for(;ie!==null&&!kd();)Rc(ie)}function Rc(e){var t=kc(e.alternate,e,_e);e.memoizedProps=e.pendingProps,t===null?Nc(e):ie=t,Qo.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=X0(n,t),n!==null){n.flags&=32767,ie=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,ie=null;return}}else if(n=Q0(n,t,_e),n!==null){ie=n;return}if(t=t.sibling,t!==null){ie=t;return}ie=t=e}while(t!==null);ce===0&&(ce=5)}function Ht(e,t,n){var r=Q,s=Ge.transition;try{Ge.transition=null,Q=1,sf(e,t,n,r)}finally{Ge.transition=s,Q=r}return null}function sf(e,t,n,r){do Sn();while(Tt!==null);if($&6)throw Error(M(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Dd(e,l),e===he&&(ie=he=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ur||(Ur=!0,Mc(rs,function(){return Sn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ge.transition,Ge.transition=null;var i=Q;Q=1;var a=$;$|=4,Qo.current=null,Z0(e,n),wc(n,e),b0(Dl),ls=!!zl,Dl=zl=null,e.current=n,J0(n),Md(),$=a,Q=i,Ge.transition=l}else e.current=n;if(Ur&&(Ur=!1,Tt=e,Ss=s),l=e.pendingLanes,l===0&&(It=null),Ad(n.stateNode),Oe(e,oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ws)throw ws=!1,e=so,so=null,e;return Ss&1&&e.tag!==0&&Sn(),l=e.pendingLanes,l&1?e===lo?Jn++:(Jn=0,lo=e):Jn=0,Ut(),null}function Sn(){if(Tt!==null){var e=ou(Ss),t=Ge.transition,n=Q;try{if(Ge.transition=null,Q=16>e?16:e,Tt===null)var r=!1;else{if(e=Tt,Tt=null,Ss=0,$&6)throw Error(M(331));var s=$;for($|=4,_=e.current;_!==null;){var l=_,i=l.child;if(_.flags&16){var a=l.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(_=c;_!==null;){var m=_;switch(m.tag){case 0:case 11:case 15:qn(8,m,l)}var p=m.child;if(p!==null)p.return=m,_=p;else for(;_!==null;){m=_;var h=m.sibling,x=m.return;if(vc(m),m===c){_=null;break}if(h!==null){h.return=x,_=h;break}_=x}}}var b=l.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var E=g.sibling;g.sibling=null,g=E}while(g!==null)}}_=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,_=i;else e:for(;_!==null;){if(l=_,l.flags&2048)switch(l.tag){case 0:case 11:case 15:qn(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,_=f;break e}_=l.return}}var d=e.current;for(_=d;_!==null;){i=_;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,_=v;else e:for(i=d;_!==null;){if(a=_,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_s(9,a)}}catch(R){le(a,a.return,R)}if(a===i){_=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,_=S;break e}_=a.return}}if($=s,Ut(),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Ns,e)}catch{}r=!0}return r}finally{Q=n,Ge.transition=t}}return!1}function ha(e,t,n){t=kn(n,t),t=oc(e,t,1),e=jt(e,t,1),t=be(),e!==null&&(yr(e,1,t),Oe(e,t))}function le(e,t,n){if(e.tag===3)ha(e,e,n);else for(;t!==null;){if(t.tag===3){ha(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(It===null||!It.has(r))){e=kn(n,e),e=ic(t,e,1),t=jt(t,e,1),e=be(),t!==null&&(yr(t,1,e),Oe(t,e));break}}t=t.return}}function lf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=be(),e.pingedLanes|=e.suspendedLanes&n,he===e&&(me&n)===n&&(ce===4||ce===3&&(me&130023424)===me&&500>oe()-qo?Yt(e,0):Xo|=n),Oe(e,t)}function Cc(e,t){t===0&&(e.mode&1?(t=Mr,Mr<<=1,!(Mr&130023424)&&(Mr=4194304)):t=1);var n=be();e=ht(e,t),e!==null&&(yr(e,t,n),Oe(e,n))}function of(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cc(e,n)}function af(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Cc(e,n)}var kc;kc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ie.current)je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return je=!1,K0(e,t,n);je=!!(e.flags&131072)}else je=!1,ee&&t.flags&1048576&&Au(t,fs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qr(e,t),e=t.pendingProps;var s=bn(t,Se.current);wn(t,n),s=Go(null,t,r,e,s,n);var l=Wo();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ae(r)?(l=!0,cs(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uo(t),s.updater=Os,t.stateNode=s,s._reactInternals=t,Yl(t,r,e,n),t=Xl(null,t,r,!0,l,n)):(t.tag=0,ee&&l&&Ao(t),Te(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qr(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=cf(r),e=Ke(r,e),s){case 0:t=Ql(null,t,r,e,n);break e;case 1:t=ra(null,t,r,e,n);break e;case 11:t=ta(null,t,r,e,n);break e;case 14:t=na(null,t,r,Ke(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ke(r,s),Ql(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ke(r,s),ra(e,t,r,s,n);case 3:e:{if(dc(t),e===null)throw Error(M(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Du(e,t),ms(t,r,null,n);var i=t.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=kn(Error(M(423)),t),t=sa(e,t,r,n,s);break e}else if(r!==s){s=kn(Error(M(424)),t),t=sa(e,t,r,n,s);break e}else for(Pe=Mt(t.stateNode.containerInfo.firstChild),Le=t,ee=!0,Xe=null,n=Lu(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rn(),r===s){t=pt(e,t,n);break e}Te(e,t,r,n)}t=t.child}return t;case 5:return Uu(t),e===null&&Gl(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,i=s.children,Ul(r,s)?i=null:l!==null&&Ul(r,l)&&(t.flags|=32),cc(e,t),Te(e,t,i,n),t.child;case 6:return e===null&&Gl(t),null;case 13:return fc(e,t,n);case 4:return Bo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Nn(t,null,r,n):Te(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ke(r,s),ta(e,t,r,s,n);case 7:return Te(e,t,t.pendingProps,n),t.child;case 8:return Te(e,t,t.pendingProps.children,n),t.child;case 12:return Te(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,i=s.value,X(hs,r._currentValue),r._currentValue=i,l!==null)if(Je(l.value,i)){if(l.children===s.children&&!Ie.current){t=pt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){i=l.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=ct(-1,n&-n),u.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Wl(l.return,n,t),a.lanes|=n;break}u=u.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(M(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Wl(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Te(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,wn(t,n),s=We(s),r=r(s),t.flags|=1,Te(e,t,r,n),t.child;case 14:return r=t.type,s=Ke(r,t.pendingProps),s=Ke(r.type,s),na(e,t,r,s,n);case 15:return ac(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ke(r,s),Qr(e,t),t.tag=1,Ae(r)?(e=!0,cs(t)):e=!1,wn(t,n),lc(t,r,s),Yl(t,r,s,n),Xl(null,t,r,!0,e,n);case 19:return hc(e,t,n);case 22:return uc(e,t,n)}throw Error(M(156,t.tag))};function Mc(e,t){return nu(e,t)}function uf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,t,n,r){return new uf(e,t,n,r)}function ti(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cf(e){if(typeof e=="function")return ti(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wo)return 11;if(e===So)return 14}return 2}function Ot(e,t){var n=e.alternate;return n===null?(n=Ve(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zr(e,t,n,r,s,l){var i=2;if(r=e,typeof e=="function")ti(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case sn:return Kt(n.children,s,l,t);case xo:i=8,s|=8;break;case vl:return e=Ve(12,n,t,s|2),e.elementType=vl,e.lanes=l,e;case yl:return e=Ve(13,n,t,s),e.elementType=yl,e.lanes=l,e;case xl:return e=Ve(19,n,t,s),e.elementType=xl,e.lanes=l,e;case Ua:return Ls(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case za:i=10;break e;case Da:i=9;break e;case wo:i=11;break e;case So:i=14;break e;case yt:i=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=Ve(i,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Kt(e,t,n,r){return e=Ve(7,e,r,t),e.lanes=n,e}function Ls(e,t,n,r){return e=Ve(22,e,r,t),e.elementType=Ua,e.lanes=n,e.stateNode={isHidden:!1},e}function hl(e,t,n){return e=Ve(6,e,null,t),e.lanes=n,e}function pl(e,t,n){return t=Ve(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function df(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ks(0),this.expirationTimes=Ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ni(e,t,n,r,s,l,i,a,u){return e=new df(e,t,n,a,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ve(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uo(l),e}function ff(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jc(e){if(!e)return Lt;e=e._reactInternals;e:{if(tn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ae(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(Ae(n))return ju(e,n,t)}return t}function Ic(e,t,n,r,s,l,i,a,u){return e=ni(n,r,!0,e,s,l,i,a,u),e.context=jc(null),n=e.current,r=be(),s=At(n),l=ct(r,s),l.callback=t??null,jt(n,l,s),e.current.lanes=s,yr(e,s,r),Oe(e,r),e}function zs(e,t,n,r){var s=t.current,l=be(),i=At(s);return n=jc(n),t.context===null?t.context=n:t.pendingContext=n,t=ct(l,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jt(s,t,i),e!==null&&(Ze(e,s,i,l),$r(e,s,i)),i}function Ts(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pa(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ri(e,t){pa(e,t),(e=e.alternate)&&pa(e,t)}function hf(){return null}var Ac=typeof reportError=="function"?reportError:function(e){console.error(e)};function si(e){this._internalRoot=e}Ds.prototype.render=si.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));zs(e,t,null,null)};Ds.prototype.unmount=si.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jt(function(){zs(null,e,null,null)}),t[ft]=null}};function Ds(e){this._internalRoot=e}Ds.prototype.unstable_scheduleHydration=function(e){if(e){var t=uu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wt.length&&t!==0&&t<wt[n].priority;n++);wt.splice(n,0,e),n===0&&du(e)}};function li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Us(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ma(){}function pf(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var c=Ts(i);l.call(c)}}var i=Ic(t,r,e,0,null,!1,!1,"",ma);return e._reactRootContainer=i,e[ft]=i.current,ar(e.nodeType===8?e.parentNode:e),Jt(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ts(u);a.call(c)}}var u=ni(e,0,!1,null,null,!1,!1,"",ma);return e._reactRootContainer=u,e[ft]=u.current,ar(e.nodeType===8?e.parentNode:e),Jt(function(){zs(t,u,n,r)}),u}function Bs(e,t,n,r,s){var l=n._reactRootContainer;if(l){var i=l;if(typeof s=="function"){var a=s;s=function(){var u=Ts(i);a.call(u)}}zs(t,i,e,s)}else i=pf(n,t,e,s,r);return Ts(i)}iu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vn(t.pendingLanes);n!==0&&(bo(t,n|1),Oe(t,oe()),!($&6)&&(Mn=oe()+500,Ut()))}break;case 13:Jt(function(){var r=ht(e,1);if(r!==null){var s=be();Ze(r,e,1,s)}}),ri(e,1)}};Ro=function(e){if(e.tag===13){var t=ht(e,134217728);if(t!==null){var n=be();Ze(t,e,134217728,n)}ri(e,134217728)}};au=function(e){if(e.tag===13){var t=At(e),n=ht(e,t);if(n!==null){var r=be();Ze(n,e,t,r)}ri(e,t)}};uu=function(){return Q};cu=function(e,t){var n=Q;try{return Q=e,t()}finally{Q=n}};Ml=function(e,t,n){switch(t){case"input":if(El(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=js(r);if(!s)throw Error(M(90));Fa(r),El(r,s)}}}break;case"textarea":Va(e,n);break;case"select":t=n.value,t!=null&&gn(e,!!n.multiple,t,!1)}};Xa=Zo;qa=Jt;var mf={usingClientEntryPoint:!1,Events:[wr,un,js,Ka,Qa,Zo]},Bn={findFiberByHostInstance:Vt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gf={bundleType:Bn.bundleType,version:Bn.version,rendererPackageName:Bn.rendererPackageName,rendererConfig:Bn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eu(e),e===null?null:e.stateNode},findFiberByHostInstance:Bn.findFiberByHostInstance||hf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Br=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Br.isDisabled&&Br.supportsFiber)try{Ns=Br.inject(gf),rt=Br}catch{}}De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mf;De.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!li(t))throw Error(M(200));return ff(e,t,null,n)};De.createRoot=function(e,t){if(!li(e))throw Error(M(299));var n=!1,r="",s=Ac;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ni(e,1,!1,null,null,n,!1,r,s),e[ft]=t.current,ar(e.nodeType===8?e.parentNode:e),new si(t)};De.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=eu(t),e=e===null?null:e.stateNode,e};De.flushSync=function(e){return Jt(e)};De.hydrate=function(e,t,n){if(!Us(t))throw Error(M(200));return Bs(null,e,t,!0,n)};De.hydrateRoot=function(e,t,n){if(!li(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",i=Ac;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Ic(t,null,e,1,n??null,s,!1,l,i),e[ft]=t.current,ar(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ds(t)};De.render=function(e,t,n){if(!Us(t))throw Error(M(200));return Bs(null,e,t,!1,n)};De.unmountComponentAtNode=function(e){if(!Us(e))throw Error(M(40));return e._reactRootContainer?(Jt(function(){Bs(null,null,e,!1,function(){e._reactRootContainer=null,e[ft]=null})}),!0):!1};De.unstable_batchedUpdates=Zo;De.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Us(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Bs(e,t,n,!1,r)};De.version="18.3.1-next-f1338f8080-20240426";function Oc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oc)}catch(e){console.error(e)}}Oc(),Oa.exports=De;var vf=Oa.exports,ga=vf;ml.createRoot=ga.createRoot,ml.hydrateRoot=ga.hydrateRoot;var Ee=(e=>(e.PLAYER="PLAYER",e.ENEMY="ENEMY",e.TOWER="TOWER",e.PROJECTILE="PROJECTILE",e.PARTICLE="PARTICLE",e.SHOCKWAVE="SHOCKWAVE",e.TEXT="TEXT",e.PUDDLE="PUDDLE",e))(Ee||{}),T=(e=>(e.GRUNT="GRUNT",e.RUNNER="RUNNER",e.TANK="TANK",e.HEALER="HEALER",e.BOSS="GIGA GRUNT",e.FRACTAL="FRACTAL",e.ORBITER="ORBITER",e.STALKER="STALKER",e.SWARMER="SWARMER",e.BROODMOTHER="BROODMOTHER",e.WORM="WORM",e.DISRUPTOR="DISRUPTOR",e.SLIME="TOXIC SLIME",e.WELDER="VOID WELDER",e.SCAVENGER="VOID HOARDER",e))(T||{}),ke=(e=>(e.NEAREST="NEAREST",e.FURTHEST="FURTHEST",e.STRONGEST="STRONGEST",e.FASTEST="FASTEST",e.BOSS="BOSS",e))(ke||{}),y=(e=>(e.TURRET_ARROW="TURRET_ARROW",e.TURRET_MAGIC_MISSILE="TURRET_MAGIC_MISSILE",e.TURRET_FIREBALL="TURRET_FIREBALL",e.TURRET_ICICLE="TURRET_ICICLE",e.TURRET_POISON="TURRET_POISON",e.TURRET_CANNON="TURRET_CANNON",e.TURRET_ICE="TURRET_ICE",e.TURRET_ARCANE="TURRET_ARCANE",e.TURRET_REPULSOR="TURRET_REPULSOR",e.TURRET_CHAOS_BOLT="TURRET_CHAOS_BOLT",e.TURRET_SNIPER="TURRET_SNIPER",e.TURRET_BALLISTA="TURRET_BALLISTA",e.TURRET_ORBITAL="TURRET_ORBITAL",e.TURRET_CLUSTER_BOMB="TURRET_CLUSTER_BOMB",e.TURRET_CHAOS_BEAM="TURRET_CHAOS_BEAM",e.TURRET_GLACIAL_SPIKE="TURRET_GLACIAL_SPIKE",e.TURRET_ACID_CANNON="TURRET_ACID_CANNON",e.TURRET_FLAMETHROWER="TURRET_FLAMETHROWER",e.TURRET_CHAOS_RIFT="TURRET_CHAOS_RIFT",e.TURRET_OMNI="TURRET_OMNI",e.TURRET_PERMAFROST="TURRET_PERMAFROST",e.TURRET_TOXIN="TURRET_TOXIN",e.STAT_DAMAGE="STAT_DAMAGE",e.STAT_SPEED="STAT_SPEED",e.STAT_RANGE="STAT_RANGE",e.STAT_REGEN="STAT_REGEN",e.STAT_REGEN_PCT="STAT_REGEN_PCT",e.HEAL_TOWER="HEAL_TOWER",e.ECON_GPS="ECON_GPS",e.ECON_BOUNTY="ECON_BOUNTY",e.ECON_REFINERY="ECON_REFINERY",e))(y||{}),P=(e=>(e.NUKE="NUKE",e.INVULNERABILITY="INVULNERABILITY",e.OVERCLOCK="OVERCLOCK",e.RANGE_BOOST="RANGE_BOOST",e.PASSIVE_PHYSICAL="PASSIVE_PHYSICAL",e.PASSIVE_MAGIC="PASSIVE_MAGIC",e.PASSIVE_FIRE="PASSIVE_FIRE",e.PASSIVE_ICE="PASSIVE_ICE",e.PASSIVE_POISON="PASSIVE_POISON",e.PASSIVE_CHAOS="PASSIVE_CHAOS",e))(P||{});const _c="Version 0.54 (EXPERIMENTAL)",bt=2560,Rt=1440,de=72,Pc=20*de,yf=6,xf=25,wf=25,ao=3*60*de,L={PHYSICAL:"#f8fafc",MAGIC:"#ec4899",FIRE:"#ef4444",ICE:"#3b82f6",POISON:"#22c55e",CHAOS:"#9333ea",ECONOMY:"#eab308",EARTH:"#92400e"},ut={PHYSICAL:L.PHYSICAL,MAGIC:L.MAGIC,FIRE:L.FIRE,ICE:L.ICE,POISON:L.POISON,CHAOS:L.CHAOS},bs=["#0f172a","#022c22","#310b0b","#082f49","#2e1065","#020617","#271c19"],Sf=5,uo=800,Ef=300,Tf=2.5,va=320,ya=250,bf=15,Rf=180,_t={[T.GRUNT]:{speed:.85,radius:14,color:"#a855f7",hpMod:1,valueMod:1,powerRating:1,minWave:1,shieldMod:0,resistances:{PHYSICAL:1,MAGIC:1,FIRE:1,ICE:1,POISON:1,CHAOS:1}},[T.RUNNER]:{speed:2.2,radius:10,color:L.FIRE,hpMod:.6,valueMod:1.5,powerRating:1.5,minWave:15,shieldMod:0,resistances:{PHYSICAL:1,MAGIC:1,FIRE:.25,ICE:2.5,POISON:1,CHAOS:1}},[T.TANK]:{speed:.45,radius:22,color:"#475569",hpMod:2.2,valueMod:4,powerRating:4,minWave:4,shieldMod:1,resistances:{PHYSICAL:.2,MAGIC:.5,FIRE:.5,ICE:.5,POISON:2,CHAOS:1}},[T.WELDER]:{speed:.5,radius:20,color:"#f97316",hpMod:2.5,valueMod:4.5,powerRating:4.5,minWave:25,shieldMod:1,resistances:{PHYSICAL:.3,MAGIC:1,FIRE:.3,ICE:1.5,POISON:1.5,CHAOS:1}},[T.HEALER]:{speed:.5,radius:16,color:L.POISON,hpMod:1.5,valueMod:3,powerRating:3,minWave:15,shieldMod:0,resistances:{PHYSICAL:1.7,MAGIC:.1,FIRE:1,ICE:1,POISON:.5,CHAOS:1}},[T.STALKER]:{speed:1.6,radius:12,color:"#94a3b8",hpMod:.8,valueMod:2,powerRating:2,minWave:5,shieldMod:0,resistances:{PHYSICAL:1,MAGIC:1,FIRE:2,ICE:1,POISON:.1,CHAOS:1}},[T.ORBITER]:{speed:2.2,radius:11,color:L.MAGIC,hpMod:.7,valueMod:2.5,powerRating:2.5,minWave:8,shieldMod:.5,resistances:{PHYSICAL:2,MAGIC:.25,FIRE:1,ICE:1,POISON:1,CHAOS:1}},[T.FRACTAL]:{speed:.3,radius:30,color:L.CHAOS,hpMod:3,valueMod:6,powerRating:6,minWave:10,shieldMod:0,resistances:{PHYSICAL:.25,MAGIC:2.5,FIRE:.5,ICE:.5,POISON:1,CHAOS:1}},[T.DISRUPTOR]:{speed:1.8,radius:18,color:"#22d3ee",hpMod:3.5,valueMod:5,powerRating:4,minWave:25,shieldMod:0,resistances:{PHYSICAL:1,MAGIC:1,FIRE:2,ICE:.05,POISON:1,CHAOS:1}},[T.BOSS]:{speed:.7,radius:45,color:L.FIRE,hpMod:7,valueMod:20,powerRating:20,minWave:5,shieldMod:1,resistances:{PHYSICAL:.5,MAGIC:.5,FIRE:.5,ICE:.5,POISON:.5,CHAOS:1}},[T.SLIME]:{speed:.4,radius:50,color:L.POISON,hpMod:8,valueMod:21,powerRating:21,minWave:15,shieldMod:0,resistances:{PHYSICAL:.2,MAGIC:.5,FIRE:1.5,ICE:1.5,POISON:.2,CHAOS:1}},[T.SWARMER]:{speed:1.6,radius:8,color:"#fde047",hpMod:.2,valueMod:.1,powerRating:.5,minWave:1,shieldMod:0,resistances:{PHYSICAL:1,MAGIC:1,FIRE:1,ICE:1.5,POISON:.2,CHAOS:1}},[T.BROODMOTHER]:{speed:.25,radius:65,color:"#881337",hpMod:15,valueMod:21,powerRating:21,minWave:20,shieldMod:2,resistances:{PHYSICAL:.5,MAGIC:.5,FIRE:.5,ICE:.5,POISON:1,CHAOS:1}},[T.WORM]:{speed:.8,radius:35,color:"#7c3aed",hpMod:10,valueMod:15,powerRating:15,minWave:30,shieldMod:0,resistances:{PHYSICAL:.5,MAGIC:.3,FIRE:1,ICE:1.2,POISON:.5,CHAOS:1.5}},[T.SCAVENGER]:{speed:.35,radius:40,color:"#d97706",hpMod:12,valueMod:50,powerRating:50,minWave:1,shieldMod:2,resistances:{PHYSICAL:.8,MAGIC:.5,FIRE:1.5,ICE:1,POISON:1,CHAOS:.5}}},Z={[y.TURRET_ARROW]:{type:y.TURRET_ARROW,name:"Arrow Module",baseCost:75,costScaling:1.25,description:"Fires standard kinetic projectiles. Reliable single-target damage.",color:L.PHYSICAL,tier:1,damage:12,damageType:"PHYSICAL",range:290,cooldown:45},[y.TURRET_POISON]:{type:y.TURRET_POISON,name:"Venom Sprayer",baseCost:75,costScaling:1.15,description:"Sprays corrosive venom. Applies a stacking poison effect that deals damage over time.",color:L.POISON,tier:1,damage:8,damageType:"POISON",range:220,cooldown:20,effect:"POISON"},[y.TURRET_FIREBALL]:{type:y.TURRET_FIREBALL,name:"Ember Coil",baseCost:75,costScaling:1.25,description:"Launches superheated projectiles. Higher base damage than arrows.",color:L.FIRE,tier:1,damage:16,damageType:"FIRE",range:240,cooldown:50},[y.TURRET_ICICLE]:{type:y.TURRET_ICICLE,name:"Frost Shard",baseCost:75,costScaling:1.25,description:"Launches a freezing shard. Deals damage and slows the target by 30% for 1 second.",color:L.ICE,tier:1,damage:8,damageType:"ICE",range:240,cooldown:40,effect:"FREEZE",effectDuration:72,slowMagnitude:.3},[y.TURRET_MAGIC_MISSILE]:{type:y.TURRET_MAGIC_MISSILE,name:"Magic Missile",baseCost:75,costScaling:1.3,description:"Fires seeking bolts of arcane energy. Moderate range and damage.",color:L.MAGIC,tier:1,damage:14,damageType:"MAGIC",range:280,cooldown:35},[y.HEAL_TOWER]:{type:y.HEAL_TOWER,name:"Nano Repair",baseCost:75,costScaling:1.25,description:"Emergency protocol. Instantly restores 100 HP to the Spire structure.",color:L.ICE,tier:1},[y.STAT_REGEN]:{type:y.STAT_REGEN,name:"Nanofiber Weave",baseCost:75,costScaling:1.5,description:"Passive hull repair. Regenerates +1 HP per second. Stacks up to 5 times.",color:L.ICE,tier:1,maxStacks:5},[y.ECON_GPS]:{type:y.ECON_GPS,name:"Void Miner",baseCost:75,costScaling:1.5,description:"Automated resource extraction. Generates +1 Gold per second. Stacks up to 5 times.",color:L.ECONOMY,tier:1,maxStacks:5},[y.TURRET_CANNON]:{type:y.TURRET_CANNON,name:"Blast Cannon",baseCost:150,costScaling:1.25,description:"Fires explosive shells that detonate on impact, dealing Fire damage to enemies in a small radius.",color:L.FIRE,tier:2,damage:150,damageType:"FIRE",range:200,cooldown:120,effect:"EXPLOSIVE"},[y.TURRET_ARCANE]:{type:y.TURRET_ARCANE,name:"Arcane Orb",baseCost:150,costScaling:1.3,description:"Manifests a dense sphere of raw magic. High damage single-target projectile.",color:L.MAGIC,tier:2,damage:125,damageType:"MAGIC",range:300,cooldown:75},[y.TURRET_REPULSOR]:{type:y.TURRET_REPULSOR,name:"Graviton Pulse",baseCost:150,costScaling:1.25,description:"Emits a localized gravity wave. Deals low damage but knocks enemies back significantly.",color:"#818cf8",tier:2,damage:5,damageType:"PHYSICAL",range:200,cooldown:80,knockback:15},[y.TURRET_ICE]:{type:y.TURRET_ICE,name:"Cryo Beam",baseCost:150,costScaling:1.4,description:"Projects a continuous beam of zero-point energy. Deals low damage but applies a heavy 50% slow.",color:L.ICE,tier:2,damage:.1,damageType:"ICE",range:300,cooldown:0,effect:"FREEZE",slowMagnitude:.5},[y.TURRET_CHAOS_BOLT]:{type:y.TURRET_CHAOS_BOLT,name:"Chaos Bolt",baseCost:150,costScaling:1.3,description:"Fires unstable entropy bolts. Deals Chaos damage that ignores all enemy resistances.",color:L.CHAOS,tier:2,damage:180,damageType:"CHAOS",range:300,cooldown:55},[y.STAT_DAMAGE]:{type:y.STAT_DAMAGE,name:"Power Core",baseCost:150,costScaling:1.25,description:"System amplifier. Increases global damage output by 5%.",color:L.ICE,tier:2,maxStacks:10},[y.STAT_SPEED]:{type:y.STAT_SPEED,name:"Overclocker",baseCost:150,costScaling:1.25,description:"Cyclic rate enhancer. Increases global attack speed by 10%.",color:L.ICE,tier:2,maxStacks:10},[y.ECON_BOUNTY]:{type:y.ECON_BOUNTY,name:"Scavenger Protocol",baseCost:500,costScaling:1.5,description:"Bounty algorithm. Increases gold reward per kill by 15%.",color:L.ECONOMY,tier:2,maxStacks:10},[y.TURRET_ORBITAL]:{type:y.TURRET_ORBITAL,name:"Void Ray",baseCost:500,costScaling:1.3,description:"Focuses a beam of void energy. Damage amplifies significantly the longer it stays connected to a target.",color:L.MAGIC,tier:3,damage:1.9,damageType:"MAGIC",range:375,cooldown:0},[y.TURRET_SNIPER]:{type:y.TURRET_SNIPER,name:"Railgun",baseCost:500,costScaling:1.3,description:"Accelerates a kinetic slug to hypersonic speeds. Extreme range and massive damage per shot.",color:L.PHYSICAL,tier:3,damage:500,damageType:"PHYSICAL",range:500,cooldown:120},[y.TURRET_BALLISTA]:{type:y.TURRET_BALLISTA,name:"Void Ballista",baseCost:500,costScaling:1.3,description:"Fires a massive void bolt. Upgrades increase Projectile Size, Damage, and Pierce count instead of adding more projectiles.",color:L.PHYSICAL,tier:3,damage:120,damageType:"PHYSICAL",range:375,cooldown:120,pierce:4},[y.TURRET_CLUSTER_BOMB]:{type:y.TURRET_CLUSTER_BOMB,name:"Cluster Bomb",baseCost:500,costScaling:1.3,description:"Deals massive area-of-effect Fire damage. Effective against tightly packed groups.",color:L.FIRE,tier:3,damage:400,damageType:"FIRE",range:300,cooldown:180,effect:"EXPLOSIVE"},[y.TURRET_CHAOS_BEAM]:{type:y.TURRET_CHAOS_BEAM,name:"Entropy Ray",baseCost:500,costScaling:1.5,description:"Projects a piercing beam of pure chaos. Ignores resistances and hits multiple targets in a line.",color:L.CHAOS,tier:3,damage:200,damageType:"CHAOS",range:350,cooldown:70,pierce:3},[y.TURRET_GLACIAL_SPIKE]:{type:y.TURRET_GLACIAL_SPIKE,name:"Glacial Spike",baseCost:500,costScaling:1.35,description:"Conjures a massive lance of ice. Deals high damage and pierces through up to 3 enemies.",color:L.ICE,tier:3,damage:125,damageType:"ICE",range:300,cooldown:90,renderLayer:1,pierce:3},[y.TURRET_ACID_CANNON]:{type:y.TURRET_ACID_CANNON,name:"Acid Cannon",baseCost:500,costScaling:1.25,description:"Launches heavy corrosive slugs. Deals high impact damage and applies a potent toxin.",color:L.POISON,tier:3,damage:100,damageType:"POISON",range:350,cooldown:75,effect:"POISON"},[y.STAT_RANGE]:{type:y.STAT_RANGE,name:"Targeting Lens",baseCost:500,costScaling:1.25,description:"Optical array enhancement. Increases attack range by 10%. Max 5 stacks.",color:L.ICE,tier:3,maxStacks:5},[y.STAT_REGEN_PCT]:{type:y.STAT_REGEN_PCT,name:"Bio-Lattice",baseCost:500,costScaling:1.25,description:"Advanced regeneration. Restores +0.5% of Max HP per second. Stacks up to 5 times.",color:L.ICE,tier:3,maxStacks:5},[y.ECON_REFINERY]:{type:y.ECON_REFINERY,name:"Void Refinery",baseCost:750,costScaling:1.3,description:"Advanced synthesis. Increases gold yield from enemies by 7.5%. Stacks up to 5 times.",color:L.ECONOMY,tier:3,maxStacks:5},[y.TURRET_TOXIN]:{type:y.TURRET_TOXIN,name:"Bio-Hazard Mortar",baseCost:1500,costScaling:1.5,description:"LEGENDARY. Lobs a chemical canister that shatters on impact, creating a lingering pool of toxin.",color:L.POISON,tier:4,damage:1e3,damageType:"POISON",range:400,cooldown:100,effect:"POISON_MORTAR",effectDuration:216},[y.TURRET_FLAMETHROWER]:{type:y.TURRET_FLAMETHROWER,name:"Hellfire Stream",baseCost:1500,costScaling:1.5,description:"LEGENDARY. Emits a continuous cone of flame. Devastating damage at short range, pierces all enemies.",color:L.FIRE,tier:4,damage:18,damageType:"FIRE",range:300,cooldown:3,pierce:999},[y.TURRET_CHAOS_RIFT]:{type:y.TURRET_CHAOS_RIFT,name:"Void Rift",baseCost:1500,costScaling:1.5,description:"LEGENDARY. Tears open reality at the strongest enemy's location, causing a massive Chaos explosion.",color:L.CHAOS,tier:4,damage:2800,damageType:"CHAOS",range:400,cooldown:300,effect:"EXPLOSIVE"},[y.TURRET_OMNI]:{type:y.TURRET_OMNI,name:"Omni-Spikes",baseCost:1500,costScaling:1.5,description:"LEGENDARY. Erupts spikes in 8 directions simultaneously. Upgrades increase damage per spike.",color:L.PHYSICAL,tier:4,damage:20,damageType:"PHYSICAL",range:160,cooldown:18},[y.TURRET_PERMAFROST]:{type:y.TURRET_PERMAFROST,name:"Permafrost Mortar",baseCost:1500,costScaling:1.5,description:"LEGENDARY. Bombards distant enemies with cryo-shells, creating freezing zones that heavily slow intruders.",color:L.ICE,tier:4,damage:600,damageType:"ICE",range:400,cooldown:360,effect:"FROST_MORTAR",effectDuration:288,slowMagnitude:.75}},En={[P.NUKE]:{type:P.NUKE,category:"ACTIVE",name:"Protocol: OBLITERATE",cost:2500,description:"Detonates a localized void bomb. Wipes all non-boss enemies. Heavily damages bosses. SINGLE USE PER RUN.",cooldown:0,duration:0,maxCharges:1,hotkey:"1",color:L.FIRE},[P.INVULNERABILITY]:{type:P.INVULNERABILITY,category:"ACTIVE",name:"Protocol: AEGIS",cost:1500,description:"Deploys an impenetrable shield around the tower for 5 seconds.",cooldown:60,duration:5,maxCharges:1/0,hotkey:"2",color:L.ICE},[P.OVERCLOCK]:{type:P.OVERCLOCK,category:"ACTIVE",name:"Protocol: OVERCLOCK",cost:1200,description:"Doubles tower attack speed and damage for 10 seconds.",cooldown:45,duration:10,maxCharges:1/0,hotkey:"3",color:L.ECONOMY},[P.RANGE_BOOST]:{type:P.RANGE_BOOST,category:"ACTIVE",name:"Protocol: LONGSHOT",cost:2e3,description:"Doubles tower range for 15 seconds.",cooldown:50,duration:15,maxCharges:1/0,hotkey:"4",color:L.POISON},[P.PASSIVE_PHYSICAL]:{type:P.PASSIVE_PHYSICAL,category:"PASSIVE",name:"Kinetic Resonance",cost:500,costScaling:1.25,statBonus:.1,description:"+10% Physical Damage per level.",cooldown:0,duration:0,maxCharges:1/0,hotkey:"",color:L.PHYSICAL},[P.PASSIVE_MAGIC]:{type:P.PASSIVE_MAGIC,category:"PASSIVE",name:"Arcane Resonance",cost:500,costScaling:1.25,statBonus:.1,description:"+10% Magic Damage per level.",cooldown:0,duration:0,maxCharges:1/0,hotkey:"",color:L.MAGIC},[P.PASSIVE_FIRE]:{type:P.PASSIVE_FIRE,category:"PASSIVE",name:"Thermal Resonance",cost:500,costScaling:1.25,statBonus:.1,description:"+10% Fire Damage per level.",cooldown:0,duration:0,maxCharges:1/0,hotkey:"",color:L.FIRE},[P.PASSIVE_ICE]:{type:P.PASSIVE_ICE,category:"PASSIVE",name:"Cryo Resonance",cost:500,costScaling:1.25,statBonus:.1,description:"+10% Ice Damage per level.",cooldown:0,duration:0,maxCharges:1/0,hotkey:"",color:L.ICE},[P.PASSIVE_POISON]:{type:P.PASSIVE_POISON,category:"PASSIVE",name:"Toxin Resonance",cost:500,costScaling:1.25,statBonus:.1,description:"+10% Poison Damage per level.",cooldown:0,duration:0,maxCharges:1/0,hotkey:"",color:L.POISON},[P.PASSIVE_CHAOS]:{type:P.PASSIVE_CHAOS,category:"PASSIVE",name:"Entropy Resonance",cost:500,costScaling:1.3,statBonus:.1,description:"+10% Chaos Damage per level.",cooldown:0,duration:0,maxCharges:1/0,hotkey:"",color:L.CHAOS}},xa=[{id:"MOD_DMG_1",title:"Ballistics Logic",description:"Optimizes targeting subroutines. Increases global damage by 15%.",rarity:"COMMON",icon:"DAMAGE",color:"red",effectType:"STAT_MULTI",effectTarget:"damage",effectValue:.15},{id:"MOD_HP_1",title:"Reinforced Hull",description:"Adds layers of composite armor. Increases Max HP by 500.",rarity:"COMMON",icon:"HEAL",color:"green",effectType:"MAX_HP",effectValue:500},{id:"MOD_SPD_1",title:"Servo Grease",description:"Lubricates joint actuators. Increases Attack Speed by 10%.",rarity:"COMMON",icon:"SPEED",color:"cyan",effectType:"STAT_MULTI",effectTarget:"speed",effectValue:.1},{id:"MOD_GOLD_1",title:"Scrap Scanners",description:"Improves resource collection algorithms. +5% Gold from enemies.",rarity:"COMMON",icon:"GOLD",color:"gold",effectType:"STAT_MULTI",effectTarget:"goldValue",effectValue:.05},{id:"MOD_DMG_2",title:"Combat AI",description:"Advanced heuristic targeting. Increases global damage by 25%.",rarity:"RARE",icon:"DAMAGE",color:"purple",effectType:"STAT_MULTI",effectTarget:"damage",effectValue:.25},{id:"MOD_HP_2",title:"Titanium Plating",description:"Heavy duty plating. Increases Max HP by 1000.",rarity:"RARE",icon:"HEAL",color:"purple",effectType:"MAX_HP",effectValue:1e3},{id:"MOD_SPD_2",title:"Hyper-Threading",description:"Parallel processing for weapon systems. Increases Attack Speed by 20%.",rarity:"RARE",icon:"SPEED",color:"purple",effectType:"STAT_MULTI",effectTarget:"speed",effectValue:.2},{id:"MOD_GOLD_2",title:"Deep Mining",description:"Sub-surface extraction protocols. +10% Gold from enemies.",rarity:"RARE",icon:"GOLD",color:"purple",effectType:"STAT_MULTI",effectTarget:"goldValue",effectValue:.1},{id:"MOD_GOLD_FLAT",title:"War Treasury",description:"Emergency funding grant. Adds +1000 Gold instantly.",rarity:"RARE",icon:"GOLD",color:"gold",effectType:"FLAT_RESOURCE",effectTarget:"gold",effectValue:1e3},{id:"MOD_LEG_DMG",title:"Omega Core",description:"LEGENDARY. Experimental power source. Increases damage by 50%.",rarity:"LEGENDARY",icon:"DAMAGE",color:"purple",effectType:"STAT_MULTI",effectTarget:"damage",effectValue:.5},{id:"MOD_LEG_SPD",title:"Temporal Drive",description:"LEGENDARY. Chrono-synced servos. Increases Attack Speed by 40%.",rarity:"LEGENDARY",icon:"SPEED",color:"cyan",effectType:"STAT_MULTI",effectTarget:"speed",effectValue:.4},{id:"MOD_LEG_HP",title:"Diamond Hull",description:"LEGENDARY. Near-indestructible lattice. Increases Max HP by 1500.",rarity:"LEGENDARY",icon:"HEAL",color:"green",effectType:"MAX_HP",effectValue:1500},{id:"MOD_LEG_GOLD",title:"Midas Algorithm",description:"LEGENDARY. Reality hacking. Increases Gold from enemies by 25%.",rarity:"LEGENDARY",icon:"GOLD",color:"gold",effectType:"STAT_MULTI",effectTarget:"goldValue",effectValue:.25}],Lc="/api/scores",zc="tower_survivors_leaderboard_v1.json",Nf=async()=>{try{const e=await fetch(Lc,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Server returned ${e.status}`);const t=await e.json();return Array.isArray(t)?{scores:t,connected:!0}:{scores:[],connected:!0}}catch(e){return console.warn("Global leaderboard unreachable. Using local data.",e),{scores:Fs(),connected:!1}}},Cf=async e=>{try{const t=await fetch(Lc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Server returned ${t.status}`);const n=await t.json();return Array.isArray(n)?n:Fs()}catch(t){return console.error("Failed to submit score to server. Saving locally.",t),kf(e)}},Fs=()=>{try{const e=localStorage.getItem(zc);return e?JSON.parse(e):[]}catch(e){return console.error("Local storage access failed",e),[]}},kf=e=>{const n=[...Fs(),e];n.sort((s,l)=>l.score-s.score);const r=n.slice(0,10);return localStorage.setItem(zc,JSON.stringify(r)),r};class Mf{constructor(){this.ctx=null,this.masterGain=null,this.isMuted=!1,this.lastShootTime=0,this.listeners=[],this.noiseBuffer=null}init(){if(this.ctx)return;const t=window.AudioContext||window.webkitAudioContext;this.ctx=new t,this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=this.isMuted?0:.15,this.masterGain.connect(this.ctx.destination),this.noiseBuffer=this.ctx.createBuffer(1,this.ctx.sampleRate,this.ctx.sampleRate);const n=this.noiseBuffer.getChannelData(0);for(let r=0;r<this.noiseBuffer.length;r++)n[r]=Math.random()*2-1}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notify(){this.listeners.forEach(t=>t())}isAudioMuted(){return this.isMuted}toggleMute(){this.isMuted=!this.isMuted,this.masterGain&&(this.masterGain.gain.value=this.isMuted?0:.15),this.notify()}playWeaponFire(t,n=1){if(!this.ctx||!this.masterGain||this.isMuted)return;const r=this.ctx.currentTime;if(!(r-this.lastShootTime<.05))switch(this.lastShootTime=r,t){case"PHYSICAL":this.soundPhysical(r,n);break;case"FIRE":this.soundFire(r,n);break;case"ICE":this.soundIce(r,n);break;case"POISON":this.soundPoison(r,n);break;case"CHAOS":this.soundChaos(r,n);break;case"MAGIC":default:this.soundMagic(r,n);break}}soundPhysical(t,n){if(!this.ctx||!this.masterGain)return;const r=this.ctx.createOscillator(),s=this.ctx.createGain();r.type="triangle",r.frequency.setValueAtTime(600*n,t),r.frequency.exponentialRampToValueAtTime(200*n,t+.1),s.gain.setValueAtTime(.3,t),s.gain.exponentialRampToValueAtTime(.01,t+.1),r.connect(s),s.connect(this.masterGain),r.start(t),r.stop(t+.1)}soundFire(t,n){if(!this.ctx||!this.masterGain||!this.noiseBuffer)return;const r=this.ctx.createBufferSource();r.buffer=this.noiseBuffer,r.playbackRate.value=.8*n;const s=this.ctx.createBiquadFilter();s.type="lowpass",s.frequency.setValueAtTime(800,t),s.frequency.linearRampToValueAtTime(100,t+.15);const l=this.ctx.createGain();l.gain.setValueAtTime(.4,t),l.gain.exponentialRampToValueAtTime(.01,t+.15),r.connect(s),s.connect(l),l.connect(this.masterGain),r.start(t),r.stop(t+.2)}soundIce(t,n){if(!this.ctx||!this.masterGain)return;const r=this.ctx.createOscillator(),s=this.ctx.createGain();r.type="sine",r.frequency.setValueAtTime(600*n,t),r.frequency.exponentialRampToValueAtTime(1100*n,t+.1),s.gain.setValueAtTime(.08,t),s.gain.exponentialRampToValueAtTime(.01,t+.15),r.connect(s),s.connect(this.masterGain),r.start(t),r.stop(t+.15)}soundMagic(t,n){if(!this.ctx||!this.masterGain)return;const r=this.ctx.createOscillator(),s=this.ctx.createGain();r.type="triangle",r.frequency.setValueAtTime(800*n,t),r.frequency.exponentialRampToValueAtTime(100*n,t+.15),s.gain.setValueAtTime(.25,t),s.gain.exponentialRampToValueAtTime(.01,t+.15),r.connect(s),s.connect(this.masterGain),r.start(t),r.stop(t+.15)}soundPoison(t,n){if(!this.ctx||!this.masterGain)return;const r=this.ctx.createOscillator(),s=this.ctx.createGain();r.type="sawtooth",r.frequency.setValueAtTime(300*n,t),r.frequency.linearRampToValueAtTime(100*n,t+.1);const l=this.ctx.createBiquadFilter();l.type="lowpass",l.frequency.setValueAtTime(600,t),s.gain.setValueAtTime(.2,t),s.gain.exponentialRampToValueAtTime(.01,t+.12),r.connect(l),l.connect(s),s.connect(this.masterGain),r.start(t),r.stop(t+.15)}soundChaos(t,n){if(!this.ctx||!this.masterGain)return;const r=this.ctx.createOscillator(),s=this.ctx.createGain();r.type="square",r.frequency.setValueAtTime(150*n,t),r.frequency.linearRampToValueAtTime(50*n,t+.1),s.gain.setValueAtTime(.2,t),s.gain.exponentialRampToValueAtTime(.01,t+.15),r.connect(s),s.connect(this.masterGain),r.start(t),r.stop(t+.15)}playEnemyDeath(t=1){if(!this.ctx||!this.masterGain||this.isMuted)return;const n=this.ctx.currentTime;let r=this.noiseBuffer;if(!r){const a=this.ctx.sampleRate*.3;r=this.ctx.createBuffer(1,a,this.ctx.sampleRate);const u=r.getChannelData(0);for(let c=0;c<a;c++)u[c]=Math.random()*2-1}const s=this.ctx.createBufferSource();s.buffer=r;const l=this.ctx.createBiquadFilter();l.type="lowpass",l.frequency.setValueAtTime(1e3,n),l.frequency.exponentialRampToValueAtTime(100,n+.2);const i=this.ctx.createGain();i.gain.setValueAtTime(.5*t,n),i.gain.exponentialRampToValueAtTime(.01,n+.2),s.connect(l),l.connect(i),i.connect(this.masterGain),s.start(n)}playTowerDamage(){if(!this.ctx||!this.masterGain||this.isMuted)return;const t=this.ctx.currentTime,n=this.ctx.createOscillator(),r=this.ctx.createGain();n.type="sawtooth",n.frequency.setValueAtTime(100,t),n.frequency.exponentialRampToValueAtTime(50,t+.3),r.gain.setValueAtTime(.8,t),r.gain.exponentialRampToValueAtTime(.01,t+.3),n.connect(r),r.connect(this.masterGain),n.start(t),n.stop(t+.3)}playUpgrade(){if(!this.ctx||!this.masterGain||this.isMuted)return;const t=this.ctx.currentTime,n=this.ctx.createOscillator(),r=this.ctx.createOscillator(),s=this.ctx.createGain();n.type="square",n.frequency.setValueAtTime(440,t),n.frequency.setValueAtTime(880,t+.1),r.type="square",r.frequency.setValueAtTime(554,t),r.frequency.setValueAtTime(1108,t+.1),s.gain.setValueAtTime(.075,t),s.gain.linearRampToValueAtTime(0,t+.4),n.connect(s),r.connect(s),s.connect(this.masterGain),n.start(t),n.stop(t+.4),r.start(t),r.stop(t+.4)}playWaveStart(){if(!this.ctx||!this.masterGain||this.isMuted)return;const t=this.ctx.currentTime,n=this.ctx.createOscillator(),r=this.ctx.createGain();n.type="sine",n.frequency.setValueAtTime(50,t),n.frequency.linearRampToValueAtTime(100,t+2),r.gain.setValueAtTime(0,t),r.gain.linearRampToValueAtTime(.5,t+1),r.gain.linearRampToValueAtTime(0,t+3),n.connect(r),r.connect(this.masterGain),n.start(t),n.stop(t+3)}playAbilityNuke(){if(!this.ctx||!this.masterGain||this.isMuted)return;const t=this.ctx.currentTime;let n=this.noiseBuffer;if(!n){const i=this.ctx.sampleRate*2;n=this.ctx.createBuffer(1,i,this.ctx.sampleRate);const a=n.getChannelData(0);for(let u=0;u<i;u++)a[u]=Math.random()*2-1}const r=this.ctx.createBufferSource();r.buffer=n;const s=this.ctx.createBiquadFilter();s.type="lowpass",s.frequency.setValueAtTime(500,t),s.frequency.linearRampToValueAtTime(50,t+1.5);const l=this.ctx.createGain();l.gain.setValueAtTime(1,t),l.gain.exponentialRampToValueAtTime(.01,t+2),r.connect(s),s.connect(l),l.connect(this.masterGain),r.start(t)}playAbilityShield(){if(!this.ctx||!this.masterGain||this.isMuted)return;const t=this.ctx.currentTime,n=this.ctx.createOscillator(),r=this.ctx.createGain();n.type="sine",n.frequency.setValueAtTime(200,t),n.frequency.linearRampToValueAtTime(600,t+.5),r.gain.setValueAtTime(0,t),r.gain.linearRampToValueAtTime(.5,t+.1),r.gain.linearRampToValueAtTime(0,t+.5),n.connect(r),r.connect(this.masterGain),n.start(t),n.stop(t+.5)}playAbilityOverclock(){if(!this.ctx||!this.masterGain||this.isMuted)return;const t=this.ctx.currentTime,n=this.ctx.createOscillator(),r=this.ctx.createGain();n.type="sawtooth",n.frequency.setValueAtTime(110,t),n.frequency.linearRampToValueAtTime(220,t+.3),r.gain.setValueAtTime(.3,t),r.gain.linearRampToValueAtTime(0,t+.3),n.connect(r),r.connect(this.masterGain),n.start(t),n.stop(t+.3)}}const Y=new Mf;class jf{constructor(t){this.spawnFloatingText=t}buyUpgrade(t,n){if(t.gold>=n.cost){if(t.gold-=n.cost,t.goldSpent[n.type]=(t.goldSpent[n.type]||0)+n.cost,Y.playUpgrade(),n.type===y.HEAL_TOWER)t.tower.hp=Math.min(t.tower.hp+100,t.tower.maxHp),this.spawnFloatingText(t.tower.x,t.tower.y-50,"+","#4ade80");else if(n.type===y.STAT_DAMAGE)t.tower.statMultipliers.damage+=.05,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1;else if(n.type===y.STAT_SPEED)t.tower.statMultipliers.speed+=.1,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1;else if(n.type===y.STAT_RANGE)t.tower.statMultipliers.range+=.1,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1;else if(n.type===y.ECON_GPS)t.tower.goldPerSecond+=1,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1,this.spawnFloatingText(t.tower.x,t.tower.y,"+","#fcd34d");else if(n.type===y.ECON_BOUNTY)t.tower.statMultipliers.goldValue+=.15,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1,this.spawnFloatingText(t.tower.x,t.tower.y,"+","#a16207");else if(n.type===y.ECON_REFINERY)t.tower.statMultipliers.goldValue+=.075,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1,this.spawnFloatingText(t.tower.x,t.tower.y,"+","#fcd34d");else if(n.type===y.STAT_REGEN)t.tower.hpRegen+=1,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1,this.spawnFloatingText(t.tower.x,t.tower.y-20,"+","#10b981");else if(n.type===y.STAT_REGEN_PCT)t.tower.hpRegenPct+=.005,t.tower.modules[n.type]=(t.tower.modules[n.type]||0)+1,this.spawnFloatingText(t.tower.x,t.tower.y-30,"+","#3b82f6");else{const r=t.tower.modules[n.type]||0;t.tower.modules[n.type]=r+1;const s=Z[n.type];if(s&&s.damageType){const l=s.damageType,i=(t.tower.elementalModuleCounts[l]||0)+1;t.tower.elementalModuleCounts[l]=i,i%5===0&&(t.tower.masteryLevels[l]=(t.tower.masteryLevels[l]||0)+1,t.tower.damageTypeMultipliers[l]+=.2,this.spawnFloatingText(t.tower.x,t.tower.y-80,`${l} MASTERY`,ut[l]),Y.playAbilityOverclock())}t.tower.moduleTargeting[n.type]||(t.tower.moduleTargeting[n.type]=ke.NEAREST)}[y.ECON_GPS,y.ECON_BOUNTY,y.ECON_REFINERY,y.STAT_REGEN,y.STAT_REGEN_PCT,y.STAT_DAMAGE,y.STAT_SPEED,y.STAT_RANGE].includes(n.type)||this.spawnFloatingText(t.tower.x,t.tower.y,"","#fbbf24"),t.shopItems=t.shopItems.filter(r=>r.id!==n.id)}}triggerReroll(t){t.gold>=t.rerollCost&&(t.gold-=t.rerollCost,t.rerollCost+=wf,this.rotateShop(t),Y.playWeaponFire("PHYSICAL",2))}rotateShop(t){const n=[],r=Object.values(Z).filter(p=>p.tier===1),s=Object.values(Z).filter(p=>p.tier===2),l=Object.values(Z).filter(p=>p.tier===3),i=Object.values(Z).filter(p=>p.tier===4),u=this.getUpgradeCount(t,y.STAT_REGEN)>=5,m=this.getUpgradeCount(t,y.ECON_GPS)>=5;for(let p=0;p<yf;p++){let h=null;if(i.length>0&&Math.random()<.05){let g=i.filter(E=>t.unlockedLegendaries.includes(E.type));g=g.filter(E=>E.maxStacks?this.getUpgradeCount(t,E.type)<E.maxStacks:!0),g.length>0&&(h=g[Math.floor(Math.random()*g.length)])}if(!h){const g=Math.random();let E=1;t.wave>25?g<.4?E=3:E=2:t.wave>=8?g<.2?E=3:g<.6?E=2:E=1:t.wave>=4&&g<.4?E=2:E=1;let f=[];if(E===3?f=l:E===2?f=s:f=r,f=f.filter(d=>!(d.maxStacks&&this.getUpgradeCount(t,d.type)>=d.maxStacks||d.type===y.STAT_REGEN_PCT&&!u||d.type===y.ECON_REFINERY&&!m)),f.length===0){let d=[...r,...s,...l];t.wave>25&&(d=[...s,...l]),f=d.filter(v=>!(v.maxStacks&&this.getUpgradeCount(t,v.type)>=v.maxStacks||v.type===y.STAT_REGEN_PCT&&!u||v.type===y.ECON_REFINERY&&!m))}f.length>0&&(h=f[Math.floor(Math.random()*f.length)])}if(!h)continue;const x=this.getUpgradeCount(t,h.type),b=Math.floor(h.baseCost*Math.pow(h.costScaling,x));n.push({id:`shop-${Date.now()}-${p}`,type:h.type,name:h.name,description:h.description,cost:b,color:h.color,damageType:h.damageType,tier:h.tier})}t.shopItems=n,t.shopTimer=Pc}generateChoices(t){const n=[],s=Math.min(.2,.05+t*.005),l=.3,i=[...xa];for(let a=0;a<3;a++){const u=Math.random();let c="COMMON";u<s?c="LEGENDARY":u<s+l&&(c="RARE");let m=i.filter(p=>p.rarity===c);if(m.length===0&&(m=i),m.length>0){const p=m[Math.floor(Math.random()*m.length)];n.push(p);const h=i.findIndex(x=>x.id===p.id);h!==-1&&i.splice(h,1)}}return n.map(a=>({id:a.id,title:a.title,description:a.description,icon:a.icon,color:a.color}))}handleChoiceSelection(t,n){const r=xa.find(s=>s.id===n);if(r)switch(this.spawnFloatingText(t.tower.x,t.tower.y-60,"","#fbbf24"),r.icon==="DAMAGE"&&Y.playAbilityOverclock(),r.icon==="HEAL"&&Y.playAbilityShield(),r.icon==="GOLD"&&Y.playUpgrade(),r.icon==="SPEED"&&Y.playAbilityOverclock(),r.effectType){case"STAT_MULTI":r.effectTarget&&t.tower.statMultipliers[r.effectTarget]!==void 0&&(t.tower.statMultipliers[r.effectTarget]+=r.effectValue);break;case"MAX_HP":t.tower.maxHp+=r.effectValue,t.tower.hp+=r.effectValue;break;case"FLAT_RESOURCE":r.effectTarget==="gold"&&(t.gold+=r.effectValue);break;case"HEAL_PCT":const s=t.tower.maxHp*r.effectValue;t.tower.hp=Math.min(t.tower.maxHp,t.tower.hp+s);break}}getUpgradeCount(t,n){return t.tower.modules[n]||0}}class If{constructor(t,n,r,s,l){this.spawnFloatingText=t,this.onWaveStartCb=n,this.onShowChoiceCb=r,this.generateChoicesCb=s,this.handleChoiceSelectionCb=l,this.waveTimer=0,this.spawnTimer=0,this.spawnQueue=[],this.currentWaveTotal=0,this.isWaitingForChoice=!1}reset(){this.waveTimer=0,this.spawnTimer=0,this.spawnQueue=[],this.currentWaveTotal=0,this.isWaitingForChoice=!1}update(t){const n=t.enemies.some(r=>r.isBoss);if(this.spawnQueue.length>0)if(this.spawnTimer<=0){const r=this.spawnQueue.shift();r&&this.spawnEnemy(t,r),this.spawnTimer=Math.max(10,de-t.wave*2)}else this.spawnTimer--;else if(n)if(this.spawnTimer<=0){const r=[T.GRUNT,T.RUNNER];t.wave>10&&r.push(T.STALKER);const s=1+Math.floor(Math.random()*2);for(let l=0;l<s;l++){const i=r[Math.floor(Math.random()*r.length)];this.spawnQueue.push(i)}this.spawnTimer=de*2}else this.spawnTimer--;else if(t.enemies.length===0)if(this.waveTimer<=0){if(!this.isWaitingForChoice&&t.wave>0&&t.wave%5===0){this.isWaitingForChoice=!0;const r=this.generateChoicesCb(t.wave);this.onShowChoiceCb(r,s=>{this.handleChoiceSelectionCb(s),this.isWaitingForChoice=!1,this.startNextWave(t)});return}this.startNextWave(t)}else this.waveTimer--;!n&&t.enemies.length>0&&this.spawnQueue.length===0&&t.wave%Sf!==0&&t.enemies.length<=this.currentWaveTotal*.34&&this.startNextWave(t)}startNextWave(t){t.wave++,this.onWaveStartCb(t.wave),Y.playWaveStart(),this.spawnFloatingText(bt/2,Rt/2-200,` ${t.wave}`,"#fff"),this.spawnQueue=[];const n=t.wave;if(n===5)this.spawnQueue.push(this.getRandomBoss([T.BOSS]));else if(n===10)this.spawnQueue.push(this.getRandomBoss([T.BOSS]),this.getRandomBoss([T.BOSS]));else if(n===15)this.spawnQueue.push(this.getRandomBoss([T.SLIME]));else if(n===20)this.spawnQueue.push(this.getRandomBoss([T.SLIME])),this.spawnQueue.push(this.getRandomBoss([T.BOSS,T.SLIME]));else if(n===25)this.spawnQueue.push(this.getRandomBoss([T.WORM])),this.spawnQueue.push(this.getRandomBoss([T.BOSS,T.SLIME]));else if(n===30)this.spawnQueue.push(this.getRandomBoss([T.BROODMOTHER]));else if(n===35)this.spawnQueue.push(this.getRandomBoss([T.BROODMOTHER])),this.spawnQueue.push(this.getRandomBoss([T.BOSS,T.SLIME,T.WORM]));else if(n>=40&&n%5===0){const r=[T.BOSS,T.SLIME,T.WORM,T.BROODMOTHER];this.spawnQueue.push(this.getRandomBoss(r)),this.spawnQueue.push(this.getRandomBoss(r))}if(n===26){const r=[{type:y.TURRET_OMNI,name:"OMNI SPIKES"},{type:y.TURRET_TOXIN,name:"BIO-HAZARD MORTAR"},{type:y.TURRET_PERMAFROST,name:"PERMAFROST MORTAR"},{type:y.TURRET_FLAMETHROWER,name:"HELLFIRE STREAM"},{type:y.TURRET_CHAOS_RIFT,name:"VOID RIFT"}];let s=0;r.forEach((l,i)=>{t.unlockedLegendaries.includes(l.type)||(t.unlockedLegendaries.push(l.type),this.spawnFloatingText(bt/2,Rt/2+50+i*40,`UNLOCKED: ${l.name}`,"#fbbf24"),s++)}),s>0&&Y.playAbilityOverclock()}n%5!==0&&this.fillStandardWave(n),this.currentWaveTotal=this.spawnQueue.length,this.spawnTimer=de,this.waveTimer=3*de}getRandomBoss(t){return Math.random()<.005?T.SCAVENGER:t[Math.floor(Math.random()*t.length)]}fillStandardWave(t){let r=(8+t*2)*2;const l=[{name:"SWARM",minWave:0,weights:{[T.GRUNT]:5,[T.RUNNER]:3},powerMult:.9},{name:"BALANCED",minWave:0,weights:{[T.GRUNT]:3,[T.RUNNER]:2,[T.TANK]:1,[T.STALKER]:1},powerMult:1},{name:"AGILE",minWave:4,weights:{[T.RUNNER]:4,[T.STALKER]:3,[T.ORBITER]:2},powerMult:1},{name:"HEAVY",minWave:6,weights:{[T.TANK]:4,[T.HEALER]:2,[T.GRUNT]:2,[T.WELDER]:1},powerMult:1.2},{name:"ELITE",minWave:12,weights:{[T.FRACTAL]:2,[T.TANK]:2,[T.HEALER]:1,[T.ORBITER]:1,[T.DISRUPTOR]:2,[T.WELDER]:2},powerMult:1.3},{name:"CHAOS",minWave:15,weights:{[T.FRACTAL]:3,[T.ORBITER]:2,[T.STALKER]:2,[T.DISRUPTOR]:2},powerMult:1.1}].filter(u=>t>=u.minWave),i=l[Math.floor(Math.random()*l.length)];r*=i.powerMult;const a=[];for(Object.entries(i.weights).forEach(([u,c])=>{const m=u;if(t>=_t[m].minWave)for(let p=0;p<c;p++)a.push(m)}),a.length===0&&a.push(T.GRUNT);r>0;){const u=a[Math.floor(Math.random()*a.length)],c=_t[u].powerRating;if(c>r&&r<2)if(r>=1)this.spawnQueue.push(T.GRUNT),r-=1;else break;else this.spawnQueue.push(u),r-=c}}spawnEnemy(t,n){const r=Math.random()*Math.PI*2,s=Math.max(bt,Rt)/2+100,l=bt/2+Math.cos(r)*s,i=Rt/2+Math.sin(r)*s,a=t.wave,u=_t[n],c=n===T.BOSS||n===T.BROODMOTHER||n===T.WORM||n===T.SLIME||n===T.SCAVENGER,m=!c&&Math.random()<.05+a*.005,p=Math.pow(1.15,a);t.enemies.push({id:`enemy-${Date.now()}-${Math.random()}`,enemyType:n,type:Ee.ENEMY,isBoss:c,isElite:m,x:l,y:i,radius:u.radius*(m?1.2:1),color:m?"#fbbf24":u.color,hp:20*p*u.hpMod*(m?3:1),maxHp:20*p*u.hpMod*(m?3:1),speed:u.speed*(1+a*.01),damage:Math.ceil((5+a*.5)*(m?2:1)),value:Math.floor(4.5*(1+a*.1)*u.valueMod*(m?5:1)),frozenTimer:0,slowFactor:0,poisonTimer:0,poisonStacks:0,orbitalHitTimer:0,shield:(u.shieldMod||0)*(20*p*.5),maxShield:(u.shieldMod||0)*(20*p*.5),shieldRegenTimer:0,abilityCooldown:0,isSpeedBursting:!1,buffs:{defense:!1,speed:!1,damage:!1},resistances:u.resistances,splitTier:0,maxSplitTier:n===T.SLIME||n===T.FRACTAL?2:0,orbitAngle:0,orbitRadius:0,weldingTimer:0,powerRating:u.powerRating,lifeTime:0,attackCooldown:0})}}class Af{constructor(t,n,r){this.lastTime=0,this.animationId=0,this.isRunning=!1,this.accumulator=0,this.fixedTimeStep=1/de,this.speedMultiplier=1,this.keys={},this.mouseX=0,this.mouseY=0,this.ticks=0,this.gpsTimer=0,this.shakeIntensity=0,this.handleKeyDown=s=>{this.keys[s.key]=!0,s.key==="1"&&this.triggerAbility(P.NUKE),s.key==="2"&&this.triggerAbility(P.INVULNERABILITY),s.key==="3"&&this.triggerAbility(P.OVERCLOCK),s.key==="4"&&this.triggerAbility(P.RANGE_BOOST)},this.handleKeyUp=s=>{this.keys[s.key]=!1},this.loop=s=>{if(!this.isRunning)return;let l=(s-this.lastTime)/1e3;if(this.lastTime=s,l>.25&&(l=.25),this.accumulator+=l*this.speedMultiplier,!this.state.isGameOver)for(;this.accumulator>=this.fixedTimeStep;)this.update(this.fixedTimeStep),this.accumulator-=this.fixedTimeStep;this.onStateUpdate(this.state),this.animationId=requestAnimationFrame(this.loop)},this.onStateUpdate=t,this.onWaveStart=n,this.onShowChoice=r,this.shopSystem=new jf(this.spawnFloatingText.bind(this)),this.waveSystem=new If(this.spawnFloatingText.bind(this),n,r,s=>this.shopSystem.generateChoices(s),s=>this.shopSystem.handleChoiceSelection(this.state,s)),this.state=this.getInitialState(),this.syncLeaderboard(),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}async syncLeaderboard(){const t=await Nf(),n=t.scores;this.state.isServerConnected=t.connected,n.length>0&&(this.state.leaderboard=n,n[0].score>this.state.highScore&&(this.state.highScore=n[0].score)),this.onStateUpdate({...this.state})}getState(){return this.state}getInitialState(){const t=bt/2,n=Rt/2,r=Fs(),s=r.length>0?r[0].score:0,l={};return Object.values(En).forEach(i=>{l[i.type]={unlocked:!1,level:0,cooldown:0,maxCooldown:i.cooldown*60,activeTimer:0,charges:i.maxCharges}}),{gold:350,wave:0,score:0,highScore:s,leaderboard:r,isServerConnected:!1,isGameOver:!1,flavorText:"The Spire awakens...",gameSpeed:1,killCounts:{},damageDealt:{},goldSpent:{},cameraShake:{x:0,y:0},shopItems:[],shopTimer:0,rerollCost:xf,unlockedLegendaries:[],abilities:l,tower:{id:"central-tower",type:Ee.TOWER,x:t,y:n,radius:40,color:"#e2e8f0",hp:1e3,maxHp:1e3,speed:0,damage:0,modules:{[y.TURRET_ARROW]:1},moduleCooldowns:{},moduleTargeting:{[y.TURRET_ARROW]:ke.NEAREST},turretStates:{},statMultipliers:{damage:1,speed:1,range:1,goldValue:1.15},damageTypeMultipliers:{PHYSICAL:1,MAGIC:1,FIRE:1,ICE:1,POISON:1,CHAOS:1},masteryLevels:{PHYSICAL:0,MAGIC:0,FIRE:0,ICE:0,POISON:0,CHAOS:0},elementalModuleCounts:{PHYSICAL:1,MAGIC:0,FIRE:0,ICE:0,POISON:0,CHAOS:0},goldPerSecond:0,hpRegen:0,hpRegenPct:0,targetingMode:ke.NEAREST,isInvulnerable:!1,isOverclocked:!1,isRangeBoosted:!1,disruptionTimer:0},player:{id:"player",type:Ee.PLAYER,x:t,y:n+60,radius:12,color:"#3b82f6",hp:100,maxHp:100,speed:0,damage:5},enemies:[],hoveredEnemy:null,projectiles:[],particles:[],puddles:[],floatingTexts:[]}}start(){this.isRunning||(this.isRunning=!0,this.lastTime=performance.now(),this.accumulator=0,this.state.shopItems.length===0&&this.shopSystem.rotateShop(this.state),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),this.loop(this.lastTime))}stop(){this.isRunning=!1,cancelAnimationFrame(this.animationId),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}reset(){this.stop();const t=this.state.leaderboard,n=this.state.highScore,r=this.state.isServerConnected;this.state=this.getInitialState(),this.speedMultiplier=1,this.waveSystem.reset(),this.state.leaderboard=t,this.state.highScore=n,this.state.isServerConnected=r,this.onStateUpdate({...this.state})}restart(){this.reset(),this.shopSystem.rotateShop(this.state),this.start()}async saveHighScore(t){var l,i;const n={name:t.substring(0,15),score:this.state.score,wave:this.state.wave,date:new Date().toISOString().split("T")[0]},r=[...this.state.leaderboard,n];r.sort((a,u)=>u.score-a.score),this.state.leaderboard=r.slice(0,10),this.state.highScore=((l=this.state.leaderboard[0])==null?void 0:l.score)||0,this.onStateUpdate({...this.state});const s=await Cf(n);this.state.leaderboard=s,this.state.highScore=((i=s[0])==null?void 0:i.score)||0,this.onStateUpdate({...this.state})}toggleTargetingMode(){const t=Object.values(ke),r=(t.indexOf(this.state.tower.targetingMode)+1)%t.length;this.state.tower.targetingMode=t[r]}setModuleTargeting(t,n){this.state.tower.moduleTargeting[t]=n,this.onStateUpdate({...this.state})}toggleGameSpeed(){this.speedMultiplier=this.speedMultiplier===1?2:1,this.state.gameSpeed=this.speedMultiplier,this.onStateUpdate({...this.state})}setFlavorText(t){this.state.flavorText=t}updateMouse(t,n){this.mouseX=t,this.mouseY=n}handleClick(){}buyUpgrade(t){this.shopSystem.buyUpgrade(this.state,t)}triggerReroll(){this.shopSystem.triggerReroll(this.state)}unlockAbility(t){const n=En[t],r=this.state.abilities[t];let s=n.cost;if(n.category==="PASSIVE"&&n.costScaling&&(s=Math.floor(n.cost*Math.pow(n.costScaling,r.level))),this.state.gold>=s){if(n.category==="ACTIVE"&&r.unlocked)return;if(this.state.gold-=s,r.unlocked=!0,r.level++,Y.playUpgrade(),n.category==="PASSIVE")switch(this.spawnFloatingText(this.state.player.x,this.state.player.y-30,`${n.name} LVL ${this.state.abilities[t].level}`,n.color),t){case P.PASSIVE_PHYSICAL:this.state.tower.damageTypeMultipliers.PHYSICAL+=n.statBonus||0;break;case P.PASSIVE_MAGIC:this.state.tower.damageTypeMultipliers.MAGIC+=n.statBonus||0;break;case P.PASSIVE_FIRE:this.state.tower.damageTypeMultipliers.FIRE+=n.statBonus||0;break;case P.PASSIVE_ICE:this.state.tower.damageTypeMultipliers.ICE+=n.statBonus||0;break;case P.PASSIVE_POISON:this.state.tower.damageTypeMultipliers.POISON+=n.statBonus||0;break;case P.PASSIVE_CHAOS:this.state.tower.damageTypeMultipliers.CHAOS+=n.statBonus||0;break}else this.spawnFloatingText(this.state.player.x,this.state.player.y-30,`${n.name} ONLINE`,n.color)}this.onStateUpdate({...this.state})}triggerAbility(t){const n=this.state.abilities[t],r=En[t];if(r.category!=="PASSIVE"&&n.unlocked&&!(n.cooldown>0)&&!(n.charges<=0))switch(n.cooldown=n.maxCooldown,n.activeTimer=r.duration*60,r.maxCharges!==1/0&&n.charges--,t){case P.NUKE:Y.playAbilityNuke(),this.shakeIntensity=50,this.spawnShockwave(bt/2,Rt/2,"#ef4444",1500),this.state.enemies.forEach(s=>{s.isBoss?this.dealDamage(s,2e3*this.state.tower.damageTypeMultipliers.MAGIC,"MAGIC"):this.dealDamage(s,99999,"MAGIC"),this.spawnParticleExplosion(s.x,s.y,s.color,5)});break;case P.INVULNERABILITY:Y.playAbilityShield(),this.spawnFloatingText(this.state.tower.x,this.state.tower.y-60,"","#3b82f6");break;case P.OVERCLOCK:Y.playAbilityOverclock(),this.spawnFloatingText(this.state.tower.x,this.state.tower.y-60,"","#eab308");break;case P.RANGE_BOOST:Y.playAbilityOverclock(),this.spawnFloatingText(this.state.tower.x,this.state.tower.y-60,"","#22c55e");break}}update(t){if(this.ticks++,this.gpsTimer++,this.gpsTimer>=de){if(this.state.tower.goldPerSecond>0&&(this.state.gold+=this.state.tower.goldPerSecond),this.state.tower.hp<this.state.tower.maxHp){const n=this.state.tower.hpRegen,r=this.state.tower.maxHp*this.state.tower.hpRegenPct,s=n+r;s>0&&(this.state.tower.hp=Math.min(this.state.tower.maxHp,this.state.tower.hp+s))}this.state.tower.disruptionTimer>0&&this.state.tower.disruptionTimer--,this.gpsTimer=0}if(this.shakeIntensity>0){const n=(Math.random()-.5)*2*this.shakeIntensity,r=(Math.random()-.5)*2*this.shakeIntensity;this.state.cameraShake={x:n,y:r},this.shakeIntensity*=.9,this.shakeIntensity<.5&&(this.shakeIntensity=0,this.state.cameraShake={x:0,y:0})}else this.state.cameraShake={x:0,y:0};Object.keys(this.state.abilities).forEach(n=>{const r=n,s=this.state.abilities[r];s.cooldown>0&&s.cooldown--,s.activeTimer>0&&s.activeTimer--}),this.state.tower.isInvulnerable=this.state.abilities[P.INVULNERABILITY].activeTimer>0,this.state.tower.isOverclocked=this.state.abilities[P.OVERCLOCK].activeTimer>0,this.state.tower.isRangeBoosted=this.state.abilities[P.RANGE_BOOST].activeTimer>0,this.state.shopTimer>0&&(this.state.shopTimer--,this.state.shopTimer<=0&&this.shopSystem.rotateShop(this.state)),this.state.player.hp<this.state.player.maxHp&&(this.state.player.hp+=.05),this.waveSystem.update(this.state),this.updateTower(),this.updateEnemies(),this.updateHoveredEnemy(),this.updateProjectiles(),this.updateParticles(),this.updatePuddles(),this.state.score>this.state.highScore&&(this.state.highScore=this.state.score)}updateTower(){const t=this.state.tower,n=t.isOverclocked?2:1,r=t.isRangeBoosted?2:1;Object.entries(t.modules).forEach(([s,l])=>{if(l<=0||s===y.ECON_GPS||s===y.ECON_BOUNTY||s===y.ECON_REFINERY||s===y.STAT_REGEN||s===y.STAT_REGEN_PCT)return;if(s===y.TURRET_ORBITAL||s===y.TURRET_ICE){if(t.turretStates[s]||(t.turretStates[s]=[]),t.turretStates[s].length<l)for(let E=t.turretStates[s].length;E<l;E++)t.turretStates[s].push({targetId:null,charge:0});else t.turretStates[s].length>l&&(t.turretStates[s].length=l);const x=Z[s];let b=(x.range||500)*t.statMultipliers.range*r;const g=(x.damage||3)*t.statMultipliers.damage*n*(t.damageTypeMultipliers[x.damageType||"MAGIC"]||1);t.turretStates[s].forEach(E=>{let f=null;if(E.targetId&&(f=this.state.enemies.find(d=>d.id===E.targetId)||null,f&&Math.hypot(f.x-t.x,f.y-t.y)>b&&(f=null)),!f){E.charge=0;const d=t.moduleTargeting[s]||ke.NEAREST;f=this.findTarget(t.x,t.y,b,x.damageType,d),f?E.targetId=f.id:E.targetId=null}if(f){let d=g;if(s===y.TURRET_ORBITAL){E.charge<120&&E.charge++;const v=1+E.charge/30;d=g*v}else s===y.TURRET_ICE&&((.5>=f.slowFactor||f.frozenTimer<=0)&&(f.slowFactor=.5,f.frozenTimer=5),E.charge=30);this.dealDamage(f,d,x.damageType||"MAGIC",!0,s),this.ticks%5===0&&this.spawnParticleExplosion(f.x,f.y,x.color,1)}});return}const i=Z[s];if(!i)return;if(t.moduleCooldowns[s]||(t.moduleCooldowns[s]=0),t.moduleCooldowns[s]>0){t.moduleCooldowns[s]--;return}let a=(i.range||200)*t.statMultipliers.range;s===y.TURRET_FLAMETHROWER&&(a=i.range||160),a*=r;let u=(i.cooldown||60)/t.statMultipliers.speed;t.isOverclocked&&(u/=2),t.disruptionTimer>0&&(u/=.8);const c=i.damageType||"PHYSICAL",m=t.damageTypeMultipliers[c]||1,p=(i.damage||10)*t.statMultipliers.damage*n*m;if(s===y.TURRET_OMNI){const x=p*l,b=this.ticks/50;for(let g=0;g<8;g++){const E=g*(Math.PI/4)+b;this.shootProjectile(t,t.x+Math.cos(E)*a,t.y+Math.sin(E)*a,10,x,c,a/10,i.color,"NONE",0,0,0,!1,i.effectDuration,i.slowMagnitude,4,i.renderLayer||0,!1,s)}t.moduleCooldowns[s]=u;return}let h=null;if(s===y.TURRET_CHAOS_RIFT){const x=this.state.enemies.filter(E=>E.isBoss),b=x.length>0?x:this.state.enemies;let g=-1;for(const E of b)E.hp>g&&(g=E.hp,h=E)}else{const x=t.moduleTargeting[s]||ke.NEAREST;h=this.findTarget(t.x,t.y,a,c,x)}if(h){if(s===y.TURRET_BALLISTA){const C=Math.min(14,6+l*.5),w=p*(1+(l-1)*.5),k=Math.floor((l-1)/2),I=(i.pierce||1)+k,O=18*(t.isOverclocked?1.5:1),U=a/O+5;this.shootProjectile(t,h.x,h.y,O,w,c,U,i.color,"NONE",0,0,I,!1,i.effectDuration,i.slowMagnitude,C,i.renderLayer||0,!0,s),t.moduleCooldowns[s]=u;return}let x=Math.floor(l/10);const b=l%10;x>10&&(x=10);let g=10,E=.15;s===y.TURRET_REPULSOR?g=6:s===y.TURRET_CHAOS_BEAM?g=18:s===y.TURRET_FLAMETHROWER?(g=8,E=.6):s===y.TURRET_MAGIC_MISSILE?g=8:s===y.TURRET_CHAOS_BOLT?(g=12,E=.2):s===y.TURRET_CHAOS_RIFT?g=6:s===y.TURRET_PERMAFROST||s===y.TURRET_TOXIN?g=8:(s===y.TURRET_GLACIAL_SPIKE||s===y.TURRET_ACID_CANNON)&&(g=14),t.isOverclocked&&(g*=1.5);let f=0;if(s===y.TURRET_CHAOS_RIFT||s===y.TURRET_PERMAFROST||s===y.TURRET_TOXIN){const S=Math.hypot(h.x-t.x,h.y-t.y);f=Math.ceil(S/g)+(s===y.TURRET_CHAOS_RIFT?10:0)}else f=a/g+5;let d=4;s===y.TURRET_GLACIAL_SPIKE&&(d=10),s===y.TURRET_REPULSOR&&(d=15),s===y.TURRET_ACID_CANNON&&(d=8);const v=(S,R)=>{for(let C=0;C<S;C++){let w=(Math.random()-.5)*E;s===y.TURRET_CLUSTER_BOMB&&(w=(Math.random()-.5)*.4);const k=R?p*10:p;let I=i.effect,O=i.pierce||0;(I==="FROST_MORTAR"||I==="POISON_MORTAR")&&(O=999),this.shootProjectile(t,h.x,h.y,g,k,c,f,i.color,I,w,i.knockback||0,O,R,i.effectDuration,i.slowMagnitude,d,i.renderLayer||0,!0,s)}};v(x,!0),v(b,!1),t.moduleCooldowns[s]=u}})}findTarget(t,n,r,s,l){let i=this.state.enemies.filter(a=>Math.hypot(a.x-t,a.y-n)<=r);return i.length===0?null:(i.sort((a,u)=>{if(s==="CHAOS"){if(a.isBoss&&!u.isBoss)return-1;if(!a.isBoss&&u.isBoss)return 1}if(l===ke.BOSS)return a.isBoss!==u.isBoss?a.isBoss?-1:1:Math.hypot(a.x-t,a.y-n)-Math.hypot(u.x-t,u.y-n);if(s){const c=a.resistances[s]||1,m=u.resistances[s]||1,p=c>1.1,h=m>1.1;if(p&&!h)return-1;if(!p&&h)return 1}return l===ke.STRONGEST?u.hp-a.hp:l===ke.FASTEST?u.speed-a.speed:l===ke.FURTHEST?Math.hypot(u.x-t,u.y-n)-Math.hypot(a.x-t,a.y-n):Math.hypot(a.x-t,a.y-n)-Math.hypot(u.x-t,u.y-n)}),i[0])}updateHoveredEnemy(){let t=null,n=1/0;for(const r of this.state.enemies){const s=Math.hypot(r.x-this.mouseX,r.y-this.mouseY);s<r.radius+15&&s<n&&(n=s,t=r)}this.state.hoveredEnemy=t}updateEnemies(){const t=this.state.tower,n=this.state.enemies.filter(s=>s.isBoss);this.state.enemies.forEach(s=>{s.buffs.damage=!1,s.buffs.speed=!1,s.buffs.defense=!1,n.forEach(l=>{if(s.id===l.id)return;Math.hypot(s.x-l.x,s.y-l.y)<uo&&(s.buffs.damage=!0,s.buffs.speed=!0,s.buffs.defense=!0)})});const r=[];this.state.enemies.forEach(s=>{const l=Math.hypot(s.x-t.x,s.y-t.y),i=t.radius+s.radius;if(l>2200){s.remove=!0;return}s.lifeTime++;const a=s.lifeTime>ao;if(s.lifeTime===ao+1&&(this.spawnFloatingText(s.x,s.y-s.radius-20,"","#ef4444"),Y.playAbilityOverclock()),l<=i)if(s.attackCooldown<=0){if(!t.isInvulnerable){s.enemyType===T.DISRUPTOR&&(t.disruptionTimer=5*de,this.spawnFloatingText(t.x,t.y-60,"","#22d3ee"),Y.playTowerDamage());let c=s.damage;s.buffs.damage&&(c*=1.2),(s.enemyType===T.BOSS||s.enemyType===T.SLIME||s.enemyType===T.BROODMOTHER||s.enemyType===T.SCAVENGER)&&(c*=2),t.hp-=c,this.spawnFloatingText(t.x,t.y-20,`-${Math.round(c)}`,"#ef4444"),Y.playTowerDamage(),this.shakeIntensity=3+c/10}const u=de;s.attackCooldown=a?u/2:u,t.hp<=0&&(this.state.isGameOver=!0)}else s.attackCooldown--;else{if(s.enemyType===T.BROODMOTHER)if(s.abilityCooldown<=0){const c=3+Math.floor(Math.random()*3);for(let m=0;m<c;m++){const p=Math.random()*Math.PI*2,h=s.radius+20,x=s.x+Math.cos(p)*h,b=s.y+Math.sin(p)*h,g=_t[T.SWARMER],E=Math.pow(1.25,this.state.wave);r.push({id:`swarmer-${Date.now()}-${Math.random()}`,enemyType:T.SWARMER,type:Ee.ENEMY,isBoss:!1,isElite:!1,x,y:b,radius:g.radius,color:g.color,hp:20*E*g.hpMod,maxHp:20*E*g.hpMod,speed:g.speed*(1+this.state.wave*.01),damage:Math.ceil(5+this.state.wave*.5),value:Math.floor(5*(1+this.state.wave*.1)*g.valueMod),frozenTimer:0,slowFactor:0,poisonTimer:0,poisonStacks:0,orbitalHitTimer:0,shield:0,maxShield:0,shieldRegenTimer:0,abilityCooldown:0,isSpeedBursting:!1,buffs:{defense:!1,speed:!1,damage:!1},resistances:g.resistances,splitTier:0,maxSplitTier:0,orbitAngle:0,orbitRadius:0,weldingTimer:0,powerRating:g.powerRating,lifeTime:0,attackCooldown:0})}s.abilityCooldown=5*de}else s.abilityCooldown--;let u=!1;if(s.enemyType===T.SCAVENGER){if(s.abilityCooldown<=0){const c=this.state.wave>=25?T.WELDER:T.TANK,m=4;for(let p=0;p<m;p++){const h=Math.PI*2/m*p,x=s.radius+15,b=s.x+Math.cos(h)*x,g=s.y+Math.sin(h)*x,E=_t[c],f=Math.pow(1.15,this.state.wave);r.push({id:`scav-minion-${Date.now()}-${Math.random()}`,enemyType:c,type:Ee.ENEMY,isBoss:!1,isElite:!1,x:b,y:g,radius:E.radius,color:E.color,hp:20*f*E.hpMod,maxHp:20*f*E.hpMod,speed:E.speed*(1+this.state.wave*.01),damage:Math.ceil(5+this.state.wave*.5),value:0,frozenTimer:0,slowFactor:0,poisonTimer:0,poisonStacks:0,orbitalHitTimer:0,shield:(E.shieldMod||0)*(20*f*.5),maxShield:(E.shieldMod||0)*(20*f*.5),shieldRegenTimer:0,abilityCooldown:0,isSpeedBursting:!1,buffs:{defense:!1,speed:!1,damage:!1},resistances:E.resistances,splitTier:0,maxSplitTier:0,orbitAngle:0,orbitRadius:0,weldingTimer:0,powerRating:E.powerRating,lifeTime:0,attackCooldown:0})}this.spawnFloatingText(s.x,s.y-40,"","#fbbf24"),s.abilityCooldown=6*de}else s.abilityCooldown--;s.abilityCooldown>6*de-60&&(u=!0)}if(s.enemyType===T.WELDER&&!a)if(l>300)s.weldingTimer=0;else if(u=!0,s.attackCooldown<=0){if(!t.isInvulnerable){s.weldingTimer+=de;const m=1+s.weldingTimer/de*.2;let p=s.damage*m;s.buffs.damage&&(p*=1.2),t.hp-=p,this.spawnFloatingText(t.x,t.y-20,`-${Math.round(p)}`,"#f97316"),Y.playTowerDamage(),this.spawnParticleExplosion(t.x+(Math.random()-.5)*30,t.y+(Math.random()-.5)*30,"#f97316",3),s.attackCooldown=de}}else s.attackCooldown--,s.weldingTimer++;if(s.enemyType===T.WORM){if(!a){const c=350+Math.sin(this.ticks*.01)*150,m=l,p=Math.atan2(t.y-s.y,t.x-s.x),h=p+Math.PI/2;s.x+=Math.cos(h)*s.speed,s.y+=Math.sin(h)*s.speed,m>c+10?(s.x+=Math.cos(p)*s.speed*.5,s.y+=Math.sin(p)*s.speed*.5):m<c-10&&(s.x-=Math.cos(p)*s.speed*.5,s.y-=Math.sin(p)*s.speed*.5),u=!0}if(s.abilityCooldown<=0){const c=Math.random()>.5?T.STALKER:T.ORBITER,m=2;for(let p=0;p<m;p++){const h=Math.random()*Math.PI*2,x=s.radius+30,b=s.x+Math.cos(h)*x,g=s.y+Math.sin(h)*x,E=_t[c],f=Math.pow(1.15,this.state.wave);r.push({id:`wormspawn-${Date.now()}-${Math.random()}`,enemyType:c,type:Ee.ENEMY,isBoss:!1,isElite:!1,x:b,y:g,radius:E.radius,color:E.color,hp:20*f*E.hpMod,maxHp:20*f*E.hpMod,speed:E.speed*(1+this.state.wave*.01),damage:Math.ceil(5+this.state.wave*.5),value:Math.floor(4.5*(1+this.state.wave*.1)*E.valueMod),frozenTimer:0,slowFactor:0,poisonTimer:0,poisonStacks:0,orbitalHitTimer:0,shield:(E.shieldMod||0)*(20*f*.5),maxShield:(E.shieldMod||0)*(20*f*.5),shieldRegenTimer:0,abilityCooldown:0,isSpeedBursting:!1,buffs:{defense:!1,speed:!1,damage:!1},resistances:E.resistances,splitTier:0,maxSplitTier:0,orbitAngle:0,orbitRadius:0,weldingTimer:0,powerRating:E.powerRating,lifeTime:0,attackCooldown:0})}s.abilityCooldown=4*de}else s.abilityCooldown--}else if(s.enemyType===T.HEALER){if(!a){const c=l,m=Math.atan2(t.y-s.y,t.x-s.x);if(c>va)s.x+=Math.cos(m)*s.speed,s.y+=Math.sin(m)*s.speed;else{const p=m+Math.PI/2;s.x+=Math.cos(p)*s.speed,s.y+=Math.sin(p)*s.speed,c<va-10&&(s.x-=Math.cos(m)*.5,s.y-=Math.sin(m)*.5)}u=!0}if(s.abilityCooldown<=0){this.spawnShockwave(s.x,s.y,s.color,ya);const c=bf+this.state.wave*2;let m=0;this.state.enemies.forEach(p=>{p.id!==s.id&&Math.hypot(p.x-s.x,p.y-s.y)<ya&&p.shield<p.maxHp&&(p.shield+=c,p.maxShield=Math.max(p.maxShield,p.shield),m++)}),m>0&&this.spawnFloatingText(s.x,s.y-20,"","#60a5fa"),s.abilityCooldown=Rf}else s.abilityCooldown--}else if(s.enemyType===T.STALKER){if(!a){const c=Math.sin(this.ticks*.1)*2;s.x+=Math.cos(c),s.y+=Math.sin(c);const m=Math.atan2(t.y-s.y,t.x-s.x);s.x+=Math.cos(m)*s.speed,s.y+=Math.sin(m)*s.speed,u=!0}}else if(s.enemyType===T.ORBITER){if(!a){s.orbitRadius===0&&(s.orbitRadius=l,s.orbitAngle=Math.atan2(s.y-t.y,s.x-t.x)),s.orbitRadius>20&&(s.orbitRadius-=s.speed*.5);const c=Math.max(.005,s.speed/(s.orbitRadius||1)),m=Math.min(.02,c);s.orbitAngle+=m;const p=t.x+Math.cos(s.orbitAngle)*s.orbitRadius,h=t.y+Math.sin(s.orbitAngle)*s.orbitRadius,x=Math.atan2(h-s.y,p-s.x);s.x+=Math.cos(x)*s.speed,s.y+=Math.sin(x)*s.speed,u=!0}}else if(s.enemyType===T.DISRUPTOR&&!a){const c=Math.sin(this.ticks*.2)*1.5,p=Math.atan2(t.y-s.y,t.x-s.x)+c;let h=s.speed;s.frozenTimer>0&&(h*=.5,s.frozenTimer--),s.buffs.speed&&(h*=1.2),s.x+=Math.cos(p)*h,s.y+=Math.sin(p)*h,u=!0}if(!u){const c=Math.atan2(t.y-s.y,t.x-s.x);let m=s.speed;if(a&&(m*=2),s.enemyType===T.RUNNER&&!s.isSpeedBursting&&l<Ef&&(s.isSpeedBursting=!0,s.speed*=Tf,m=s.speed,a&&(m*=2)),s.frozenTimer>0){const p=s.slowFactor>0?s.slowFactor:.5;m*=1-p,s.frozenTimer--}else s.slowFactor=0;s.buffs.speed&&(m*=1.2),s.x+=Math.cos(c)*m,s.y+=Math.sin(c)*m}}if(s.poisonTimer>0){if(this.ticks%30===0){const u=t.damageTypeMultipliers.POISON||1;let c=s.poisonStacks*2*u;s.enemyType===T.SLIME?(s.hp=Math.min(s.maxHp,s.hp+c),this.spawnFloatingText(s.x,s.y-s.radius,`+${Math.round(c)}`,"#4ade80")):this.dealDamage(s,c,"POISON",!0,s.poisonSource)}s.poisonTimer--}s.maxShield>0&&s.shield<s.maxShield&&(s.shieldRegenTimer>0?s.shieldRegenTimer--:s.shield+=.5)}),this.state.enemies.push(...r),this.state.enemies=this.state.enemies.filter(s=>!s.remove)}updateProjectiles(){this.state.projectiles.forEach(t=>{if(t.life--,t.life<=0){t.remove=!0,t.effect==="EXPLOSIVE"?this.explodeProjectile(t):t.effect==="FROST_MORTAR"?(this.explodeProjectile(t),this.spawnPuddle(t.x,t.y,t.effectDuration||288,t.slowMagnitude||.75,t.damageType,t.sourceType)):t.effect==="POISON_MORTAR"&&(this.explodeProjectile(t),this.spawnPuddle(t.x,t.y,t.effectDuration||216,0,t.damageType,t.sourceType));return}if(t.x+=t.vx,t.y+=t.vy,!(t.effect==="FROST_MORTAR"||t.effect==="POISON_MORTAR"))for(const n of this.state.enemies){if(t.hitList&&t.hitList.includes(n.id))continue;const r=Math.hypot(n.x-t.x,n.y-t.y),s=t.radius+(t.isElite?2:0);if(r<n.radius+s){if(this.dealDamage(n,t.damage,t.damageType,!1,t.sourceType),t.effect==="FREEZE"){const l=t.slowMagnitude||.5,i=t.effectDuration||120;(l>=n.slowFactor||n.frozenTimer<=0)&&(n.slowFactor=l,n.frozenTimer=i)}if(t.effect==="POISON"&&(n.poisonTimer=300,n.poisonStacks++,n.poisonSource=t.sourceType),t.knockback){const l=Math.atan2(n.y-this.state.tower.y,n.x-this.state.tower.x);n.x+=Math.cos(l)*t.knockback,n.y+=Math.sin(l)*t.knockback}if(t.pierce&&t.pierce>0)t.pierce--,t.hitList||(t.hitList=[]),t.hitList.push(n.id);else{t.remove=!0,t.effect==="EXPLOSIVE"?this.explodeProjectile(t):this.spawnParticleExplosion(t.x,t.y,t.color,t.isElite?6:3);break}}}}),this.state.projectiles=this.state.projectiles.filter(t=>!t.remove)}explodeProjectile(t){const n=t.effectRadius||100;this.spawnShockwave(t.x,t.y,t.color,n),this.state.enemies.forEach(r=>{if(Math.hypot(r.x-t.x,r.y-t.y)<n){if(this.dealDamage(r,t.damage,t.damageType,!1,t.sourceType),t.effect==="FROST_MORTAR"){const l=t.slowMagnitude||.75,i=60;(l>=r.slowFactor||r.frozenTimer<=0)&&(r.slowFactor=l,r.frozenTimer=i)}t.effect==="POISON_MORTAR"&&(r.poisonTimer=60,r.poisonStacks++,r.poisonSource=t.sourceType)}}),t.effect==="FROST_MORTAR"?Y.playWeaponFire("ICE",.5):t.effect==="POISON_MORTAR"&&Y.playWeaponFire("POISON",.5)}updatePuddles(){this.state.puddles.forEach(t=>{t.life--,this.state.enemies.forEach(n=>{Math.hypot(n.x-t.x,n.y-t.y)<t.radius+n.radius&&(t.damageType==="ICE"?(t.slowMagnitude>=n.slowFactor||n.frozenTimer<=10)&&(n.slowFactor=t.slowMagnitude,n.frozenTimer=10):t.damageType==="POISON"&&(n.poisonTimer=60,this.ticks%30===0&&(n.poisonStacks++,n.poisonSource=t.sourceType)))})}),this.state.puddles=this.state.puddles.filter(t=>t.life>0)}spawnPuddle(t,n,r,s,l,i){this.state.puddles.push({id:`puddle-${Math.random()}`,type:Ee.PUDDLE,x:t,y:n,life:r,maxLife:r,radius:80,color:l==="POISON"?"rgba(34, 197, 94, 0.4)":"rgba(59, 130, 246, 0.4)",slowMagnitude:s,damageType:l,sourceType:i})}dealDamage(t,n,r,s=!1,l){if(t.remove)return;let i=t.resistances[r]||1;r==="CHAOS"&&(i=Math.max(1,i));let a=n*i;if(t.buffs.defense&&(a*=.5),t.shield>0)if(t.shield>=a){t.shield-=a,a=0,t.shieldRegenTimer=180,this.spawnFloatingText(t.x,t.y-t.radius,"","#60a5fa");return}else a-=t.shield,t.shield=0,t.shieldRegenTimer=300;t.hp-=a,l&&(this.state.damageDealt[l]=(this.state.damageDealt[l]||0)+a),s||this.spawnFloatingText(t.x+(Math.random()*20-10),t.y-t.radius,Math.round(a).toString(),ut[r]),t.hp<=0&&this.killEnemy(t)}killEnemy(t){if(t.remove)return;t.remove=!0;const n=t.enemyType;if(this.state.killCounts[n]=(this.state.killCounts[n]||0)+1,t.enemyType!==T.FRACTAL&&t.enemyType!==T.SLIME||t.splitTier===0){this.state.score+=Math.floor(t.value*10);const r=this.state.tower.statMultipliers.goldValue,s=Math.ceil(t.value*r);this.state.gold+=s,this.spawnFloatingText(t.x,t.y,`+${s}g`,"#fcd34d")}if(this.spawnParticleExplosion(t.x,t.y,t.color,8),Y.playEnemyDeath(t.isBoss?2:1),t.isBoss&&(this.shakeIntensity=20,this.spawnShockwave(t.x,t.y,t.color,300)),t.enemyType===T.FRACTAL&&t.splitTier<t.maxSplitTier)for(let r=0;r<2;r++){const s=t.splitTier+1,l={...t,id:`fractal-${Date.now()}-${Math.random()}`,x:t.x+(Math.random()*20-10),y:t.y+(Math.random()*20-10),hp:t.maxHp*.6,maxHp:t.maxHp*.6,radius:t.radius*.7,value:0,splitTier:s,remove:!1,lifeTime:0,attackCooldown:0};this.state.enemies.push(l)}if(t.enemyType===T.SLIME&&t.splitTier<t.maxSplitTier)for(let s=0;s<3;s++){const l=t.splitTier+1,i=Math.PI*2/3*s,a={...t,id:`slime-${Date.now()}-${Math.random()}`,x:t.x+Math.cos(i)*15,y:t.y+Math.sin(i)*15,hp:t.maxHp*.45,maxHp:t.maxHp*.45,radius:t.radius*.6,value:0,speed:t.speed*1.4,splitTier:l,remove:!1,lifeTime:0,attackCooldown:0};this.state.enemies.push(a)}}updateParticles(){this.state.particles.forEach(t=>{if(t.life--,t.x+=t.vx,t.y+=t.vy,t.type===Ee.SHOCKWAVE&&t.endRadius&&t.startRadius){const n=1-t.life/t.maxLife;t.radius=t.startRadius+(t.endRadius-t.startRadius)*n}}),this.state.particles=this.state.particles.filter(t=>t.life>0),this.state.floatingTexts.forEach(t=>{t.life--,t.y+=t.vy}),this.state.floatingTexts=this.state.floatingTexts.filter(t=>t.life>0)}shootProjectile(t,n,r,s,l,i,a,u,c,m,p,h,x=!1,b,g,E=4,f=0,d=!0,v){const S=Math.atan2(r-t.y,n-t.x)+m,R=Math.cos(S)*s,C=Math.sin(S)*s;this.state.projectiles.push({id:`proj-${this.ticks}-${Math.random()}`,type:Ee.PROJECTILE,x:t.x,y:t.y,vx:R,vy:C,radius:E,color:u,damage:l,damageType:i,life:a,effect:c,effectRadius:c==="EXPLOSIVE"?120:c==="FROST_MORTAR"||c==="POISON_MORTAR"?100:0,knockback:p,pierce:h,isElite:x,effectDuration:b,slowMagnitude:g,renderLayer:f,sourceType:v}),d&&t.type===Ee.TOWER&&this.ticks%5===0&&Y.playWeaponFire(i,1+Math.random()*.2)}spawnParticleExplosion(t,n,r,s){for(let l=0;l<s;l++){const i=Math.random()*Math.PI*2,a=Math.random()*2+1;this.state.particles.push({id:`part-${Math.random()}`,type:Ee.PARTICLE,x:t,y:n,vx:Math.cos(i)*a,vy:Math.sin(i)*a,life:30+Math.random()*20,maxLife:50,radius:Math.random()*3+1,color:r})}}spawnShockwave(t,n,r,s){this.state.particles.push({id:`shock-${Math.random()}`,type:Ee.SHOCKWAVE,x:t,y:n,vx:0,vy:0,radius:10,startRadius:10,endRadius:s,life:20,maxLife:20,color:r,width:5})}spawnFloatingText(t,n,r,s){this.state.floatingTexts.push({id:`text-${Math.random()}`,type:Ee.TEXT,text:r,x:t,y:n,vx:0,vy:-1,life:de,color:s,radius:0})}}const Of=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:15,g:23,b:42}},_f=e=>{const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return t?{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10),a:parseFloat(t[4]||"1")}:{r:124,g:58,b:237,a:.15}},Bt=(e,t,n)=>e+(t-e)*n,wa=["rgba(124, 58, 237, 0.15)","rgba(34, 197, 94, 0.15)","rgba(239, 68, 68, 0.15)","rgba(34, 211, 238, 0.15)","rgba(216, 180, 254, 0.15)","rgba(255, 255, 255, 0.05)","rgba(245, 158, 11, 0.15)"];class Pf{constructor(){this.stars=[],this.nebulae=[],this.colorState={bg:{r:15,g:23,b:42},nebula:{r:124,g:58,b:237,a:.15}},this.initialized=!1,this.init()}init(){if(!this.initialized){for(let t=0;t<200;t++)this.stars.push({x:Math.random(),y:Math.random(),size:Math.random()*1.5+.5,baseAlpha:Math.random()*.6+.1,flickerSpeed:Math.random()*2+.5,phase:Math.random()*Math.PI*2});for(let t=0;t<5;t++)this.nebulae.push({x:Math.random(),y:Math.random(),radius:.4+Math.random()*.4,vx:(Math.random()-.5)*.005,vy:(Math.random()-.5)*.005});this.initialized=!0}}draw(t,n,r,s,l){const i=Math.floor((Math.max(1,s.wave)-1)/5)%bs.length,a=bs[i],u=Of(a),c=wa[i]||wa[0],m=_f(c),p=.02,h=this.colorState;h.bg.r=Bt(h.bg.r,u.r,p),h.bg.g=Bt(h.bg.g,u.g,p),h.bg.b=Bt(h.bg.b,u.b,p),h.nebula.r=Bt(h.nebula.r,m.r,p),h.nebula.g=Bt(h.nebula.g,m.g,p),h.nebula.b=Bt(h.nebula.b,m.b,p),h.nebula.a=Bt(h.nebula.a,m.a,p);const x=`rgb(${Math.round(h.bg.r)}, ${Math.round(h.bg.g)}, ${Math.round(h.bg.b)})`,b=`rgba(${Math.round(h.nebula.r)}, ${Math.round(h.nebula.g)}, ${Math.round(h.nebula.b)}, ${h.nebula.a.toFixed(3)})`;t.fillStyle=x,t.fillRect(0,0,n,r),this.nebulae.forEach(g=>{g.x+=g.vx*.1,g.y+=g.vy*.1,g.x<-.5&&(g.x+=1.5),g.x>1.5&&(g.x-=1.5),g.y<-.5&&(g.y+=1.5),g.y>1.5&&(g.y-=1.5);const E=g.x*n,f=g.y*r,d=g.radius*Math.max(n,r),v=t.createRadialGradient(E,f,0,E,f,d);v.addColorStop(0,b),v.addColorStop(1,"transparent"),t.fillStyle=v,t.beginPath(),t.arc(E,f,d,0,Math.PI*2),t.fill()}),this.stars.forEach(g=>{const E=Math.sin(l*g.flickerSpeed+g.phase),f=g.baseAlpha+E*.1;t.fillStyle=`rgba(255, 255, 255, ${Math.max(0,Math.min(1,f))})`,t.beginPath(),t.arc(g.x*n,g.y*r,g.size,0,Math.PI*2),t.fill()})}}const Lf=(e,t,n,r)=>{t.forEach(s=>{e.save(),e.translate(s.x,s.y);const l=Math.min(.4,s.life/60),i=e.createRadialGradient(0,0,0,0,0,s.radius);if(s.damageType==="POISON"){i.addColorStop(0,`rgba(187, 247, 208, ${l})`),i.addColorStop(.7,`rgba(34, 197, 94, ${l})`),i.addColorStop(1,"rgba(34, 197, 94, 0)"),e.fillStyle=i,e.beginPath(),e.arc(0,0,s.radius,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(220, 252, 231, ${l*.7})`;for(let a=0;a<3;a++){const u=Math.sin(n*2+a)*s.radius*.5,c=Math.cos(n*3+a)*s.radius*.5,m=s.radius*.15*(Math.sin(n*4+a)*.2+1);e.beginPath(),e.arc(u,c,m,0,Math.PI*2),e.fill()}}else{i.addColorStop(0,`rgba(224, 242, 254, ${l})`),i.addColorStop(.7,`rgba(59, 130, 246, ${l})`),i.addColorStop(1,"rgba(59, 130, 246, 0)"),e.fillStyle=i,e.beginPath(),e.arc(0,0,s.radius,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(255,255,255, ${l*.5})`,e.lineWidth=2*r,e.beginPath();for(let a=0;a<8;a++){const u=Math.PI*2/8*a,c=s.radius*.8;e.moveTo(Math.cos(u)*c,Math.sin(u)*c),e.lineTo(Math.cos(u+.3)*s.radius,Math.sin(u+.3)*s.radius)}e.stroke()}e.restore()})},zf=(e,t,n)=>{t.forEach(r=>{e.save(),e.translate(r.x,r.y),r.type===Ee.SHOCKWAVE?(e.strokeStyle=r.color,e.lineWidth=(r.width||2)*n,e.globalAlpha=r.life/r.maxLife,e.beginPath(),e.arc(0,0,r.radius,0,Math.PI*2),e.stroke()):(e.fillStyle=r.color,e.globalAlpha=r.life/r.maxLife,e.beginPath(),e.arc(0,0,r.radius,0,Math.PI*2),e.fill()),e.restore()})},Df=(e,t,n)=>{t.forEach(r=>{e.save(),e.translate(r.x,r.y),e.fillStyle=r.color;const s=Math.max(12,14*n);e.font=`bold ${s}px monospace`,e.globalAlpha=r.life/60,e.textAlign="center",e.fillText(r.text,0,0),e.restore()})},Uf=(e,t,n,r)=>{const s=t.tower;e.save(),e.translate(s.x,s.y),e.fillStyle="#0f172a",e.strokeStyle="#334155",e.lineWidth=4*r,e.beginPath();const l=s.radius+5;for(let S=0;S<6;S++){const R=Math.PI/3*S;e.lineTo(Math.cos(R)*l,Math.sin(R)*l)}e.closePath(),e.fill(),e.stroke(),e.save(),e.rotate(n*.4),e.strokeStyle=s.hp<s.maxHp*.3?"#ef4444":"#3b82f6",e.lineWidth=2*r,e.globalAlpha=.5,e.beginPath(),e.arc(0,0,s.radius+4,0,Math.PI*2),e.stroke(),e.rotate(-n*1),e.setLineDash([10,15]),e.beginPath(),e.arc(0,0,s.radius+8,0,Math.PI*2),e.stroke(),e.restore();const i=s.hp/s.maxHp,a=i<.3?12:3,u=1+Math.sin(n*a)*.03;e.save(),e.scale(u,u);const c=e.createRadialGradient(0,0,0,0,0,s.radius);c.addColorStop(0,"#4c1d95"),c.addColorStop(.7,"#0f172a"),c.addColorStop(1,"#000000"),e.fillStyle=c,e.beginPath();const m=8;for(let S=0;S<m*2;S++){const R=Math.PI/m*S,C=S%2===0?s.radius:s.radius*.65;e.lineTo(Math.cos(R)*C,Math.sin(R)*C)}e.closePath(),e.fill();let p="#22d3ee";if(i<.6&&(p="#fbbf24"),i<.3&&(p="#ef4444"),e.shadowColor=p,e.shadowBlur=20,e.fillStyle=p,e.beginPath(),e.arc(0,0,s.radius*.35,0,Math.PI*2),e.fill(),e.fillStyle="#fff",e.shadowBlur=5,e.beginPath(),e.arc(0,0,s.radius*.15,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.restore(),s.disruptionTimer>0){e.save(),e.strokeStyle="#22d3ee",e.lineWidth=1;for(let S=0;S<5;S++){e.beginPath();const R=(Math.random()-.5)*s.radius*2,C=(Math.random()-.5)*s.radius*2;e.moveTo(C-10,R),e.lineTo(C+10,R),e.stroke()}e.restore()}const h=new Set;Object.entries(s.modules).forEach(([S,R])=>{if(R<=0)return;const C=S;if(C.startsWith("ECON")||C===y.STAT_REGEN)h.add("ECONOMY");else{const w=Z[C];w&&h.add(w.damageType||"PHYSICAL")}});const x=Array.from(h).sort(),b=s.radius+60,g=n*.4;if(x.length>0&&(e.beginPath(),e.arc(0,0,b,0,Math.PI*2),e.strokeStyle="rgba(255, 255, 255, 0.05)",e.lineWidth=1*r,e.stroke(),x.forEach((S,R)=>{const C=g+R*(Math.PI*2/x.length),w=Math.cos(C)*b,k=Math.sin(C)*b;let I="#fff";S==="ECONOMY"?I=L.ECONOMY:I=L[S]||"#fff",e.save(),e.translate(w,k),e.shadowColor=I,e.shadowBlur=12,e.fillStyle="#020617",e.beginPath(),e.arc(0,0,7*r,0,Math.PI*2),e.fill(),e.strokeStyle=I,e.lineWidth=2*r,e.stroke();const O=Math.sin(n*5+R)*.5+.5;e.fillStyle=I,e.globalAlpha=.5+O*.5,e.beginPath(),e.arc(0,0,3*r,0,Math.PI*2),e.fill(),e.globalAlpha=.8;const U=n*3+R,K=Math.cos(U)*12*r,W=Math.sin(U)*12*r;e.fillStyle=I,e.beginPath(),e.arc(K,W,1.5*r,0,Math.PI*2),e.fill(),e.restore()})),[y.TURRET_ORBITAL,y.TURRET_ICE].forEach(S=>{s.turretStates&&s.turretStates[S]&&s.turretStates[S].forEach(R=>{if(R.targetId){const C=t.enemies.find(w=>w.id===R.targetId);if(C){const w=S===y.TURRET_ICE,k=w?L.ICE:L.MAGIC,I=w?"rgba(34, 211, 238, ":"rgba(192, 132, 252, ";e.save();const O=Math.min(1,R.charge/60),U=(2+O*4)*r,K=(6+O*8)*r;e.shadowColor=k,e.shadowBlur=10+O*10,e.strokeStyle=`${I}${.4+O*.4})`,e.lineWidth=K,e.beginPath(),e.moveTo(0,0),e.lineTo(C.x-s.x,C.y-s.y),e.stroke(),e.strokeStyle="#fff",e.lineWidth=U,e.shadowBlur=0,e.beginPath(),e.moveTo(0,0),e.lineTo(C.x-s.x,C.y-s.y),e.stroke(),e.translate(C.x-s.x,C.y-s.y),e.fillStyle="#fff",e.shadowColor=k,e.shadowBlur=15,e.beginPath(),e.arc(0,0,U*2,0,Math.PI*2),e.fill(),e.restore()}}})}),s.statMultipliers.damage>1.5){e.save(),e.globalAlpha=.15,e.fillStyle=L.FIRE,e.beginPath();const S=Math.sin(n*5)*2;e.arc(0,0,s.radius+8+S,0,Math.PI*2),e.fill(),e.restore()}const f=60*r,d=6*r,v=s.radius+15+d/2;e.fillStyle="#000",e.fillRect(-f/2,v,f,d),e.fillStyle=s.hp<s.maxHp*.3?"#ef4444":"#4ade80",e.fillRect(-f/2,v,f*(s.hp/s.maxHp),d),e.restore()},Bf=(e,t,n,r,s,l)=>{e.save(),e.translate(t.x,t.y);const i=t.lifeTime>ao;if(t.isElite||i){const u=Math.sin(n*(i?15:8)),c=6+u*2,m=.2+u*.15,p=i?"#ef4444":"#fbbf24";if(e.save(),e.fillStyle=p,e.globalAlpha=m,e.beginPath(),i){for(let x=0;x<=12;x++){const b=Math.PI*2*x/12,g=(t.radius+c)*(1+Math.random()*.1),E=Math.cos(b)*g,f=Math.sin(b)*g;x===0?e.moveTo(E,f):e.lineTo(E,f)}e.closePath(),e.fill()}else e.arc(0,0,t.radius+c,0,Math.PI*2),e.fill();e.globalAlpha=1,e.strokeStyle=p,e.lineWidth=(i?3:2)*r,e.shadowColor=p,e.shadowBlur=i?20:12,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.stroke(),e.restore()}t.isBoss&&(e.save(),e.strokeStyle="rgba(239, 68, 68, 0.3)",e.lineWidth=1*r,e.beginPath(),e.arc(0,0,uo,0,Math.PI*2),e.stroke(),e.globalAlpha=.1,e.fillStyle="#ef4444",e.beginPath(),e.arc(0,0,uo,0,Math.PI*2),e.fill(),e.restore()),e.fillStyle=t.color;const a=Math.atan2(l-t.y,s-t.x);switch(t.enemyType){case T.GRUNT:const u=Math.sin(n*8+t.x%10)*.1+.9;e.save(),e.rotate(a-Math.PI/2),e.scale(u,u),e.beginPath(),e.moveTo(0,-t.radius),e.lineTo(t.radius,0),e.lineTo(0,t.radius),e.lineTo(-t.radius,0),e.closePath();const c=e.createRadialGradient(0,-t.radius*.2,0,0,0,t.radius);c.addColorStop(0,"#e9d5ff"),c.addColorStop(.6,t.color),c.addColorStop(1,"#581c87"),e.fillStyle=c,e.fill(),e.fillStyle="#1e1b4b",e.beginPath(),e.moveTo(-t.radius*.5,0),e.lineTo(0,-t.radius*.2),e.lineTo(t.radius*.5,0),e.lineTo(0,t.radius*.2),e.fill(),e.fillStyle="#f3e8ff",e.shadowColor="#a855f7",e.shadowBlur=4,e.beginPath(),e.arc(0,0,t.radius*.15,0,Math.PI*2),e.fill(),e.shadowBlur=0;const m=n*3;e.fillStyle=t.color,e.globalAlpha=.6;for(let D=0;D<3;D++){const j=m+D*(Math.PI*2/3),z=Math.cos(j)*(t.radius*1.4),N=Math.sin(j)*(t.radius*1.4);e.beginPath(),e.arc(z,N,2*r,0,Math.PI*2),e.fill()}e.restore();break;case T.RUNNER:const p=t.isSpeedBursting;e.save(),e.rotate(a);const h=p?t.radius*4:t.radius*2,x=p?t.radius:t.radius*.6,b=e.createLinearGradient(-t.radius*.5,0,-h,0);b.addColorStop(0,t.color),b.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=b,e.beginPath(),e.moveTo(-t.radius*.5,0),e.lineTo(-h,-x/2),e.lineTo(-h*.8,0),e.lineTo(-h,x/2),e.fill(),e.fillStyle=t.color,e.beginPath(),e.moveTo(t.radius,0),e.lineTo(-t.radius,t.radius*.8),e.lineTo(-t.radius*.4,0),e.lineTo(-t.radius,-t.radius*.8),e.closePath(),e.fill(),e.fillStyle="rgba(0,0,0,0.4)",e.beginPath(),e.moveTo(t.radius*.2,0),e.lineTo(-t.radius,t.radius*.8),e.lineTo(-t.radius,-t.radius*.8),e.fill(),e.fillStyle="#fff",e.shadowColor=t.color,e.shadowBlur=10,e.beginPath(),e.moveTo(-t.radius*.2,0),e.lineTo(-t.radius*.8,0),e.lineWidth=2*r,e.strokeStyle="#fff",e.stroke(),e.shadowBlur=0,p&&(e.strokeStyle="#fff",e.lineWidth=1*r,e.globalAlpha=.5,e.beginPath(),e.moveTo(t.radius,0),e.lineTo(-t.radius*2,-t.radius*1.5),e.moveTo(t.radius,0),e.lineTo(-t.radius*2,t.radius*1.5),e.stroke()),e.restore();break;case T.STALKER:e.save(),e.rotate(a);const g=t.id.charCodeAt(t.id.length-1),E=Math.sin(n*3+g)*.4+.6;e.globalAlpha=E,Math.random()<.05&&e.translate((Math.random()-.5)*5,(Math.random()-.5)*5),e.beginPath(),e.moveTo(t.radius,0),e.lineTo(-t.radius*.6,-t.radius),e.lineTo(-t.radius*.2,0),e.lineTo(-t.radius*.6,t.radius),e.closePath(),e.fillStyle=t.color,e.fill(),e.strokeStyle="#fff",e.lineWidth=1*r,e.globalAlpha=E*.5,e.beginPath(),e.moveTo(0,0),e.lineTo(-t.radius*.6,-t.radius),e.moveTo(0,0),e.lineTo(-t.radius*.6,t.radius),e.stroke(),e.globalAlpha=1,e.fillStyle="#22d3ee",e.beginPath(),e.rect(-2,-1,4,2),e.fill(),e.restore();break;case T.SWARMER:e.save(),e.rotate(a);const f=Math.sin(n*30+t.x*.1);e.strokeStyle=t.color,e.lineWidth=1.5*r,e.lineCap="round";for(let D=-1;D<=1;D+=.7)e.beginPath(),e.moveTo(0,0),e.lineTo(-t.radius*.5,D*t.radius*.8),e.lineTo(-t.radius*.2,D*t.radius*1.5+D*f*2),e.stroke(),e.beginPath(),e.moveTo(0,0),e.lineTo(t.radius*.5,D*t.radius*.8),e.lineTo(t.radius*.2,D*t.radius*1.5-D*f*2),e.stroke();e.fillStyle="#0f172a",e.beginPath(),e.ellipse(0,0,t.radius*.6,t.radius*.8,0,0,Math.PI*2),e.fill(),e.fillStyle=t.color,e.beginPath(),e.arc(0,-t.radius*.3,t.radius*.25,0,Math.PI*2),e.fill(),e.restore();break;case T.TANK:e.save(),e.rotate(a);const d=t.radius*.85;e.fillStyle="#334155",e.beginPath(),e.moveTo(d,d*.4),e.lineTo(d*.4,d),e.lineTo(-d*.4,d),e.lineTo(-d,d*.4),e.lineTo(-d,-d*.4),e.lineTo(-d*.4,-d),e.lineTo(d*.4,-d),e.lineTo(d,-d*.4),e.closePath(),e.fill(),e.fillStyle=t.color,e.fillRect(-d*.6,-d*.6,d*1.2,d*1.2),e.fillStyle="#0f172a",e.beginPath(),e.arc(0,0,d*.4,0,Math.PI*2),e.fill(),e.fillStyle="#64748b",e.beginPath(),e.arc(0,0,d*.2,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(0,0,t.radius,-Math.PI/3,Math.PI/3),e.arc(0,0,t.radius-5,Math.PI/3,-Math.PI/3,!0),e.closePath();const v=e.createLinearGradient(0,-t.radius,0,t.radius);v.addColorStop(0,"#94a3b8"),v.addColorStop(.5,"#e2e8f0"),v.addColorStop(1,"#94a3b8"),e.fillStyle=v,e.fill(),e.strokeStyle="#f8fafc",e.lineWidth=1.5,e.stroke(),e.restore();break;case T.WELDER:if(e.save(),e.rotate(a),t.weldingTimer>0){const j=Math.hypot(s-t.x,l-t.y)-40;e.shadowColor="#fbbf24",e.shadowBlur=10+Math.random()*5,e.strokeStyle="#fff",e.lineWidth=2*r,e.beginPath(),e.moveTo(t.radius*.8,0),e.lineTo(j,0),e.stroke(),e.strokeStyle="#f97316",e.lineWidth=4*r,e.globalAlpha=.6,e.beginPath(),e.moveTo(t.radius*.8,0),e.lineTo(j,0),e.stroke(),e.shadowBlur=0,e.globalAlpha=1}e.fillStyle="#3f3f46",e.fillRect(-t.radius,-t.radius*.6,t.radius*1.6,t.radius*1.2),e.fillStyle="#c2410c",e.beginPath(),e.arc(-t.radius*.8,-t.radius*.4,t.radius*.3,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(-t.radius*.8,t.radius*.4,t.radius*.3,0,Math.PI*2),e.fill(),e.fillStyle="#fbbf24",e.fillRect(t.radius*.4,-t.radius*.2,t.radius*.6,t.radius*.4),e.fillStyle="#3b82f6",e.beginPath(),e.arc(t.radius,0,2*r,0,Math.PI*2),e.fill(),e.restore();break;case T.SCAVENGER:e.save(),e.rotate(a);const S=t.abilityCooldown>6*72-60;e.fillStyle="#78350f",e.fillRect(-t.radius,-t.radius*.6,t.radius*2,t.radius*1.2),e.strokeStyle="#d97706",e.lineWidth=4*r,e.strokeRect(-t.radius,-t.radius*.6,t.radius*2,t.radius*1.2),e.beginPath(),e.moveTo(-t.radius*.3,-t.radius*.6),e.lineTo(-t.radius*.3,t.radius*.6),e.moveTo(t.radius*.3,-t.radius*.6),e.lineTo(t.radius*.3,t.radius*.6),e.stroke();const R=S?-Math.PI/4:0;e.save(),e.translate(-t.radius,-t.radius*.6),e.rotate(R),e.fillStyle="#92400e",e.fillRect(0,-t.radius*.4,t.radius*2,t.radius*.4),e.strokeRect(0,-t.radius*.4,t.radius*2,t.radius*.4),S&&(e.shadowColor="#fbbf24",e.shadowBlur=20,e.fillStyle="#fbbf24",e.beginPath(),e.ellipse(t.radius,0,t.radius*.8,t.radius*.2,0,0,Math.PI*2),e.fill(),e.shadowBlur=0),e.restore(),e.fillStyle="#fbbf24";for(let D=0;D<4;D++){const j=Math.cos(n*3+D)*(t.radius+10),z=Math.sin(n*3+D)*(t.radius+10);e.beginPath(),e.arc(j,z,2*r,0,Math.PI*2),e.fill()}e.restore();break;case T.HEALER:const C=t.radius*.4,w=t.radius;e.fillRect(-w,-C,w*2,C*2),e.fillRect(-C,-w,C*2,w*2);break;case T.FRACTAL:e.save(),e.rotate(n*2),e.fillStyle=t.color,e.fillRect(-t.radius*.8,-t.radius*.8,t.radius*1.6,t.radius*1.6),e.fillStyle="#d8b4fe",e.globalAlpha=.8,e.fillRect(-t.radius*.8+6,-t.radius*.8-6,t.radius*1.6,t.radius*1.6),e.restore();break;case T.ORBITER:e.beginPath(),e.arc(0,0,t.radius*.6,0,Math.PI*2),e.fill(),e.strokeStyle=t.color,e.lineWidth=3*r,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.stroke();break;case T.DISRUPTOR:e.save(),e.save(),e.rotate(n*3),e.beginPath(),e.moveTo(0,-t.radius),e.lineTo(t.radius,t.radius*.8),e.lineTo(-t.radius,t.radius*.8),e.closePath(),e.strokeStyle=t.color,e.lineWidth=2*r,e.stroke(),e.restore(),e.save(),e.rotate(-n*3),e.beginPath(),e.moveTo(0,t.radius*.8),e.lineTo(t.radius*.6,-t.radius*.4),e.lineTo(-t.radius*.6,-t.radius*.4),e.closePath(),e.fillStyle="#fff",e.fill(),e.restore(),e.restore();break;case T.BOSS:const k=Math.sin(n*4)*.05+1;e.save(),e.rotate(a-Math.PI/2),e.scale(k,k),e.beginPath(),e.moveTo(0,-t.radius),e.lineTo(t.radius,0),e.lineTo(0,t.radius),e.lineTo(-t.radius,0),e.closePath();const I=e.createRadialGradient(0,-t.radius*.2,0,0,0,t.radius);I.addColorStop(0,"#fca5a5"),I.addColorStop(.6,t.color),I.addColorStop(1,"#7f1d1d"),e.fillStyle=I,e.fill(),e.strokeStyle="#fff",e.lineWidth=2*r,e.beginPath(),e.moveTo(0,-t.radius*.8),e.lineTo(t.radius*.5,0),e.lineTo(0,t.radius*.8),e.lineTo(-t.radius*.5,0),e.closePath(),e.stroke(),e.fillStyle="#450a0a",e.beginPath(),e.moveTo(-t.radius*.4,-t.radius*.1),e.lineTo(t.radius*.4,-t.radius*.1),e.lineTo(0,t.radius*.3),e.fill(),e.fillStyle="#fff",e.shadowColor="#ef4444",e.shadowBlur=15,e.beginPath(),e.arc(0,0,t.radius*.12,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.restore();break;case T.SLIME:e.save();const O=n*2,U=8;e.beginPath();for(let D=0;D<=U;D++){const j=Math.PI*2*D/U,z=t.radius*(1+.1*Math.sin(O+j*3)),N=Math.cos(j)*z,A=Math.sin(j)*z;D===0?e.moveTo(N,A):e.lineTo(N,A)}e.closePath();const K=e.createRadialGradient(0,0,0,0,0,t.radius);K.addColorStop(0,"#86efac"),K.addColorStop(.6,t.color),K.addColorStop(1,"#14532d"),e.fillStyle=K,e.fill(),e.fillStyle="rgba(255,255,255,0.3)";for(let D=0;D<3;D++){const j=Math.sin(n+D)*t.radius*.4,z=Math.cos(n*1.5+D)*t.radius*.4,N=t.radius*.15;e.beginPath(),e.arc(j,z,N,0,Math.PI*2),e.fill()}e.restore();break;case T.BROODMOTHER:e.save(),e.rotate(a);const W=n*8;e.strokeStyle="#581c87",e.lineWidth=4*r,e.lineCap="round",e.lineJoin="round";for(let D=-1;D<=1;D+=2)for(let j=0;j<4;j++){const z=j*.5,N=Math.sin(W+z)*(t.radius*.1);e.beginPath();const A=0,V=(j-1.5)*(t.radius*.3),B=0,F=D*(t.radius*1.2),ae=t.radius*.5-j*10,Be=D*(t.radius*1.8+N);e.moveTo(A,V),e.quadraticCurveTo(B,F,ae,Be),e.stroke(),e.fillStyle=t.color,e.beginPath(),e.arc(ae,Be,2*r,0,Math.PI*2),e.fill()}const te=Math.sin(n*3)*.05+1;e.fillStyle="#0f172a",e.beginPath(),e.ellipse(-t.radius*.4,0,t.radius*.7*te,t.radius*.6*te,0,0,Math.PI*2),e.fill();const ve=e.createRadialGradient(-t.radius*.4,0,0,-t.radius*.4,0,t.radius*.6);ve.addColorStop(0,"#be123c"),ve.addColorStop(.6,"rgba(0,0,0,0)"),e.fillStyle=ve,e.fill(),e.fillStyle=t.color,e.beginPath(),e.ellipse(t.radius*.4,0,t.radius*.35,t.radius*.3,0,0,Math.PI*2),e.fill(),e.fillStyle="#fef08a",e.beginPath(),e.arc(t.radius*.55,-5,3*r,0,Math.PI*2),e.arc(t.radius*.55,5,3*r,0,Math.PI*2),e.arc(t.radius*.65,0,4*r,0,Math.PI*2),e.fill(),e.restore();break;case T.WORM:e.save(),e.rotate(a);for(let D=4;D>0;D--){const j=t.radius*(.8-D*.12),z=-t.radius*(.6+D*.5),N=Math.sin(n*8+D)*(t.radius*.15);if(e.shadowColor="#8b5cf6",e.shadowBlur=10,e.fillStyle="#2e1065",e.beginPath(),e.arc(z,N,j,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.fillStyle="#8b5cf6",e.beginPath(),e.arc(z,N,j*.4,0,Math.PI*2),e.fill(),D>1){const A=-t.radius*(.6+(D-1)*.5),V=Math.sin(n*8+(D-1))*(t.radius*.15);e.strokeStyle="#8b5cf6",e.lineWidth=2*r,e.beginPath(),e.moveTo(z,N),e.lineTo(A,V),e.stroke()}}const Ce=Math.sin(n*6)*.1+1;e.fillStyle="#1e1b4b",e.beginPath(),e.moveTo(t.radius*.5,0),e.lineTo(-t.radius*.5,t.radius*.8),e.lineTo(-t.radius*.2,0),e.lineTo(-t.radius*.5,-t.radius*.8),e.fill(),e.fillStyle="#d8b4fe",e.shadowColor="#d8b4fe",e.shadowBlur=20,e.beginPath(),e.arc(0,0,t.radius*.5*Ce,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.fillStyle="#7c3aed",e.beginPath(),e.moveTo(0,-t.radius*.4),e.lineTo(t.radius*.8,-t.radius*.7),e.lineTo(t.radius*.4,-t.radius*.2),e.fill(),e.beginPath(),e.moveTo(0,t.radius*.4),e.lineTo(t.radius*.8,t.radius*.7),e.lineTo(t.radius*.4,t.radius*.2),e.fill(),e.restore();break;default:e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill()}if(t.shield>0&&(e.strokeStyle="#60a5fa",e.lineWidth=2*r,e.beginPath(),e.arc(0,0,t.radius+2,0,Math.PI*2*(t.shield/t.maxShield)),e.stroke()),t.hp<t.maxHp){const u=20*r,c=3*r,m=t.radius+5+c/2;e.fillStyle="#000",e.fillRect(-u/2,m,u,c),e.fillStyle="#ef4444",e.fillRect(-u/2,m,u*(t.hp/t.maxHp),c)}e.restore()},Ff=(e,t,n,r)=>{if(e.save(),e.translate(t.x,t.y),t.sourceType===y.TURRET_REPULSOR){const s=t.radius*(1+Math.sin(n*20)*.2),l=Math.min(1,t.life/60);e.beginPath(),e.arc(0,0,s,0,Math.PI*2),e.strokeStyle=`rgba(167, 139, 250, ${l})`,e.lineWidth=2*r,e.stroke(),e.beginPath(),e.arc(0,0,s*.6,0,Math.PI*2),e.strokeStyle=`rgba(255, 255, 255, ${l*.8})`,e.lineWidth=1*r,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle=`rgba(167, 139, 250, ${l})`,e.fill()}else if(t.sourceType===y.TURRET_BALLISTA){const s=Math.atan2(t.vy,t.vx);e.rotate(s),e.fillStyle="#020617",e.beginPath(),e.moveTo(t.radius*2,0),e.lineTo(-t.radius,t.radius*.6),e.lineTo(-t.radius*.5,0),e.lineTo(-t.radius,-t.radius*.6),e.closePath(),e.fill(),e.strokeStyle="#a855f7",e.lineWidth=2*r,e.shadowColor="#a855f7",e.shadowBlur=10,e.stroke(),e.shadowBlur=0,e.fillStyle="#fff",e.beginPath(),e.moveTo(0,0),e.lineTo(t.radius*1.5,0),e.lineTo(0,0),e.strokeStyle="#fff",e.lineWidth=1*r,e.stroke()}else if(t.damageType==="PHYSICAL"){const s=Math.atan2(t.vy,t.vx),l=Math.hypot(t.vx,t.vy);e.rotate(s);const i=Math.max(20,l*3),a=t.isElite?4:2,u=e.createLinearGradient(-i,0,0,0);u.addColorStop(0,"rgba(255, 255, 255, 0)"),u.addColorStop(1,t.color),e.fillStyle=u,e.beginPath(),e.moveTo(0,a/2),e.lineTo(-i,0),e.lineTo(0,-a/2),e.fill(),e.fillStyle="#ffffff",e.shadowColor=t.color,e.shadowBlur=t.isElite?10:5,e.beginPath(),e.ellipse(0,0,4,a,0,0,Math.PI*2),e.fill(),e.shadowBlur=0}else if(t.damageType==="ICE"&&t.radius>5){const s=Math.atan2(t.vy,t.vx);e.rotate(s),e.fillStyle="#fff",e.beginPath(),e.moveTo(t.radius*2,0),e.lineTo(0,t.radius*.6),e.lineTo(-t.radius,0),e.lineTo(0,-t.radius*.6),e.closePath();const l=e.createLinearGradient(-t.radius,0,t.radius*2,0);l.addColorStop(0,"#3b82f6"),l.addColorStop(.5,"#60a5fa"),l.addColorStop(1,"#ffffff"),e.fillStyle=l,e.fill(),e.strokeStyle="rgba(255,255,255,0.8)",e.lineWidth=2*r,e.stroke()}else e.fillStyle=t.color,t.isElite?(e.shadowColor=t.color,e.shadowBlur=15,e.strokeStyle="#fff",e.lineWidth=2,e.beginPath(),e.arc(0,0,t.radius*1.5,0,Math.PI*2),e.fill(),e.stroke()):(e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill());e.restore()},Hf=({engine:e,width:t,height:n})=>{const r=H.useRef(null),s=H.useRef(null);return H.useEffect(()=>{s.current||(s.current=new Pf)},[]),H.useEffect(()=>{const l=r.current;if(!l||!e)return;const i=l.getContext("2d");if(!i)return;const a=t/bt,u=n/Rt,c=1/a;let m;const p=()=>{const h=e.getState();if(!h)return;const x=Date.now()/1e3;s.current&&s.current.draw(i,t,n,h,x),i.save(),i.scale(a,u),h.cameraShake&&(h.cameraShake.x!==0||h.cameraShake.y!==0)&&i.translate(h.cameraShake.x,h.cameraShake.y),Lf(i,h.puddles,x,c),Uf(i,h,x,c),h.enemies.forEach(g=>{var E;i.save(),Bf(i,g,x,c,h.tower.x,h.tower.y),((E=h.hoveredEnemy)==null?void 0:E.id)===g.id&&(i.save(),i.translate(g.x,g.y),i.strokeStyle="#fff",i.lineWidth=2*c,i.beginPath(),i.arc(0,0,g.radius+5,0,Math.PI*2),i.stroke(),i.restore()),i.restore()}),h.projectiles.slice().sort((g,E)=>(g.renderLayer||0)-(E.renderLayer||0)).forEach(g=>{Ff(i,g,x,c)}),zf(i,h.particles,c),Df(i,h.floatingTexts,c),i.restore(),m=requestAnimationFrame(p)};return p(),()=>{cancelAnimationFrame(m)}},[e,t,n]),o.jsx("canvas",{ref:r,width:t,height:n,className:"block bg-slate-900"})},Jr=(e,t="w-6 h-6")=>{switch(e){case"VOLUME_ON":return o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:[o.jsx("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06zM18.584 5.106a.75.75 0 011.06 0c3.808 3.807 3.808 9.98 0 13.788a.75.75 0 11-1.06-1.06 8.25 8.25 0 000-11.668.75.75 0 010-1.06z"}),o.jsx("path",{d:"M15.932 7.757a.75.75 0 011.061 0 6 6 0 010 8.486.75.75 0 01-1.06-1.061 4.5 4.5 0 000-6.364.75.75 0 010-1.06z"})]});case"VOLUME_OFF":return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:o.jsx("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06zM17.78 9.22a.75.75 0 10-1.06 1.06L18.44 12l-1.72 1.72a.75.75 0 101.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L20.56 12l1.72-1.72a.75.75 0 10-1.06-1.06l-1.72 1.72-1.72-1.72z"})});case"FULLSCREEN_ENTER":return o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:t,children:o.jsx("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})});case"FULLSCREEN_EXIT":return o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:t,children:o.jsx("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-14v3h3v2h-5V5z"})});default:return null}},$t=(e,t,n="w-6 h-6")=>{const r={color:t},s=`${n} fill-current drop-shadow-md`;switch(e){case y.TURRET_ARROW:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})});case y.TURRET_SNIPER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9v-2h2v2zm0-4H9V8h2v4zm6 2h-2v-2h2v2zm0-4h-2V8h2v4z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]});case y.TURRET_CANNON:case y.TURRET_CLUSTER_BOMB:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"})});case y.TURRET_ICE:case y.TURRET_ICICLE:case y.TURRET_PERMAFROST:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M20 11h-4.17l2.08-2.08c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L13 11V6.83l2.08-2.08c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L12 5.09 10.33 3.34c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L11 6.83V11H6.83l-2.08-2.08c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L5.09 12 3.34 13.67c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L6.83 13H11v4.17l-2.08 2.08c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 18.91l1.67 1.75c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13 17.17V13h4.17l2.08 2.08c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L18.91 12 20.66 10.33z"})});case y.TURRET_GLACIAL_SPIKE:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M12 2L4 12l8 10 8-10L12 2zm0 3.5l4.5 6.5H7.5L12 5.5z"})});case y.TURRET_POISON:case y.TURRET_TOXIN:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M12 2c-3.31 0-6 2.69-6 6 0 2.15 1.13 4.02 2.83 5.08L12 22l3.17-8.92C16.87 12.02 18 10.15 18 8c0-3.31-2.69-6-6-6zm0 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})});case y.TURRET_ACID_CANNON:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",opacity:".3"}),o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})]});case y.TURRET_ARCANE:case y.TURRET_MAGIC_MISSILE:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"})});case y.TURRET_FIREBALL:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M16 6l4-4M19 8l4-2M18 10l5 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("circle",{cx:"12",cy:"12",r:"6"})]});case y.TURRET_ORBITAL:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14h-2v-5h2v5zm0-7h-2V7h2v3zm6 7h-2v-5h2v5zm0-7h-2V7h2v3z",opacity:"0"}),o.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",opacity:"0.5"}),o.jsx("path",{d:"M12 12 L22 2",stroke:"currentColor",strokeWidth:"3"}),o.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#fff"}),o.jsx("path",{d:"M4 20 L8 16",stroke:"currentColor",strokeWidth:"2",opacity:"0.5"})]});case y.TURRET_REPULSOR:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor"}),o.jsx("path",{d:"M12 6a6 6 0 0 1 6 6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("path",{d:"M18 12a6 6 0 0 1-6 6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("path",{d:"M12 18a6 6 0 0 1-6-6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("path",{d:"M6 12a6 6 0 0 1 6-6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.5",strokeLinecap:"round"}),o.jsx("path",{d:"M22 12a10 10 0 0 1-10 10",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.5",strokeLinecap:"round"}),o.jsx("path",{d:"M12 22a10 10 0 0 1-10-10",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.5",strokeLinecap:"round"}),o.jsx("path",{d:"M2 12a10 10 0 0 1 10-10",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.5",strokeLinecap:"round"})]});case y.TURRET_BALLISTA:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M22 2l-2.5 1.4L17 2l-1.4 2.5L13.1 2H2v11.1l2.5 1.4L2 17l1.4 2.5L5.9 22h11.1l-1.4-2.5L18.1 22l2.5-1.4L22 18.1V7l-2.5-1.4zM9 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm9.6-5.6l-3.2 1.6-1.6-3.2 1.6-3.2 3.2 1.6z"})});case y.TURRET_FLAMETHROWER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}),o.jsx("path",{d:"M16 6l4-4M19 8l4-2M18 10l5 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]});case y.TURRET_CHAOS_BOLT:case y.TURRET_CHAOS_BEAM:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M12 2L9 9l-7 3 7 3 3 7 3-7 7-3-7-3z"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"})]});case y.TURRET_CHAOS_RIFT:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.41 3.59-8 8-8s8 3.59 8 8-3.59 8-8 8-8-3.59-8-8zm8-6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z",opacity:".5"}),o.jsx("path",{d:"M12 8l2.5 4-2.5 4-2.5-4z"})]});case y.TURRET_OMNI:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("circle",{cx:"12",cy:"12",r:"4"}),o.jsx("path",{d:"M12 2v4M12 18v4M22 12h-4M6 12H2M19.07 4.93l-2.83 2.83M7.76 16.24l-2.83 2.83M19.07 19.07l-2.83-2.83M7.76 7.76L4.93 4.93",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]});case y.STAT_DAMAGE:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M7 18h2v-2h-2v2zm0-4h2v-2h-2v2zm4 4h2v-2h-2v2zm0-4h2v-2h-2v2zm-4-4h2V8h-2v2zm4 0h2V8h-2v2zm-2-2h2V6h-2v2zm-2-2h2V4h-2v2zm6 2h2V6h-2v2zm0-4h2V2h-2v2z"}),o.jsx("path",{d:"M21 11c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 4.63 3.54 8.43 8 8.94V22h2v-2.06c4.46-.51 8-4.31 8-8.94z",opacity:".3"})]});case y.STAT_SPEED:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M7 2v11h3v9l7-12h-4l4-8z"})});case y.STAT_RANGE:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),o.jsx("circle",{cx:"12",cy:"11.5",r:"2.5"})]});case y.STAT_REGEN:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 9H9v2H7v-2H5v-2h2V8h2v2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V6h2v2z"})});case y.STAT_REGEN_PCT:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M2 20h20v-2H2v2zm2-3h2v2H4v-2zm-2-4h20v-2H2v2zm2-3h2v2H4v-2zM2 4v2h20V4H2zm4 3H4V5h2v2zm-2 5h2V9H4v3z"})});case y.HEAL_TOWER:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 13h-2v-3h-3v-2h3V8h2v3h3v2h-3v3z"})});case y.ECON_GPS:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M10 2v2.26l2 1.33V4h10v15h-2.7c-1.09.76-2.3 1.26-3.59 1.26-1.12 0-2.19-.38-3.08-.98l-1.63 1.63V22h-2v-3.59l-1.29-1.29c-.92.52-1.99.88-3.12.88C2.39 18 0 15.61 0 12.8 0 10 2.39 7.61 5.59 7.61c1.13 0 2.2.36 3.12.88L10 7.2V2zm-2.91 9.29l-1.64 1.64c-.28-.09-.58-.13-.89-.13-1.48 0-2.69 1.21-2.69 2.69s1.21 2.69 2.69 2.69 2.69-1.21 2.69-2.69c0-.3-.05-.59-.14-.87l1.64-1.64c.87.96 2.12 1.57 3.52 1.57 2.37 0 4.29-1.92 4.29-4.29S14.68 6.27 12.31 6.27c-1.4 0-2.66.61-3.53 1.58l-1.69-1.13V5H4v13h2v-5.36l1.09 1.65z"})});case y.ECON_BOUNTY:return o.jsx("svg",{viewBox:"0 0 24 24",className:s,style:r,children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.15-1.46-3.27-3.4h1.97c.1 1.05.82 1.83 2.62 1.83 1.52 0 2.49-.74 2.49-2.03 0-1.06-.62-1.65-3.33-2.26-3.33-.79-4.91-2.15-4.91-4.56 0-1.91 1.43-3.24 3.13-3.59V2h2.67v1.95c1.6.36 2.91 1.42 2.97 3.35h-1.93c-.1-.92-.71-1.65-2.3-1.65-1.46 0-2.31.72-2.31 1.89 0 1.04.68 1.6 3.35 2.18 3.32.73 4.9 2.1 4.9 4.65-.01 2.05-1.47 3.4-3.18 3.76z"})});case y.ECON_REFINERY:return o.jsxs("svg",{viewBox:"0 0 24 24",className:s,style:r,children:[o.jsx("path",{d:"M12 2l-5.5 9h11z"}),o.jsx("path",{d:"M12 22l5.5-9h-11z",opacity:"0.6"}),o.jsx("rect",{x:"7",y:"11",width:"10",height:"2"})]});default:return o.jsx("div",{style:{backgroundColor:t},className:"w-4 h-4 rounded-full"})}},co=(e,t)=>{const n={color:t},r="w-6 h-6 fill-current drop-shadow-md";switch(e){case P.NUKE:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 2c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-3.58-8-8-8zm-1 3h2v5h-2V7zm0 6h2v2h-2v-2z"})});case P.INVULNERABILITY:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 2.18l7 3.12v4.7c0 4.67-3.13 8.96-7 10.16-3.87-1.2-7-5.49-7-10.16v-4.7l7-3.12z"})});case P.OVERCLOCK:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M11 9.47V2h2v7.47c1.67.68 2.82 2.3 2.82 4.03 0 2.48-2.02 4.5-4.5 4.5s-4.5-2.02-4.5-4.5c0-1.73 1.15-3.35 2.82-4.03zM7 13.5c0 2.33 2.17 4.19 4.5 4.19s4.5-1.86 4.5-4.19S13.83 9.31 11.5 9.31 7 11.17 7 13.5zM20.37 5.62l-1.4 1.41C20.25 8.27 21 9.8 21 11.5c0 2.45-1.02 4.66-2.66 6.22l1.41 1.41C21.75 17.26 23 14.53 23 11.5c0-2.11-.92-4-2.63-5.88zM4.98 7.04l-1.4-1.42C1.91 7.51 1 9.4 1 11.5c0 3.03 1.25 5.76 3.25 7.63l1.41-1.41C4.02 16.16 3 13.95 3 11.5c0-1.7.75-3.23 2.03-4.47z"})});case P.RANGE_BOOST:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:n,children:[o.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),o.jsx("path",{d:"M21 4H18v2h3V4zm-3 14v2h3v-2h-3zM3 4H0v2h3V4zm0 14H0v2h3v-2z"})]});case P.PASSIVE_PHYSICAL:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})});case P.PASSIVE_MAGIC:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M12 2l-2.4 7.2h-7.6l6 4.8-2.4 7.2 6-4.8 6 4.8-2.4-7.2 6-4.8h-7.6z"})});case P.PASSIVE_FIRE:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23-1.07 1.33-3.4 4.17-2.67 7.24-2.93-2.61-2.9-7.53-2.9-7.53C7.4 5.38 3 9.77 3 14.81c0 5.07 4.02 9.19 9 9.19s9-4.12 9-9.19c0-1.01-.17-1.97-.52-2.46zM12 21c-2.7 0-4.9-2.3-4.9-5.14 0-1.07.3-2.06.81-2.91.59 1.94 2.82 2.3 2.82 5.05h.54c0-2.46 2.45-3.33 2.53-6.22 1.82 1.9 2.1 5.92-1.8 9.22z"})});case P.PASSIVE_ICE:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M20 11h-4.17l2.08-2.08c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L13 11V6.83l2.08-2.08c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L12 5.09 10.33 3.34c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L11 6.83V11H6.83l-2.08-2.08c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L5.09 12 3.34 13.67c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L6.83 13H11v4.17l-2.08 2.08c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 18.91l1.67 1.75c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13 17.17V13h4.17l2.08 2.08c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L18.91 12 20.66 10.33z"})});case P.PASSIVE_POISON:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M12 2c-3.31 0-6 2.69-6 6 0 2.15 1.13 4.02 2.83 5.08L12 22l3.17-8.92C16.87 12.02 18 10.15 18 8c0-3.31-2.69-6-6-6zm0 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})});case P.PASSIVE_CHAOS:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:n,children:o.jsx("path",{d:"M12 2L9 9l-7 3 7 3 3 7 3-7 7-3-7-3z"})});default:return o.jsx("div",{style:{backgroundColor:t},className:"w-4 h-4 rounded-full"})}},oi=(e,t,n="w-6 h-6")=>{const r=`${n} fill-current`,s={color:t};switch(e){case T.GRUNT:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:s,children:o.jsx("path",{d:"M12 2L2 12l10 10 10-10L12 2zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"})});case T.RUNNER:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:s,children:o.jsx("path",{d:"M22 12L2 2l3 10L2 22l20-10z"})});case T.TANK:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("path",{d:"M15.5 5.5L8.5 5.5L5.5 8.5L5.5 15.5L8.5 18.5L15.5 18.5L18.5 15.5L18.5 8.5L15.5 5.5Z"}),o.jsx("path",{d:"M19 4C21 8 21 16 19 20",stroke:"currentColor",strokeWidth:"2",fill:"none"})]});case T.STALKER:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:s,children:o.jsx("path",{d:"M22 12 L4 2 L8 12 L4 22 Z"})});case T.SWARMER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("circle",{cx:"12",cy:"12",r:"6"}),o.jsx("path",{d:"M6 12L2 8M6 12L2 16M18 12L22 8M18 12L22 16M8 8L4 4M16 8L20 4M8 16L4 20M16 16L20 20",stroke:"currentColor",strokeWidth:"2",fill:"none"})]});case T.HEALER:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:s,children:o.jsx("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})});case T.FRACTAL:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("rect",{x:"4",y:"8",width:"12",height:"12",opacity:"1.0"}),o.jsx("rect",{x:"8",y:"4",width:"12",height:"12",fill:"#d8b4fe",fillOpacity:"0.8"})]});case T.ORBITER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),o.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2"})]});case T.DISRUPTOR:return o.jsx("svg",{viewBox:"0 0 24 24",className:r,style:s,children:o.jsx("path",{d:"M12 2L2 22h20L12 2zm0 4l6 12H6l6-12z"})});case T.WELDER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("rect",{x:"8",y:"2",width:"8",height:"6"}),o.jsx("rect",{x:"10",y:"8",width:"4",height:"10"}),o.jsx("circle",{cx:"12",cy:"18",r:"4"}),o.jsx("path",{d:"M12 0L10 3L14 3Z",fill:"#fbbf24"})]});case T.SCAVENGER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("path",{d:"M3 10 L21 10 L19 4 L5 4 Z"}),o.jsx("rect",{x:"3",y:"10",width:"18",height:"10"}),o.jsx("circle",{cx:"12",cy:"10",r:"2",fill:"#fff"})]});case T.BOSS:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("path",{d:"M12 1L1 12l11 11 11-11L12 1zm0 16c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}),o.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]});case T.BROODMOTHER:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("ellipse",{cx:"12",cy:"16",rx:"6",ry:"5"}),o.jsx("circle",{cx:"12",cy:"9",r:"3"}),o.jsx("path",{d:"M9 10 L4 6 M15 10 L20 6 M9 14 L3 14 M15 14 L21 14 M8 17 L4 20 M16 17 L20 20",stroke:"currentColor",strokeWidth:"2",fill:"none"})]});case T.WORM:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("circle",{cx:"12",cy:"12",r:"6"}),o.jsx("circle",{cx:"6",cy:"12",r:"4",opacity:"0.6"}),o.jsx("circle",{cx:"18",cy:"12",r:"4",opacity:"0.6"})]});case T.SLIME:return o.jsxs("svg",{viewBox:"0 0 24 24",className:r,style:s,children:[o.jsx("path",{d:"M12 2C7 2 3 7 3 12c0 2.5 1 5 3 7 2 2 5 3 6 3s4-1 6-3c2-2 3-4.5 3-7 0-5-4-10-9-10z",opacity:"0.5"}),o.jsx("circle",{cx:"8",cy:"10",r:"2",fill:"white",opacity:"0.6"}),o.jsx("circle",{cx:"16",cy:"14",r:"3",fill:"white",opacity:"0.4"}),o.jsx("path",{d:"M12 2C6 2 2 8 2 12c0 6 5 10 10 10s10-4 10-10C22 8 18 2 12 2zm0 18c-3 0-6-3-6-8s3-8 6-8 6 3 6 8-3 8-6 8z",fill:"none",stroke:"currentColor",strokeWidth:"2"})]});default:return o.jsx("div",{style:{backgroundColor:t},className:"w-4 h-4 rounded-full"})}},Vf=["PHYSICAL","MAGIC","FIRE","ICE","POISON","CHAOS"],Gf=e=>{switch(e){case"PHYSICAL":return P.PASSIVE_PHYSICAL;case"MAGIC":return P.PASSIVE_MAGIC;case"FIRE":return P.PASSIVE_FIRE;case"ICE":return P.PASSIVE_ICE;case"POISON":return P.PASSIVE_POISON;case"CHAOS":return P.PASSIVE_CHAOS}},Sa=({gameState:e,onBuyItem:t,onReroll:n,onToggleTargeting:r,onOpenCodex:s,onOpenTechShop:l,onRestart:i,onMainMenu:a,onToggleSpeed:u,idPrefix:c="hud",className:m="absolute inset-0 pointer-events-none",layout:p="desktop"})=>{const[h,x]=H.useState(null),[b,g]=H.useState(null),[E,f]=H.useState(null),[d,v]=H.useState(!1),[S,R]=H.useState(Y.isAudioMuted()),[C,w]=H.useState(!1),k=e.gold>=e.rerollCost;H.useEffect(()=>Y.subscribe(()=>{R(Y.isAudioMuted())}),[]),H.useEffect(()=>{const N=()=>{w(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",N),()=>document.removeEventListener("fullscreenchange",N)},[]);const I=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(N=>{console.error("Fullscreen failed:",N)})};H.useEffect(()=>{h&&(e.shopItems.some(A=>A.id===h.id)||x(null))},[e.shopItems,h]);const O=()=>{v(!0)},U=()=>{v(!1),i()},K=()=>{v(!1),a()},W=()=>{v(!1)},te=N=>{switch(N){case 1:return"border-slate-500";case 2:return"border-cyan-500";case 3:return"border-purple-500";case 4:return"border-yellow-400 shadow-[0_0_12px_rgba(250,204,21,0.6)] animate-pulse";default:return"border-slate-600"}},ve=N=>{switch(N){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"LGD";default:return""}},Ce=N=>{switch(N){case 1:return"text-slate-400";case 2:return"text-cyan-400";case 3:return"text-purple-400";case 4:return"text-yellow-400 font-black tracking-wider";default:return"text-slate-400"}},D=Object.values(En).filter(N=>N.category==="ACTIVE"),z=e.tower.hp/e.tower.maxHp<.3?"text-red-500":"text-green-400";return o.jsxs("div",{className:`${m} flex flex-col justify-between p-0 z-20 overflow-hidden`,children:[d&&o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm pointer-events-auto animate-fade-in",children:o.jsxs("div",{className:"bg-slate-900 border-2 border-slate-600 rounded-lg p-6 w-[90%] max-w-sm shadow-2xl flex flex-col gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-wider mb-2",children:"Abort Mission?"}),o.jsx("p",{className:"text-sm text-slate-400",children:"Current run progress will be lost."})]}),o.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[o.jsx("button",{onClick:U,className:"w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold uppercase rounded tracking-wide shadow-lg transition-colors",children:"Restart Run"}),o.jsx("button",{onClick:K,className:"w-full py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold uppercase rounded tracking-wide border border-slate-500 transition-colors",children:"Main Menu"})]}),o.jsx("button",{onClick:W,className:"mt-2 text-slate-500 hover:text-white text-xs font-bold uppercase tracking-widest transition-colors",children:"Resume Game"})]})}),p==="mobile"&&o.jsxs("div",{className:"absolute inset-0 flex justify-between pointer-events-none",children:[o.jsxs("div",{className:"pointer-events-auto flex flex-col h-full w-[80px] sm:w-[90px] bg-slate-900/60 backdrop-blur-sm border-r border-slate-700/50 p-1 gap-1 transition-all",children:[o.jsxs("div",{id:`${c}-stats-mobile`,className:"bg-slate-800/80 rounded p-1 border border-slate-700 flex flex-col gap-0.5 shadow-lg shrink-0",children:[o.jsxs("div",{className:"text-yellow-500 font-bold text-xs text-center leading-tight",children:[e.gold,"g"]}),o.jsx("div",{className:"h-px bg-slate-600/50 w-full"}),o.jsxs("div",{className:"text-[9px] text-slate-400 text-center leading-tight",children:["HP ",o.jsx("span",{className:`font-mono font-bold ${z}`,children:Math.ceil(e.tower.hp)})]}),o.jsx("div",{className:"text-[8px] text-slate-500 text-center uppercase leading-none mt-0.5",children:e.score})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center items-center gap-1 min-h-0",children:D.map(N=>{const A=e.abilities[N.type];if(!A.unlocked)return null;const V=A.cooldown>0,B=N.maxCharges!==1/0&&A.charges<=0,F=V?A.cooldown/A.maxCooldown*100:0,ae=A.activeTimer>0;return o.jsxs("button",{onClick:()=>window.dispatchEvent(new KeyboardEvent("keydown",{key:N.hotkey})),className:`
                                    w-10 h-10 sm:w-11 sm:h-11 rounded border flex items-center justify-center relative overflow-hidden transition-all shadow-md active:scale-95 shrink-0
                                    ${B?"bg-slate-900/80 border-slate-700 opacity-50 grayscale":ae?"bg-white/90 border-white shadow-[0_0_10px_white]":V?"bg-slate-800/80 border-slate-600":"bg-slate-700/80 border-slate-500 hover:border-white"}
                                `,children:[V&&o.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-black/60",style:{height:`${F}%`}}),o.jsx("div",{className:"w-5 h-5 rounded-full shadow-sm",style:{backgroundColor:N.color}}),N.maxCharges!==1/0&&o.jsx("div",{className:"absolute bottom-0 right-0 text-[8px] font-mono font-bold text-white bg-black/60 px-0.5 rounded-tl",children:A.charges})]},N.type)})}),o.jsxs("div",{className:"grid grid-cols-2 gap-1 shrink-0",children:[o.jsxs("button",{id:`${c}-btn-speed-mobile`,onClick:u,className:`h-7 flex items-center justify-center rounded border text-[9px] font-bold uppercase transition-all ${e.gameSpeed===2?"bg-yellow-500 text-black border-yellow-600 shadow":"bg-slate-700/80 text-slate-300 border-slate-600"}`,children:[e.gameSpeed,"x"]}),o.jsx("button",{onClick:I,className:"h-7 flex items-center justify-center rounded bg-slate-700/80 border border-slate-600 text-slate-300 hover:text-white",children:Jr(C?"FULLSCREEN_EXIT":"FULLSCREEN_ENTER","w-3 h-3")}),o.jsx("button",{id:`${c}-btn-tech-mobile`,onClick:l,className:"h-7 flex items-center justify-center rounded bg-cyan-900/40 border border-cyan-700/50 text-cyan-400 active:bg-cyan-800",children:o.jsx("svg",{className:"w-3.5 h-3.5 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"})})}),o.jsx("button",{id:`${c}-btn-codex-mobile`,onClick:s,className:"h-7 flex items-center justify-center rounded bg-slate-700/60 border border-slate-500 text-white active:bg-slate-600",children:o.jsx("svg",{className:"w-3.5 h-3.5 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})})}),o.jsx("button",{id:`${c}-btn-mute-mobile`,onClick:()=>Y.toggleMute(),className:"h-5 flex items-center justify-center rounded bg-slate-800 border border-slate-600 text-slate-400 hover:text-white",children:Jr(S?"VOLUME_OFF":"VOLUME_ON","w-3 h-3")}),o.jsx("button",{onClick:O,className:"h-5 flex items-center justify-center rounded bg-red-900/30 border border-red-800/50 text-red-400 text-[8px] uppercase font-bold hover:bg-red-900/50",children:"Menu"})]})]}),o.jsxs("div",{id:`${c}-shop-container`,className:"pointer-events-auto flex flex-col h-full w-[80px] sm:w-[90px] bg-slate-900/60 backdrop-blur-sm border-l border-slate-700/50 p-1 gap-1",children:[o.jsxs("div",{className:"bg-slate-800/80 rounded border border-slate-700 p-1 flex flex-col gap-1 shadow-lg shrink-0",children:[o.jsxs("button",{onClick:n,disabled:!k,className:`
                                w-full py-1 rounded flex items-center justify-center gap-1 border transition-all active:scale-95
                                ${k?"bg-slate-700 hover:bg-slate-600 text-white border-slate-500":"bg-slate-800 text-slate-600 border-slate-700 cursor-not-allowed"}
                            `,children:[o.jsx("span",{className:"text-[10px] font-bold",children:""}),o.jsx("span",{className:`text-[9px] font-mono ${k?"text-yellow-500":"text-slate-600"}`,children:e.rerollCost})]}),o.jsx("div",{className:"h-1 w-full bg-slate-900 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-cyan-500 transition-all duration-100 ease-linear",style:{width:`${e.shopTimer/Pc*100}%`}})})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-1 min-h-0",children:[e.shopItems.map(N=>{const A=e.gold>=N.cost,V=te(N.tier);return o.jsxs("button",{onClick:()=>t(N),disabled:!A,className:`
                                        relative flex flex-col items-center justify-center p-0.5 rounded border w-full flex-1 min-h-0 transition-all active:scale-95
                                        ${A?`bg-slate-800/80 hover:bg-slate-700 ${V}`:"bg-slate-900/50 border-slate-800 opacity-50 grayscale"}
                                    `,children:[o.jsx("div",{className:"absolute top-0.5 left-1 text-[7px] font-bold text-slate-500 leading-none",children:ve(N.tier)}),o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center drop-shadow-md",children:$t(N.type,N.color,"w-4 h-4 sm:w-6 sm:h-6")})}),o.jsx("div",{className:`text-[8px] sm:text-[9px] font-mono font-bold leading-none px-1 rounded mb-0.5 ${A?"text-yellow-500 bg-black/40":"text-slate-600"}`,children:N.cost})]},N.id)}),e.shopItems.length===0&&o.jsx("div",{className:"text-[9px] text-slate-600 text-center italic py-4 flex-1 flex items-center justify-center",children:"Depleted"})]})]})]}),p==="desktop"&&o.jsxs("div",{className:"flex flex-row justify-between items-start h-full pointer-events-none p-4 w-full",children:[o.jsxs("div",{className:"w-[300px] shrink-0 pointer-events-auto flex flex-col gap-2 animate-fade-in-left h-full pb-3",children:[o.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-md border border-slate-600/50 p-3 rounded-lg shadow-xl shrink-0",children:[o.jsxs("div",{id:`${c}-resources-desktop`,className:"flex justify-between items-center border-b border-slate-700/50 pb-2 mb-2",children:[o.jsxs("span",{className:"text-yellow-500 font-bold text-2xl drop-shadow-sm",children:[e.gold," ",o.jsx("span",{className:"text-sm text-yellow-600/80",children:"GOLD"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-400 uppercase",children:"Score"}),o.jsx("div",{className:"text-base font-mono text-white",children:e.score})]})]}),o.jsx("div",{className:"flex gap-2 mb-2",children:o.jsx("button",{id:`${c}-btn-codex-desktop`,onClick:s,className:"w-full bg-slate-700/60 hover:bg-slate-600/80 text-sm font-bold text-white py-2 rounded border border-slate-500/50 transition-colors flex items-center justify-center gap-1",children:"CODEX"})}),o.jsx("button",{id:`${c}-btn-tech-desktop`,onClick:l,className:"w-full bg-gradient-to-r from-cyan-900/60 to-blue-900/60 hover:from-cyan-800/80 hover:to-blue-800/80 text-sm font-bold text-cyan-200 py-2.5 rounded border border-cyan-700/50 transition-all shadow-[0_0_10px_rgba(34,211,238,0.2)] hover:shadow-[0_0_15px_rgba(34,211,238,0.4)] uppercase tracking-wider flex items-center justify-center gap-2",children:"Tech Tree"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{id:`${c}-btn-speed-desktop`,onClick:u,className:`flex-1 py-1.5 rounded text-xs font-bold font-mono transition-all border ${e.gameSpeed===2?"bg-yellow-500 text-black border-yellow-600 shadow-[0_0_10px_rgba(234,179,8,0.4)]":"bg-slate-900/40 text-slate-400 border-slate-700 hover:bg-slate-800"}`,children:[e.gameSpeed,"x"]}),o.jsx("button",{id:`${c}-btn-mute-desktop`,onClick:()=>Y.toggleMute(),className:"w-8 py-1.5 flex items-center justify-center rounded bg-slate-900/40 hover:bg-slate-800 border border-slate-700 text-slate-400 hover:text-white transition-colors",title:S?"Unmute":"Mute",children:Jr(S?"VOLUME_OFF":"VOLUME_ON","w-4 h-4")}),o.jsx("button",{onClick:O,className:"flex-1 bg-red-900/20 hover:bg-red-900/40 text-xs text-red-400 py-1.5 rounded border border-red-900/30 transition-colors",children:"ABORT"})]})]}),o.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md border border-slate-700/30 p-2 rounded-lg flex flex-col shadow-lg shrink-0",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 border-b border-slate-700/50 pb-1",children:"System Output"}),o.jsxs("div",{className:"grid grid-cols-3 gap-1.5 text-xs",children:[o.jsxs("div",{id:`${c}-panel-integrity`,className:"col-span-3 bg-slate-900/40 rounded p-1.5 flex justify-between items-center px-3 mb-1 border border-slate-700/30",children:[o.jsx("div",{className:"text-slate-400 text-xs font-bold tracking-wide",children:"INTEGRITY"}),o.jsxs("div",{className:`font-mono font-black text-lg ${z} flex items-baseline`,children:[Math.ceil(e.tower.hp),o.jsx("span",{className:"text-slate-600 mx-1 text-sm font-bold",children:"/"}),o.jsx("span",{className:"text-slate-500 text-sm font-bold",children:e.tower.maxHp})]})]}),o.jsxs("div",{className:"text-center bg-slate-900/40 rounded p-1.5",children:[o.jsxs("div",{className:"text-red-400 font-bold",children:[e.tower.statMultipliers.damage.toFixed(1),"x"]}),o.jsx("div",{className:"text-slate-500 text-[10px]",children:"Damage Multi"})]}),o.jsxs("div",{className:"text-center bg-slate-900/40 rounded p-1.5",children:[o.jsxs("div",{className:"text-yellow-400 font-bold",children:[e.tower.statMultipliers.speed.toFixed(1),"x"]}),o.jsx("div",{className:"text-slate-500 text-[10px]",children:"Fire Rate Multi"})]}),o.jsxs("div",{className:"text-center bg-slate-900/40 rounded p-1.5",children:[o.jsxs("div",{className:"text-blue-400 font-bold",children:[e.tower.statMultipliers.range.toFixed(1),"x"]}),o.jsx("div",{className:"text-slate-500 text-[10px]",children:"Range Multi"})]}),o.jsxs("div",{className:"text-center bg-slate-900/40 rounded p-1.5 col-span-1.5",children:[o.jsxs("div",{className:"text-amber-300 font-bold",children:["+",e.tower.goldPerSecond,"/s"]}),o.jsx("div",{className:"text-slate-500 text-[10px]",children:"Gold Per Second"})]}),o.jsxs("div",{className:"text-center bg-slate-900/40 rounded p-1.5 col-span-1.5",children:[o.jsxs("div",{className:"text-amber-500 font-bold",children:[Math.round(e.tower.statMultipliers.goldValue*100),"%"]}),o.jsx("div",{className:"text-slate-500 text-[10px]",children:"Bounty Multipler"})]})]})]}),o.jsxs("div",{id:`${c}-shop-container`,className:"bg-slate-900/60 backdrop-blur-md border border-slate-600/50 rounded-lg p-2 shadow-xl flex flex-col gap-1 pointer-events-auto flex-1 min-h-0",children:[o.jsx("div",{className:"flex items-center justify-between border-b border-slate-700/50 pb-1.5 shrink-0",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-white font-bold uppercase tracking-widest text-xs",children:"Void Market"}),o.jsxs("div",{className:"text-[10px] font-mono text-cyan-400 bg-cyan-900/20 px-1.5 rounded border border-cyan-800",children:[(e.shopTimer/60).toFixed(0),"s"]})]})}),o.jsxs("button",{onClick:n,disabled:!k,className:`
                            w-full py-1 rounded text-xs font-bold uppercase tracking-wider border transition-all active:scale-95 flex justify-center gap-2 shrink-0
                            ${k?"bg-slate-700/60 hover:bg-slate-600/80 text-white border-slate-500 hover:border-yellow-500":"bg-slate-800/40 text-slate-500 border-slate-700 cursor-not-allowed"}
                        `,children:[o.jsx("span",{children:" Reroll"}),o.jsxs("span",{className:`px-1.5 rounded ${k?"bg-black/40 text-yellow-500":"bg-black/20 text-slate-600"}`,children:[e.rerollCost,"g"]})]}),o.jsx("div",{className:"flex-1 min-h-0",children:o.jsx("div",{className:"grid grid-cols-2 grid-rows-3 gap-1.5 h-full",children:e.shopItems.length===0?o.jsx("div",{className:"col-span-2 row-span-3 text-slate-500 italic p-4 text-center text-xs border border-slate-800/50 rounded bg-slate-900/30 flex items-center justify-center",children:"Depleted"}):e.shopItems.map(N=>{const A=e.gold>=N.cost,V=te(N.tier),B=Ce(N.tier);return o.jsxs("button",{onClick:()=>A&&t(N),onMouseEnter:()=>x(N),onMouseLeave:()=>x(null),className:`
                                                relative flex flex-col items-center justify-center p-1 rounded border transition-all duration-300 w-full h-full min-h-0
                                                ${A?`active:scale-95 bg-slate-800/80 hover:bg-slate-700 ${V} hover:shadow-lg cursor-pointer`:"border-slate-800/50 bg-slate-900/30 opacity-50 cursor-not-allowed grayscale"}
                                            `,children:[o.jsx("div",{className:"absolute top-0 right-1 font-mono text-[7px] lg:text-[9px] font-bold opacity-60",children:o.jsx("span",{className:B,children:ve(N.tier)})}),o.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pt-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[o.jsx("span",{className:`font-mono font-bold text-[10px] lg:text-xs xl:text-sm ${A?"text-yellow-500":"text-slate-600"}`,children:N.cost}),o.jsx("div",{className:"w-6 h-6 lg:w-8 lg:h-8 xl:w-10 xl:h-10 rounded flex items-center justify-center shadow-md bg-black/40 border border-white/10",style:{boxShadow:`0 0 5px ${N.color}20`},children:$t(N.type,N.color,"w-3.5 h-3.5 lg:w-5 lg:h-5 xl:w-6 xl:h-6")})]}),o.jsx("span",{className:`text-[9px] lg:text-[10px] xl:text-xs font-bold text-center leading-none px-0.5 w-full truncate ${A?"text-gray-300":"text-gray-600"}`,children:N.name})]})]},N.id)})})})]})]}),o.jsxs("div",{className:"w-[300px] shrink-0 pointer-events-auto flex flex-col gap-4 animate-fade-in-right h-full overflow-y-auto scrollbar-none pb-4",children:[o.jsxs("a",{href:"https://buymeacoffee.com/swordandbored",target:"_blank",rel:"noopener noreferrer",className:"bg-yellow-500/10 hover:bg-yellow-500/20 backdrop-blur-md border border-yellow-500/30 p-2.5 rounded-lg shadow-lg flex items-center justify-between group transition-all duration-300 hover:scale-105 shrink-0",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs uppercase font-bold text-yellow-500 group-hover:text-yellow-400",children:"Enjoying the game?"}),o.jsx("span",{className:"text-xs text-yellow-200/60 group-hover:text-yellow-200 font-mono",children:"Buy me a coffee "})]}),o.jsx("div",{className:"text-xl animate-bounce",children:""})]}),o.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-3 rounded border border-slate-700/50 text-sm shadow-lg shrink-0",children:[o.jsx("strong",{className:"text-yellow-500 block mb-2 border-b border-slate-700/50 pb-1 uppercase text-xs tracking-wider",children:"High Command Records"}),e.leaderboard&&e.leaderboard.length>0?o.jsx("ul",{className:"space-y-1.5",children:e.leaderboard.slice(0,5).map((N,A)=>o.jsxs("li",{className:"flex justify-between items-center bg-slate-800/40 p-1.5 px-2 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:`font-mono font-bold ${A===0?"text-yellow-400":"text-slate-500"}`,children:["#",A+1]}),o.jsx("span",{className:"text-slate-200 font-bold truncate max-w-[80px]",children:N.name})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-yellow-500 font-mono",children:N.score}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["Wave ",N.wave]})]})]},A))}):o.jsx("div",{className:"text-center text-slate-500 italic py-2 text-xs",children:"No records found."})]}),o.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md border border-slate-700/30 p-2 rounded-lg flex flex-col shadow-lg shrink-0",children:[o.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 flex justify-between items-center border-b border-slate-700/50 pb-1",children:[o.jsx("span",{children:"ELEMENTAL"}),o.jsx("span",{className:"text-[9px] text-slate-600 bg-slate-900 px-1 rounded",children:"MASTERY"})]}),o.jsx("div",{className:"grid grid-cols-6 gap-1",children:Vf.map(N=>{const A=e.tower.masteryLevels[N]||0,V=ut[N];return o.jsxs("div",{onMouseEnter:()=>g({type:N,level:A}),onMouseLeave:()=>g(null),className:`
                                        aspect-square rounded border flex flex-col items-center justify-center cursor-help transition-all relative group
                                        ${A>0?"bg-slate-800 border-slate-600 hover:border-white hover:bg-slate-700":"bg-slate-900/30 border-slate-800 opacity-40"}
                                    `,style:{borderColor:A>0?V:void 0},children:[o.jsx("div",{className:"w-3.5 h-3.5 lg:w-4 lg:h-4 opacity-90",children:co(Gf(N),A>0?V:"#64748b")}),A>0&&o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-black/80 text-[7px] lg:text-[8px] font-mono font-bold leading-none px-0.5 rounded text-white border border-slate-700",children:A})]},N)})})]}),D.length>0&&o.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-3 rounded border border-slate-700/50 shadow-lg shrink-0",children:[o.jsx("strong",{className:"text-cyan-400 block mb-2 border-b border-slate-700/50 pb-1 uppercase text-xs tracking-wider",children:"Active Protocols"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:D.map(N=>{const A=e.abilities[N.type];if(!A.unlocked)return o.jsx("div",{className:"aspect-square rounded bg-slate-800/30 border border-slate-700/50 flex items-center justify-center opacity-40",children:o.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-700"})},N.type);const V=A.cooldown>0,B=N.maxCharges!==1/0&&A.charges<=0,F=V?A.cooldown/A.maxCooldown*100:0,ae=A.activeTimer>0;return o.jsx("div",{className:"relative group aspect-square",onClick:()=>window.dispatchEvent(new KeyboardEvent("keydown",{key:N.hotkey})),onMouseEnter:()=>f(N),onMouseLeave:()=>f(null),children:o.jsxs("div",{className:`
                                            w-full h-full rounded border flex items-center justify-center relative overflow-hidden transition-all backdrop-blur-sm cursor-pointer
                                            ${B?"bg-slate-900/80 border-slate-700 opacity-50 grayscale":ae?"bg-white/90 border-white shadow-[0_0_10px_white]":V?"bg-slate-800/80 border-slate-600":"bg-slate-800/60 border-slate-500 hover:border-white hover:bg-slate-700/80 active:scale-95"}
                                        `,children:[V&&o.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-black/60",style:{height:`${F}%`}}),o.jsx("div",{className:"w-5 h-5 rounded-full shadow-sm",style:{backgroundColor:N.color}}),o.jsx("div",{className:"absolute top-0.5 right-1 text-[9px] font-bold text-white drop-shadow-md opacity-80",children:N.hotkey}),N.maxCharges!==1/0&&o.jsx("div",{className:"absolute bottom-0.5 right-1 text-[8px] font-mono font-bold text-white bg-black/50 px-0.5 rounded",children:A.charges})]})},N.type)})})]})]}),h&&o.jsxs("div",{className:"absolute left-[320px] top-[420px] z-50 pointer-events-none w-52 bg-slate-900/95 backdrop-blur-md border border-slate-500 rounded-lg shadow-2xl text-center overflow-hidden animate-fade-in-up",children:[o.jsx("div",{className:"h-1.5 w-full",style:{backgroundColor:h.color}}),o.jsxs("div",{className:"p-3",children:[o.jsx("h5",{className:"font-bold text-white text-xs mb-1",style:{color:h.color},children:h.name}),o.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed mb-3",children:h.description}),Z[h.type]&&o.jsxs("div",{className:"grid grid-cols-2 gap-y-1.5 gap-x-2 text-[10px] border-t border-slate-700/50 pt-2 text-left bg-black/20 p-2 rounded",children:[Z[h.type].damage&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-500",children:"DMG"}),o.jsx("span",{className:"font-mono font-bold text-white text-right",children:Z[h.type].damage})]}),Z[h.type].damageType&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-500",children:"TYPE"}),o.jsx("span",{className:"font-mono font-bold text-right",style:{color:ut[Z[h.type].damageType]||"#fff"},children:Z[h.type].damageType.substring(0,3)})]}),Z[h.type].range&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-500",children:"RNG"}),o.jsx("span",{className:"font-mono font-bold text-slate-200 text-right",children:Z[h.type].range})]}),Z[h.type].cooldown&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-500",children:"CD"}),o.jsxs("span",{className:"font-mono font-bold text-slate-200 text-right",children:[(Z[h.type].cooldown/60).toFixed(1),"s"]})]}),Z[h.type].pierce&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-500",children:"PIERCE"}),o.jsx("span",{className:"font-mono font-bold text-slate-200 text-right",children:Z[h.type].pierce})]})]})]})]}),b&&o.jsxs("div",{className:"absolute right-[320px] top-[300px] z-50 pointer-events-none w-48 bg-slate-900/95 backdrop-blur-md border border-slate-500 rounded-lg shadow-2xl overflow-hidden animate-fade-in-up",children:[o.jsx("div",{className:"h-1 w-full",style:{backgroundColor:ut[b.type]}}),o.jsxs("div",{className:"p-3 text-left",children:[o.jsxs("h5",{className:"font-bold text-white text-xs mb-1 uppercase",style:{color:ut[b.type]},children:[b.type," Mastery"]}),o.jsxs("div",{className:"text-[10px] text-slate-400 mb-2",children:["Level ",b.level]}),o.jsxs("div",{className:"bg-black/40 rounded p-2 border border-slate-700/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-slate-400 text-[10px] uppercase",children:"Damage Bonus"}),o.jsxs("span",{className:"text-white font-mono font-bold text-xs",children:["+",b.level*20,"%"]})]}),o.jsxs("div",{className:"text-[9px] text-slate-500 italic leading-tight",children:["Increases all ",b.type.toLowerCase()," damage dealt by modules and abilities."]})]})]})]}),E&&o.jsxs("div",{className:"absolute right-[320px] top-[450px] z-50 pointer-events-none w-52 bg-slate-900/95 backdrop-blur-md border border-slate-500 rounded-lg shadow-2xl overflow-hidden animate-fade-in-up",children:[o.jsx("div",{className:"h-1 w-full",style:{backgroundColor:E.color}}),o.jsxs("div",{className:"p-3 text-left",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("h5",{className:"font-bold text-white text-xs uppercase",style:{color:E.color},children:E.name}),o.jsx("span",{className:"text-[9px] font-mono text-slate-500 border border-slate-700/50 bg-black/30 rounded px-1.5 py-0.5",children:E.hotkey})]}),o.jsx("p",{className:"text-[10px] text-slate-300 mb-3 leading-relaxed border-b border-slate-700/50 pb-2",children:E.description}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-wider",children:"Status"}),(()=>{const N=e.abilities[E.type],A=N.cooldown>0;return E.maxCharges!==1/0&&N.charges<=0?o.jsx("span",{className:"text-red-500 text-[10px] font-bold bg-red-900/20 px-2 py-0.5 rounded border border-red-900/50",children:"DEPLETED"}):A?o.jsxs("span",{className:"text-slate-400 text-[10px] font-mono bg-slate-800 px-2 py-0.5 rounded border border-slate-700",children:[(N.cooldown/60).toFixed(1),"s"]}):o.jsx("span",{className:"text-green-400 text-[10px] font-bold bg-green-900/20 px-2 py-0.5 rounded border border-green-900/50",children:"READY"})})()]})]})]})]})]})},Wf=({gameState:e,onRestart:t,onSaveScore:n,onMainMenu:r})=>{const[s,l]=H.useState(""),[i,a]=H.useState(!1);H.useState(!1);const u=g=>{g.preventDefault(),s.trim().length!==0&&(n(s),a(!0))},c=()=>{const g=localStorage.getItem("tower_survivors_leaderboard_v1.json");if(!g){alert("No records found to export.");return}const E=new Blob([g],{type:"application/json"}),f=URL.createObjectURL(E),d=document.createElement("a");d.href=f,d.download="tower_survivors_leaderboard.json",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(f)},m=g=>{switch(g){case 1:return{label:"TIER I",color:"text-slate-400",border:"border-slate-600",bg:"bg-slate-800"};case 2:return{label:"TIER II",color:"text-cyan-400",border:"border-cyan-500",bg:"bg-cyan-900/20"};case 3:return{label:"TIER III",color:"text-purple-400",border:"border-purple-500",bg:"bg-purple-900/20"};case 4:return{label:"LEGENDARY",color:"text-yellow-400",border:"border-yellow-400",bg:"bg-yellow-900/20"};default:return{label:"UNKNOWN",color:"text-slate-400",border:"border-slate-600",bg:"bg-slate-800"}}},p=g=>g?g>=1e6?(g/1e6).toFixed(1)+"M":g>=1e3?(g/1e3).toFixed(1)+"k":Math.round(g).toString():"0",h=Object.entries(e.tower.modules).filter(([g,E])=>E>0).map(([g,E])=>({type:g,count:E,def:Z[g],damage:e.damageDealt[g]||0,goldSpent:e.goldSpent[g]||0})),x=Object.entries(e.killCounts).filter(([g,E])=>E>0).sort((g,E)=>E[1]-g[1]),b=g=>{const E=h.filter(d=>d.def&&d.def.tier===g);if(E.length===0)return null;const f=m(g);return o.jsxs("div",{className:"mb-4 last:mb-0",children:[o.jsx("h4",{className:`text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-2 ${f.color} opacity-90 pl-2 border-l-2 ${f.border.replace("border","border-l")}`,children:f.label}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:E.map(({type:d,count:v,def:S,damage:R,goldSpent:C})=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/60 p-2 rounded border border-slate-700/50",children:[o.jsx("div",{className:"w-8 h-8 rounded bg-slate-900 flex items-center justify-center shrink-0 border border-slate-700",children:$t(d,S.color,"w-5 h-5")}),o.jsxs("div",{className:"overflow-hidden flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs text-slate-400 leading-none mb-1 truncate",children:S.name}),o.jsxs("div",{className:"flex justify-between items-end mt-1",children:[o.jsxs("span",{className:"text-base font-bold text-white leading-none",children:["x",v]}),o.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[S.type.startsWith("TURRET")&&R>0&&o.jsxs("span",{className:"text-[10px] font-mono font-bold text-slate-300 bg-black/40 px-1 rounded border border-slate-700/50 whitespace-nowrap",title:`Total Damage: ${R.toLocaleString()}`,children:[p(R)," DMG"]}),C>0&&o.jsxs("span",{className:"text-[10px] font-mono font-bold text-yellow-500 bg-black/40 px-1 rounded border border-slate-700/50 whitespace-nowrap",title:`Total Gold Spent: ${C.toLocaleString()}`,children:[p(C)," G"]})]})]})]})]},d))})]},g)};return o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-slate-900/95 border-2 border-danger-red rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-[0_0_60px_rgba(239,68,68,0.4)] overflow-hidden",children:[o.jsxs("div",{className:"p-6 md:p-8 text-center border-b border-red-900/50 bg-gradient-to-b from-red-900/20 to-transparent shrink-0",children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-black text-danger-red mb-2 uppercase tracking-[0.2em] drop-shadow-lg",children:"Critical Failure"}),o.jsxs("p",{className:"text-gray-400 font-mono tracking-wide text-sm",children:["Signal Lost at Wave ",o.jsx("span",{className:"text-white font-bold",children:e.wave})]}),o.jsx("p",{className:"text-xs text-slate-500 mt-2 italic",children:'"The Infinite Spire remains... you do not."'})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 scrollbar-thin scrollbar-thumb-red-900 scrollbar-track-slate-900",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-black/40 border border-slate-700 p-4 rounded text-center",children:[o.jsx("div",{className:"text-sm text-slate-500 uppercase tracking-widest mb-1",children:"Final Score"}),o.jsx("div",{className:"text-5xl font-mono text-gold-accent font-bold drop-shadow-md",children:e.score.toLocaleString()})]}),i?o.jsxs("div",{className:"p-4 bg-green-900/20 border border-green-500/30 rounded flex justify-between items-center",children:[o.jsx("p",{className:"text-green-400 text-xs font-bold uppercase tracking-wide",children:"Record Archived"}),o.jsx("button",{onClick:c,className:"text-xs text-slate-400 hover:text-white underline decoration-slate-600 underline-offset-2",children:"Download Backup (.json)"})]}):o.jsxs("div",{className:"bg-slate-800/40 p-5 rounded border border-slate-700",children:[o.jsx("p",{className:"text-sm text-slate-300 mb-3 font-bold uppercase tracking-wide",children:"Record your legacy"}),o.jsxs("form",{onSubmit:u,className:"flex gap-2",children:[o.jsx("input",{type:"text",maxLength:15,placeholder:"ENTER NAME",value:s,onChange:g=>l(g.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded px-3 py-2 text-center text-white font-bold uppercase tracking-widest focus:outline-none focus:border-gold-accent placeholder-slate-700 text-base",autoFocus:!0}),o.jsx("button",{type:"submit",disabled:s.length===0,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white text-xs font-bold uppercase tracking-wider rounded transition-colors",children:"Save"})]})]})]}),o.jsxs("div",{className:"bg-slate-800/20 border border-slate-700/50 rounded overflow-hidden flex flex-col",children:[o.jsx("div",{className:"bg-slate-800/80 px-4 py-2 text-xs font-bold text-slate-300 uppercase tracking-widest border-b border-slate-700",children:"Casualty Report"}),o.jsx("div",{className:"p-2 overflow-y-auto max-h-[200px] scrollbar-thin scrollbar-thumb-slate-700",children:x.length>0?o.jsx("div",{className:"space-y-1",children:x.map(([g,E])=>{const f=_t[g];return o.jsxs("div",{className:"flex justify-between items-center bg-slate-900/40 px-3 py-1.5 rounded border border-slate-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 h-5 flex items-center justify-center rounded bg-slate-900",style:{color:f==null?void 0:f.color},children:oi(g,(f==null?void 0:f.color)||"#fff","w-4 h-4")}),o.jsx("span",{className:"text-sm text-slate-300 font-bold",children:g})]}),o.jsx("span",{className:"text-base font-mono text-white",children:E})]},g)})}):o.jsx("div",{className:"text-center text-slate-500 text-sm py-4 italic",children:"No hostiles neutralized."})})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsx("div",{className:"h-px bg-slate-700 flex-grow"}),o.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"System Configuration"}),o.jsx("div",{className:"h-px bg-slate-700 flex-grow"})]}),o.jsx("div",{className:"bg-black/20 rounded-lg p-4 border border-slate-800",children:h.length>0?o.jsx("div",{children:[1,2,3,4].map(g=>b(g))}):o.jsx("div",{className:"text-center text-slate-500 text-sm py-4 italic",children:"No modules installed."})})]})]}),o.jsxs("div",{className:"p-6 md:p-8 border-t border-slate-700 bg-slate-900 shrink-0 flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[o.jsx("button",{onClick:t,className:"flex-1 py-4 bg-danger-red hover:bg-red-600 text-white font-bold rounded uppercase tracking-widest transition-all hover:scale-[1.02] shadow-lg shadow-red-900/20 text-sm",children:"Reboot System"}),o.jsx("button",{onClick:r,className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 text-slate-200 font-bold rounded uppercase tracking-widest transition-all hover:scale-[1.02] border border-slate-600 text-sm",children:"Main Menu"})]}),o.jsx("div",{className:"text-center text-xs text-slate-600 font-mono uppercase tracking-widest",children:_c})]})]})})},$f=({onClose:e,gameState:t,onSetTargeting:n,activeTab:r,onTabChange:s})=>{const[l,i]=H.useState("TOWER"),a=w=>{switch(w){case 1:return{label:"TIER I",color:"text-slate-400",border:"border-slate-600",bg:"bg-slate-800"};case 2:return{label:"TIER II",color:"text-cyan-400",border:"border-cyan-500",bg:"bg-cyan-900/20"};case 3:return{label:"TIER III",color:"text-purple-400",border:"border-purple-500",bg:"bg-purple-900/20"};case 4:return{label:"LEGENDARY",color:"text-yellow-400",border:"border-yellow-400",bg:"bg-yellow-900/20"};default:return{label:"",color:"text-slate-400",border:"border-slate-600",bg:"bg-slate-800"}}},u=w=>{switch(w){case"PHYSICAL":return y.TURRET_ARROW;case"FIRE":return y.TURRET_FIREBALL;case"ICE":return y.TURRET_ICICLE;case"POISON":return y.TURRET_POISON;case"MAGIC":return y.TURRET_MAGIC_MISSILE;case"CHAOS":return y.TURRET_CHAOS_BOLT;default:return y.TURRET_ARROW}},c=Object.values(Z),m=w=>w.sort((k,I)=>k.tier-I.tier||k.baseCost-I.baseCost),p=m(c.filter(w=>w.type.startsWith("TURRET"))),h=m(c.filter(w=>w.type.startsWith("STAT")||w.type===y.HEAL_TOWER)),x=m(c.filter(w=>w.type.startsWith("ECON"))),b=Object.values(T),g=[T.BOSS,T.BROODMOTHER,T.WORM,T.SLIME,T.SCAVENGER],E=b.filter(w=>!g.includes(w)).sort((w,k)=>w.localeCompare(k)),f=b.filter(w=>g.includes(w)).sort((w,k)=>w.localeCompare(k)),d=w=>{const k=_t[w];return o.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/50 rounded p-3 flex flex-col gap-2 relative overflow-hidden h-full",children:[o.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 opacity-10 bg-gradient-to-bl from-white to-transparent rounded-bl-full pointer-events-none",style:{backgroundColor:k.color}}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg shadow-lg flex items-center justify-center bg-slate-900 border border-slate-700 shrink-0",children:oi(w,k.color)}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-sm md:text-lg leading-tight",children:w}),o.jsxs("p",{className:"text-[10px] md:text-xs text-slate-400 italic",children:["Speed: ",k.speed," | Radius: ",k.radius]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mt-auto",children:[o.jsxs("div",{className:"bg-slate-900/60 p-1.5 md:p-2 rounded",children:[o.jsx("div",{className:"text-slate-500 font-mono uppercase text-[9px] md:text-[10px] mb-1",children:"Resistant"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.entries(k.resistances).map(([I,O])=>O<.9?o.jsx("div",{className:"p-1 rounded bg-slate-800 border border-slate-600 flex items-center justify-center relative group/icon",title:`${I} Resistance: ${Math.round((1-O)*100)}%`,children:$t(u(I),ut[I],"w-3 h-3 md:w-4 md:h-4")},I):null),Object.values(k.resistances).every(I=>I>=.9)&&o.jsx("span",{className:"text-slate-600 text-[10px]",children:"-"})]})]}),o.jsxs("div",{className:"bg-slate-900/60 p-1.5 md:p-2 rounded border border-slate-700/50",children:[o.jsx("div",{className:"text-slate-500 font-mono uppercase text-[9px] md:text-[10px] mb-1",children:"Weakness"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.entries(k.resistances).map(([I,O])=>O>1.1?o.jsx("div",{className:"p-1 rounded bg-slate-800 border border-slate-600 flex items-center justify-center relative group/icon",title:`${I} Weakness: ${Math.round((O-1)*100)}%`,children:$t(u(I),ut[I],"w-3 h-3 md:w-4 md:h-4")},I):null),Object.values(k.resistances).every(I=>I<=1.1)&&o.jsx("span",{className:"text-slate-600 text-[10px]",children:"-"})]})]})]})]},w)},v=w=>{const k=a(w.tier);return o.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/50 rounded p-3 md:p-4 flex flex-col gap-2 md:gap-3 hover:border-slate-500 transition-colors relative overflow-hidden group h-full animate-fade-in",children:[o.jsxs("div",{className:"flex gap-3 items-start relative z-10",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 shrink-0 rounded-lg bg-slate-900/80 flex items-center justify-center shadow-inner border border-slate-700 group-hover:scale-105 transition-transform duration-300",children:$t(w.type,w.color,"w-6 h-6 md:w-8 md:h-8")}),o.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"font-bold text-white text-xs md:text-base truncate pr-1",style:{color:w.color},children:w.name}),o.jsx("span",{className:`text-[9px] md:text-[10px] font-bold px-1.5 py-0.5 rounded border ${k.color} ${k.border} bg-black/40 shrink-0`,children:k.label})]}),o.jsx("p",{className:"text-[10px] md:text-sm text-slate-400 mt-0.5 leading-tight md:leading-snug line-clamp-2 md:line-clamp-none",children:w.description}),(w.damage||w.range)&&o.jsxs("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1 text-[10px] md:text-xs mt-2 bg-black/20 p-1.5 rounded text-slate-300",children:[w.damage&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"DMG"}),o.jsx("span",{className:"font-mono text-white",children:w.damage})]}),w.damageType&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"TYPE"}),o.jsx("span",{className:"font-bold",style:{color:ut[w.damageType]},children:w.damageType.substring(0,3)})]}),w.range&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"RNG"}),o.jsx("span",{className:"font-mono",children:w.range})]}),w.cooldown&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"CD"}),o.jsxs("span",{className:"font-mono",children:[(w.cooldown/60).toFixed(1),"s"]})]})]})]})]}),o.jsxs("div",{className:"mt-auto pt-2 border-t border-slate-700/30 flex justify-between items-center text-[10px] md:text-xs font-mono relative z-10",children:[o.jsx("span",{className:"text-slate-500",children:"Base Cost"}),o.jsxs("span",{className:"text-gold-accent font-bold",children:[w.baseCost,"g"]})]}),o.jsx("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 md:w-24 md:h-24 rounded-full opacity-5 pointer-events-none ${k.bg.replace("/20","/100")}`})]},w.type)},S=(w,k)=>{const I=k.filter(U=>U.tier===w);if(I.length===0)return null;const O=a(w);return o.jsxs("div",{className:"mb-4 last:mb-0",children:[o.jsx("h4",{className:`text-xs md:text-sm font-bold uppercase tracking-wider mb-2 md:mb-3 flex items-center gap-2 ${O.color} opacity-80 pl-2 border-l-2 ${O.border.replace("border","border-l")}`,children:O.label}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:I.map(v)})]},`tier-${w}`)},R=w=>{if(w.length===0)return o.jsx("div",{className:"text-slate-500 text-sm italic p-4",children:"No upgrades found in this category."});const k=Array.from(new Set(w.map(I=>I.tier))).sort((I,O)=>I-O);return o.jsx("div",{className:"space-y-4 md:space-y-6",children:k.map(I=>S(I,w))})},C=()=>{if(!t)return o.jsx("div",{className:"text-center text-slate-500 p-8",children:"No Game State Available"});const w=Object.entries(t.tower.modules).filter(([U,K])=>{var W;return K>0&&((W=Z[U])==null?void 0:W.type.startsWith("TURRET"))}).map(([U,K])=>({type:U,count:K,def:Z[U]}));if(w.length===0)return o.jsx("div",{className:"text-center text-slate-500 p-8 italic text-lg",children:"No active weapon modules installed."});const k=U=>{if(!n)return;const K=t.tower.moduleTargeting[U]||ke.NEAREST,W=Object.values(ke),te=(W.indexOf(K)+1)%W.length;n(U,W[te])},I=(U,K,W,te)=>{var D;const ve=t.tower.moduleTargeting[U]||ke.NEAREST,Ce=a(W.tier);return o.jsxs("div",{className:"bg-slate-800/40 border border-slate-700/50 rounded p-3 md:p-4 flex flex-col md:flex-row items-start md:items-center gap-3 md:gap-4 hover:border-slate-500 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-lg bg-slate-900 border border-slate-700 flex items-center justify-center shadow-lg",children:$t(U,W.color,"w-8 h-8 md:w-10 md:h-10")}),o.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-slate-700 border border-slate-500 text-white font-bold px-1.5 py-0.5 rounded text-[10px] md:text-xs shadow",children:["x",K]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h4",{className:"font-bold text-white text-sm md:text-lg",style:{color:W.color},children:W.name}),o.jsx("span",{className:`text-[9px] md:text-xs font-bold px-2 py-0.5 rounded border w-fit ${Ce.color} ${Ce.border} bg-black/40 mt-1`,children:Ce.label})]})]}),o.jsxs("div",{className:"w-full md:flex-1 grid grid-cols-2 md:flex md:flex-wrap gap-2 text-[10px] md:text-sm text-slate-400 bg-black/20 p-2 rounded",children:[o.jsxs("div",{className:"flex justify-between gap-2 md:gap-4",children:[o.jsx("span",{className:"text-slate-500",children:"Type:"})," ",o.jsx("span",{className:"text-white font-mono",children:(D=W.damageType)==null?void 0:D.substring(0,3)})]}),o.jsxs("div",{className:"flex justify-between gap-2 md:gap-4",children:[o.jsx("span",{className:"text-slate-500",children:"Dmg:"})," ",o.jsx("span",{className:"text-white font-mono",children:W.damage})]}),o.jsxs("div",{className:"flex justify-between gap-2 md:gap-4",children:[o.jsx("span",{className:"text-slate-500",children:"Rng:"})," ",o.jsx("span",{className:"text-white font-mono",children:W.range||"N/A"})]}),o.jsxs("div",{className:"flex justify-between gap-2 md:gap-4",children:[o.jsx("span",{className:"text-slate-500",children:"CD:"})," ",o.jsxs("span",{className:"text-white font-mono",children:[(W.cooldown||60)/60,"s"]})]})]}),o.jsxs("div",{className:"flex flex-row md:flex-col gap-2 w-full md:w-auto shrink-0 items-center md:items-end justify-between md:justify-center mt-1 md:mt-0 border-t border-slate-700/50 pt-2 md:border-t-0 md:pt-0",children:[o.jsx("span",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-wider",children:"Priority"}),o.jsxs("button",{id:`module-targeting-btn-${te}`,onClick:()=>k(U),className:"bg-slate-700 hover:bg-slate-600 text-cyan-300 border border-slate-500 px-3 py-1.5 md:px-4 md:py-2 rounded font-bold text-xs md:text-sm uppercase tracking-wide transition-colors flex justify-between items-center gap-2 min-w-[120px] md:min-w-[140px]",children:[o.jsx("span",{children:ve}),o.jsx("span",{className:"text-slate-400 text-xs",children:""})]})]})]},U)},O=[1,2,3,4];return o.jsx("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:O.map(U=>{const K=w.filter(te=>te.def.tier===U).sort((te,ve)=>ve.count-te.count);if(K.length===0)return null;const W=a(U);return o.jsxs("div",{children:[o.jsx("h4",{className:`text-xs md:text-sm font-bold uppercase tracking-wider mb-2 md:mb-3 flex items-center gap-2 ${W.color} opacity-80 pl-2 border-l-2 ${W.border.replace("border","border-l")}`,children:W.label}),o.jsx("div",{className:"grid grid-cols-1 gap-3 md:gap-4",children:K.map((te,ve)=>I(te.type,te.count,te.def,ve))})]},U)})})};return o.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900 md:bg-black/70 md:backdrop-blur-sm md:p-8",children:o.jsxs("div",{className:"bg-slate-900 md:bg-slate-900/85 md:backdrop-blur-xl border-none md:border border-slate-600 md:rounded-lg w-full h-full md:max-w-5xl md:h-[80vh] flex flex-col shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"flex flex-col gap-3 p-3 md:p-6 border-b border-slate-700/50 bg-slate-900/40 shrink-0",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("h2",{className:"text-lg md:text-2xl font-bold text-gold-accent tracking-widest uppercase",children:"Void Codex"})}),o.jsxs("button",{onClick:e,className:"text-slate-400 hover:text-white hover:bg-red-500/20 px-3 py-1.5 rounded transition-colors text-xs md:text-sm font-bold border border-slate-700 md:border-transparent flex items-center gap-1",children:[" ",o.jsx("span",{className:"hidden md:inline",children:"CLOSE"})]})]}),o.jsxs("div",{className:"flex gap-2 w-full overflow-x-auto pb-1 scrollbar-none -mx-1 px-1",children:[o.jsx("button",{id:"codex-tab-enemies",onClick:()=>s("ENEMIES"),className:`flex-shrink-0 px-3 py-1.5 md:px-4 md:py-2 rounded text-xs md:text-sm font-bold uppercase tracking-wide transition-all ${r==="ENEMIES"?"bg-slate-700/80 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:"Enemies"}),o.jsx("button",{id:"codex-tab-upgrades",onClick:()=>s("UPGRADES"),className:`flex-shrink-0 px-3 py-1.5 md:px-4 md:py-2 rounded text-xs md:text-sm font-bold uppercase tracking-wide transition-all ${r==="UPGRADES"?"bg-slate-700/80 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:"Upgrades"}),t&&o.jsx("button",{id:"codex-tab-modules",onClick:()=>s("MODULES"),className:`flex-shrink-0 px-3 py-1.5 md:px-4 md:py-2 rounded text-xs md:text-sm font-bold uppercase tracking-wide transition-all ${r==="MODULES"?"bg-slate-700/80 text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:"Modules"})]})]}),o.jsxs("div",{id:"codex-content",className:"flex-1 overflow-y-auto p-3 md:p-6 scrollbar-thin scrollbar-thumb-slate-600 relative",children:[r==="ENEMIES"&&o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs md:text-sm font-bold uppercase tracking-wider mb-2 md:mb-3 flex items-center gap-2 text-slate-400 opacity-80 pl-2 border-l-2 border-slate-600",children:"Standard Threats"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:E.map(d)})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs md:text-sm font-bold uppercase tracking-wider mb-2 md:mb-3 flex items-center gap-2 text-red-500 opacity-80 pl-2 border-l-2 border-red-500",children:"Apex Threats"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:f.map(d)})]})]}),r==="UPGRADES"&&o.jsxs("div",{className:"pb-10 min-h-full flex flex-col",children:[o.jsx("div",{className:"sticky top-0 z-30 bg-slate-900/95 backdrop-blur-sm border-b border-slate-700/50 mb-4 md:mb-6 pt-0 -mt-2 md:-mt-4 md:pt-4",children:o.jsxs("div",{className:"flex gap-4 md:gap-6 px-2 overflow-x-auto scrollbar-none",children:[o.jsx("button",{onClick:()=>i("TOWER"),className:`flex-shrink-0 pb-2 md:pb-3 text-[10px] md:text-sm font-bold uppercase tracking-widest transition-all border-b-2 ${l==="TOWER"?"text-gold-accent border-gold-accent":"text-slate-500 border-transparent hover:text-slate-300 hover:border-slate-700"}`,children:"Tower Modules"}),o.jsx("button",{onClick:()=>i("SYSTEM"),className:`flex-shrink-0 pb-2 md:pb-3 text-[10px] md:text-sm font-bold uppercase tracking-widest transition-all border-b-2 ${l==="SYSTEM"?"text-gold-accent border-gold-accent":"text-slate-500 border-transparent hover:text-slate-300 hover:border-slate-700"}`,children:"System"}),o.jsx("button",{onClick:()=>i("ECONOMY"),className:`flex-shrink-0 pb-2 md:pb-3 text-[10px] md:text-sm font-bold uppercase tracking-widest transition-all border-b-2 ${l==="ECONOMY"?"text-gold-accent border-gold-accent":"text-slate-500 border-transparent hover:text-slate-300 hover:border-slate-700"}`,children:"Economy"})]})}),o.jsxs("div",{className:"flex-grow",children:[l==="TOWER"&&R(p),l==="SYSTEM"&&R(h),l==="ECONOMY"&&R(x)]}),o.jsx("div",{className:"mt-6 md:mt-8 pt-6 md:pt-8 border-t border-slate-700/50 text-center",children:o.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 italic",children:"* Costs shown are Base Costs. Prices increase exponentially for each upgrade of the same type you own."})})]}),r==="MODULES"&&o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"mb-4 md:mb-6 border-b border-slate-700/50 pb-3 md:pb-4",children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold text-white mb-1",children:"Active Weapons Array"}),o.jsx("p",{className:"text-xs md:text-sm text-slate-400",children:"Manage targeting priority for each weapon type independently."})]}),C()]})]})]})})},Yf=({gameState:e,onStart:t,onOpenTutorial:n,onOpenCodex:r,onOpenLeaderboard:s,onOpenChangelog:l})=>{var c,m,p;const[i,a]=H.useState(Y.isAudioMuted());H.useEffect(()=>Y.subscribe(()=>{a(Y.isAudioMuted())}),[]);const u=[L.PHYSICAL,L.FIRE,L.ICE,L.MAGIC,L.POISON,L.CHAOS,L.ECONOMY];return o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-950/95 backdrop-blur-sm animate-fade-in overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50vw] h-[50vw] bg-violet-900/10 rounded-full blur-[100px] animate-pulse-slow"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-cyan-900/10 rounded-full blur-[100px] animate-pulse-slow",style:{animationDelay:"1.5s"}})]}),o.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 md:p-6 flex justify-between items-start z-50 pointer-events-none",children:[o.jsx("button",{onClick:()=>Y.toggleMute(),className:"pointer-events-auto p-2.5 rounded-lg bg-slate-900/80 hover:bg-slate-800 border border-slate-700/50 hover:border-slate-500 transition-all group shadow-lg",title:i?"Unmute Audio":"Mute Audio",children:o.jsx("div",{className:`text-slate-400 group-hover:text-white transition-colors ${i?"opacity-50":"opacity-100"}`,children:Jr(i?"VOLUME_OFF":"VOLUME_ON","w-5 h-5 lg:w-6 lg:h-6")})}),o.jsxs("a",{href:"https://buymeacoffee.com/swordandbored",target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto flex items-center gap-2 bg-slate-900/80 hover:bg-slate-800 border border-slate-700/50 hover:border-yellow-500/50 px-3 py-2 rounded-lg transition-all hover:scale-105 group shadow-lg",children:[o.jsx("span",{className:"text-xl grayscale group-hover:grayscale-0 transition-all",children:""}),o.jsx("span",{className:"hidden sm:inline text-xs uppercase font-bold text-slate-500 group-hover:text-yellow-500 leading-none transition-colors",children:"Support Dev"})]})]}),o.jsxs("div",{className:"flex-1 w-full h-full flex flex-col items-center justify-center p-6 z-10 relative",children:[o.jsx("div",{className:"absolute top-[45%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-[65vmin] h-[65vmin] max-w-[700px] max-h-[700px] pointer-events-none",children:o.jsxs("div",{className:"w-full h-full relative opacity-60 lg:opacity-70",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border border-dashed border-slate-800/60 animate-[spin_60s_linear_infinite]"}),o.jsx("div",{className:"absolute inset-[15%] rounded-full border border-dashed border-slate-800/40 animate-[spin_40s_linear_infinite_reverse]"}),o.jsx("div",{className:"absolute inset-0 animate-[spin_20s_linear_infinite]",children:u.map((h,x)=>o.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{transform:`rotate(${x*(360/u.length)}deg)`},children:o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 lg:w-5 lg:h-5 rounded-full bg-slate-950 border-2 shadow-[0_0_15px_currentColor]",style:{borderColor:h,color:h,boxShadow:`0 0 15px ${h}60`},children:o.jsx("div",{className:"absolute inset-0.5 rounded-full bg-current opacity-70"})})},x))})]})}),o.jsx("div",{className:"absolute top-[45%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-[40vmin] h-[40vmin] bg-violet-500/10 blur-[80px] rounded-full pointer-events-none"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center mt-[-5vh]",children:[o.jsx("h1",{className:"text-[12vmin] lg:text-[8rem] font-black tracking-tighter leading-[0.85] text-transparent bg-clip-text bg-gradient-to-b from-slate-100 to-slate-500 drop-shadow-2xl",children:"VOID"}),o.jsx("h1",{className:"text-[9vmin] lg:text-[6rem] font-black tracking-tighter leading-[0.85] text-transparent bg-clip-text bg-gradient-to-r from-violet-400 via-fuchsia-400 to-cyan-400 animate-pulse-slow filter drop-shadow-[0_0_20px_rgba(167,139,250,0.4)]",children:"DEFENSE"}),o.jsxs("div",{className:"mt-4 lg:mt-6 flex items-center gap-4 opacity-80",children:[o.jsx("div",{className:"h-px w-8 lg:w-16 bg-cyan-500/40"}),o.jsx("span",{className:"text-cyan-200 font-mono text-xs lg:text-sm tracking-[0.4em] uppercase",children:"The Infinite Spire"}),o.jsx("div",{className:"h-px w-8 lg:w-16 bg-cyan-500/40"})]})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-sm gap-4 lg:gap-6 mt-12 z-20",children:[o.jsxs("button",{onClick:t,className:"group relative w-full perspective",children:[o.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-violet-600 to-cyan-600 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500"}),o.jsxs("div",{className:"relative w-full py-4 lg:py-5 bg-slate-950 hover:bg-slate-900 border border-slate-800 group-hover:border-slate-600 text-white font-black text-xl lg:text-2xl tracking-[0.25em] uppercase rounded-lg flex items-center justify-center gap-4 transition-all shadow-2xl overflow-hidden",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 shadow-[0_0_10px_#22d3ee] group-hover:scale-150 transition-transform"}),o.jsx("span",{className:"group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-cyan-200",children:"INITIALIZE"}),o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 shadow-[0_0_10px_#22d3ee] group-hover:scale-150 transition-transform"}),o.jsx("div",{className:"absolute top-0 -left-[100%] w-[50%] h-full bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-12 group-hover:animate-[float_0.7s_ease-in-out_infinite]"})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:[{label:"Tutorial",action:n,color:"blue"},{label:"Codex",action:r,color:"purple"},{label:"Ranking",action:s,color:"yellow"},{label:"Patch Notes",action:l,color:"emerald"}].map((h,x)=>o.jsx("button",{onClick:h.action,className:`
                            py-3 bg-slate-900/50 hover:bg-slate-800 border border-slate-700 hover:border-${h.color}-500/50 
                            text-slate-400 hover:text-${h.color}-400 font-bold text-xs uppercase tracking-widest rounded transition-all duration-300
                            hover:shadow-[0_0_15px_rgba(0,0,0,0.5)] active:scale-95
                        `,children:h.label},x))})]}),o.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 flex justify-between items-center text-[10px] font-mono uppercase text-slate-600 border-t border-slate-800/50",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-slate-500 text-[9px] mb-0.5",children:"Best"}),o.jsx("div",{className:"text-gold-accent font-bold",children:((c=e==null?void 0:e.highScore)==null?void 0:c.toLocaleString())||0})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-slate-500 text-[9px] mb-0.5",children:"Wave"}),o.jsx("div",{className:"text-cyan-400 font-bold",children:((p=(m=e==null?void 0:e.leaderboard)==null?void 0:m[0])==null?void 0:p.wave)||0})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1",children:[o.jsx("span",{children:_c}),o.jsxs("span",{className:`flex items-center gap-1.5 ${e!=null&&e.isServerConnected?"text-emerald-500":"text-slate-500"}`,children:[o.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e!=null&&e.isServerConnected?"bg-emerald-500 animate-pulse":"bg-slate-500"}`}),e!=null&&e.isServerConnected?"Online":"Local"]})]})]})]})]})},Kf=({gameState:e,onUnlock:t,onClose:n})=>{const r=Object.values(En).filter(c=>c.category==="ACTIVE"),s=Object.values(En).filter(c=>c.category==="PASSIVE"),l=c=>{switch(c){case P.PASSIVE_PHYSICAL:return"PHYSICAL";case P.PASSIVE_MAGIC:return"MAGIC";case P.PASSIVE_FIRE:return"FIRE";case P.PASSIVE_ICE:return"ICE";case P.PASSIVE_POISON:return"POISON";case P.PASSIVE_CHAOS:return"CHAOS";default:return""}},i=c=>{let m="";switch(c){case P.PASSIVE_PHYSICAL:m="PHYSICAL";break;case P.PASSIVE_MAGIC:m="MAGIC";break;case P.PASSIVE_FIRE:m="FIRE";break;case P.PASSIVE_ICE:m="ICE";break;case P.PASSIVE_POISON:m="POISON";break;case P.PASSIVE_CHAOS:m="CHAOS";break;default:return 0}let p=0;return Object.entries(e.tower.modules).forEach(([h,x])=>{const b=Z[h];b&&b.type.startsWith("TURRET")&&b.damageType===m&&(p+=x)}),p},a=c=>{const m=e.abilities[c.type],p=e.gold>=c.cost,h=m.unlocked;return o.jsx("div",{className:`relative border-2 rounded-xl p-3 md:p-4 transition-all duration-300 group ${h?"border-cyan-500/50 bg-cyan-900/10":"border-slate-700/50 bg-slate-900/40"}`,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-8 h-8 md:w-9 md:h-9 rounded flex items-center justify-center font-bold text-sm md:text-base bg-black/50 border border-slate-600 shadow-lg text-white font-mono shrink-0",children:c.hotkey}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 text-white opacity-80",children:co(c.type,c.color)}),o.jsx("h3",{className:"text-sm md:text-xl font-bold text-white uppercase tracking-wider leading-tight",children:c.name})]})]}),o.jsx("p",{className:"text-slate-300 text-xs md:text-sm leading-relaxed mb-4 flex-grow",children:c.description}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs md:text-sm font-mono text-slate-400 mb-4",children:[o.jsxs("div",{className:"bg-black/30 p-1.5 md:p-2 rounded border border-slate-800/50 text-center",children:[o.jsx("span",{className:"text-slate-500 block text-[9px] md:text-[10px] uppercase",children:"Cooldown"}),o.jsx("span",{className:"text-white",children:c.cooldown>0?`${c.cooldown}s`:"Once per run"})]}),o.jsxs("div",{className:"bg-black/30 p-1.5 md:p-2 rounded border border-slate-800/50 text-center",children:[o.jsx("span",{className:"text-slate-500 block text-[9px] md:text-[10px] uppercase",children:"Duration"}),o.jsx("span",{className:"text-white",children:c.duration>0?`${c.duration}s`:"Instant"})]})]}),o.jsx("div",{className:"mt-auto",children:h?o.jsxs("button",{disabled:!0,className:"w-full py-2 bg-slate-800/40 text-cyan-400 font-bold uppercase tracking-widest border border-cyan-500/30 rounded cursor-default flex items-center justify-center gap-2 text-xs md:text-sm",children:[o.jsx("span",{className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-cyan-400 animate-pulse"})," System Online"]}):o.jsxs("button",{onClick:()=>t(c.type),disabled:!p,className:`w-full py-2 md:py-3 font-bold uppercase tracking-widest rounded shadow-lg transition-all flex items-center justify-center gap-2 md:gap-3 text-xs md:text-sm
                                ${p?"bg-gradient-to-r from-slate-700/80 to-slate-800/80 hover:from-cyan-600 hover:to-blue-600 text-white border border-slate-500 hover:border-cyan-400 hover:scale-[1.02]":"bg-slate-800/60 text-slate-500 border border-slate-700/50 cursor-not-allowed"}
                            `,children:[o.jsx("span",{children:"Unlock"}),o.jsxs("span",{className:`px-1.5 py-0.5 md:px-2 rounded text-[10px] md:text-xs ${p?"bg-black/40 text-gold-accent":"bg-black/20"}`,children:[c.cost,"g"]})]})})]})},c.type)},u=c=>{const m=e.abilities[c.type],p=Math.floor(c.cost*Math.pow(c.costScaling||1.2,m.level)),h=e.gold>=p,x=(m.level*(c.statBonus||0)*100).toFixed(0),b=((m.level+1)*(c.statBonus||0)*100).toFixed(0),g=i(c.type);return o.jsxs("div",{className:"bg-slate-900/40 border border-slate-700/50 rounded p-3 md:p-4 flex flex-col justify-between hover:border-slate-500 transition-colors group",children:[o.jsx("div",{className:"flex justify-between items-start mb-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full border shadow-sm flex items-center justify-center bg-slate-900/80 group-hover:scale-110 transition-transform shrink-0",style:{borderColor:c.color},children:co(c.type,c.color)}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm md:text-base leading-tight",style:{color:c.color},children:c.name}),o.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-[9px] md:text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/40 border border-white/10",style:{color:c.color},children:l(c.type)}),o.jsxs("span",{className:"text-[10px] md:text-xs text-slate-400 font-mono",children:["Lvl ",m.level]})]}),o.jsxs("div",{className:"text-[10px] md:text-xs text-slate-500 font-mono mt-0.5",children:["Modules: ",o.jsx("span",{className:"text-white font-bold text-xs md:text-sm ml-1",children:g})]})]})]})]})}),o.jsxs("div",{className:"text-center my-2 md:my-3 bg-black/20 rounded p-1.5 md:p-2",children:[o.jsxs("div",{className:"text-lg md:text-2xl font-mono font-bold text-white",children:["+",x,"%"]}),o.jsx("div",{className:"text-[9px] md:text-[10px] text-slate-500 uppercase",children:"Current Damage Bonus"})]}),o.jsxs("button",{onClick:()=>t(c.type),disabled:!h,className:`w-full py-2 mt-2 font-bold uppercase tracking-widest rounded flex flex-col items-center justify-center text-[10px] md:text-xs border transition-all
                      ${h?"bg-slate-800 hover:bg-slate-700 text-white border-slate-600 hover:border-white":"bg-slate-900/50 text-slate-600 border-slate-800 cursor-not-allowed"}
                  `,children:[o.jsxs("span",{children:["UPGRADE TO +",b,"%"]}),o.jsxs("span",{className:`mt-0.5 ${h?"text-gold-accent":"text-slate-700"}`,children:[p,"g"]})]})]},c.type)};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900 md:bg-black/80 md:backdrop-blur-sm md:p-8",children:o.jsxs("div",{className:"bg-slate-900 md:bg-slate-900/85 md:backdrop-blur-xl border-none md:border border-slate-600 md:rounded-lg w-full h-full md:max-w-5xl md:h-[85vh] flex flex-col shadow-[0_0_50px_rgba(0,0,0,0.8)] overflow-hidden",children:[o.jsxs("div",{className:"flex flex-col gap-3 p-3 md:p-6 border-b border-slate-700/50 bg-slate-900/40 shrink-0",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl md:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 tracking-widest uppercase",children:"Tech Tree"}),o.jsx("p",{className:"text-slate-400 text-[10px] md:text-sm mt-0.5 font-mono",children:"Unlock protocols & amplify resonance."})]}),o.jsx("button",{onClick:n,className:"bg-slate-800/80 hover:bg-slate-700 text-white px-3 py-1.5 md:px-4 md:py-2 rounded border border-slate-600 transition-colors uppercase font-bold text-xs md:text-sm tracking-wide",children:"Return"})]}),o.jsxs("div",{className:"flex items-center justify-between bg-black/20 p-2 rounded border border-slate-800/50",children:[o.jsx("div",{className:"text-[10px] md:text-xs text-slate-500 uppercase tracking-widest",children:"Available Funds"}),o.jsxs("div",{className:"text-lg md:text-2xl font-bold text-gold-accent font-mono",children:[e.gold," Gold"]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 scrollbar-thin scrollbar-thumb-slate-700",children:[o.jsxs("div",{className:"mb-6 md:mb-8",children:[o.jsxs("h3",{className:"text-cyan-400 font-bold uppercase tracking-widest text-xs md:text-sm mb-3 md:mb-4 border-b border-slate-700/50 pb-2 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-cyan-400 rounded-full shadow-[0_0_5px_#22d3ee]"}),"Active Protocols"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:r.map(a)})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-purple-400 font-bold uppercase tracking-widest text-xs md:text-sm mb-3 md:mb-4 border-b border-slate-700/50 pb-2 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full shadow-[0_0_5px_#c084fc]"}),"Elemental Resonances (Infinite Scaling)"]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:s.map(u)})]})]})]})})},Qf=({onClose:e,onSetCodexOpen:t,onSetCodexTab:n,onSetTechShopOpen:r})=>{const[s,l]=H.useState(0),[i,a]=H.useState(null),u=H.useRef(null),c=8,m=[{title:"Defense Protocol Initialized",description:"Welcome to the Spire. Your objective is to defend the central tower against infinite waves of void entities.",placement:"center",action:()=>{t(!1),r(!1)}},{title:"Resource Management",description:"Track your current Gold and Score here. You earn Gold by destroying enemies.",targetIds:["mobile-hud-stats-mobile","desktop-hud-resources-desktop"],placement:"center"},{title:"System Integrity",description:"Monitor your Tower's HP and vital statistics. Critical damage will be indicated here.",targetIds:["mobile-hud-stats-mobile","desktop-hud-panel-integrity"],placement:"center"},{title:"Time Dilation",description:"Toggle between 1x and 2x speed to accelerate time during slow waves. Use with caution.",targetIds:["mobile-hud-btn-speed-mobile","desktop-hud-btn-speed-desktop"],placement:"center"},{title:"Audio Protocols",description:"Toggle system audio output here at any time.",targetIds:["mobile-hud-btn-mute-mobile","desktop-hud-btn-mute-desktop"],placement:"center"},{title:"The Void Market",description:"Purchase upgrade modules here. Modules stack infinitely to increase your power. Warning: The shop rotates every 20 seconds.",targetIds:["mobile-hud-shop-container","desktop-hud-shop-container"],placement:"center"},{title:"Tech Tree Access",description:"Open the Tech Tree to unlock powerful active abilities and permanent passive scaling stats.",targetIds:["mobile-hud-btn-tech-mobile","desktop-hud-btn-tech-desktop"],placement:"center"},{title:"Codex Access",description:"The Codex is your central database for enemy intelligence, upgrade details, and weapon configuration.",targetIds:["mobile-hud-btn-codex-mobile","desktop-hud-btn-codex-desktop"],placement:"center",action:()=>{t(!1),r(!1)}},{title:"Enemy Database",description:"View detailed stats, resistances, and weaknesses for all known void entities. Knowing your enemy is key to survival.",targetIds:["codex-tab-enemies"],placement:"bottom",action:()=>{t(!0),n("ENEMIES")}},{title:"Upgrade Database",description:"Browse all potential upgrades, including their stats and tier rarity. Plan your build strategy here.",targetIds:["codex-tab-upgrades"],placement:"bottom",action:()=>{t(!0),n("UPGRADES")}},{title:"Active Modules",description:"View your currently installed weapon modules here. This overview shows your exact loadout.",targetIds:["codex-tab-modules"],placement:"bottom",action:()=>{t(!0),n("MODULES")}},{title:"Targeting Logic",description:"CRITICAL: You can customize targeting priorities for each weapon type. Switch high-damage weapons to 'Strongest' or rapid-fire to 'Nearest' to maximize efficiency.",targetIds:["module-targeting-btn-0"],placement:"top",action:()=>{t(!0),n("MODULES")}},{title:"Elite Hostiles",description:"High-threat Elite enemies are identified by a pulsing golden aura. They are tougher and deal more damage, but yield triple rewards.",placement:"center",action:()=>t(!1),content:o.jsx("div",{className:"flex justify-center py-4",children:o.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center bg-slate-900 rounded-xl border border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.2)]",children:[o.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 rounded-xl animate-pulse"}),o.jsx("div",{className:"relative z-10 p-2 transform scale-150",children:oi(T.GRUNT,"#fbbf24","w-10 h-10")}),o.jsx("div",{className:"absolute -bottom-3 px-3 py-0.5 bg-yellow-500 text-slate-900 font-bold text-[10px] uppercase tracking-wider rounded-full border-2 border-slate-900 shadow-sm",children:"Elite"})]})})},{title:"Good Luck",description:"The void adapts. Stay vigilant.",placement:"center"}],p=m[s];H.useEffect(()=>{p.action&&p.action()},[s]),H.useEffect(()=>{const f=()=>{if(!p.targetIds){a(null),u.current=requestAnimationFrame(f);return}let d=null;for(const v of p.targetIds){const S=document.getElementById(v);if(S){const R=S.getBoundingClientRect();if(R.width>0&&R.height>0){d=S;break}}}if(d){const v=d.getBoundingClientRect();a(v)}else a(null);u.current=requestAnimationFrame(f)};return u.current=requestAnimationFrame(f),()=>{u.current&&cancelAnimationFrame(u.current)}},[s,p]);const h=()=>{s<m.length-1?l(s+1):e()},x=()=>{s>0&&l(s-1)},b=()=>{const f="absolute bg-black/60 backdrop-blur-[2px] transition-all duration-75 pointer-events-auto";if(!i)return o.jsx("div",{className:`inset-0 ${f} z-30`});const{top:d,bottom:v,left:S,right:R}=i,C=Math.max(0,d-c),w=Math.min(window.innerHeight,v+c),k=Math.max(0,S-c),I=Math.min(window.innerWidth,R+c);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:f,style:{top:0,left:0,right:0,height:C,zIndex:30}}),o.jsx("div",{className:f,style:{top:w,left:0,right:0,bottom:0,zIndex:30}}),o.jsx("div",{className:f,style:{top:C,left:0,width:k,height:w-C,zIndex:30}}),o.jsx("div",{className:f,style:{top:C,left:I,right:0,height:w-C,zIndex:30}})]})},g=()=>{if(!i)return null;const f={top:i.top-c,left:i.left-c,width:i.width+c*2,height:i.height+c*2};return o.jsx("div",{className:"absolute border-4 border-gold-accent rounded-lg shadow-[0_0_30px_rgba(251,191,36,0.5)] z-40 transition-all duration-75 ease-out animate-pulse-slow pointer-events-none",style:f})},E=()=>{if(!i||p.placement==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"400px",width:"90%"};const f=20,d=320,v=d/2,S=20;let R=i.left+i.width/2;R=Math.max(f+v,Math.min(window.innerWidth-f-v,R));let C=0,w="translateX(-50%)";return p.placement==="top"?(C=i.top-c-S,w="translate(-50%, -100%)",C<120&&(C=i.bottom+c+S,w="translate(-50%, 0)")):(C=i.bottom+c+S,w="translate(-50%, 0)",C>window.innerHeight-150&&(C=i.top-c-S,w="translate(-50%, -100%)")),{top:C,left:R,transform:w,maxWidth:`${d}px`,width:"90%"}};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-transparent",children:[b(),g(),o.jsxs("div",{className:"absolute bg-slate-900/95 border border-slate-500 text-white p-5 rounded-lg shadow-2xl transition-all duration-75 z-50 flex flex-col gap-4",style:E(),children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"text-gold-accent font-bold uppercase tracking-widest text-base",children:p.title}),o.jsxs("span",{className:"text-xs text-slate-500 font-mono bg-black/40 px-2 py-0.5 rounded",children:[s+1," / ",m.length]})]}),o.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:p.description}),p.content&&o.jsx("div",{className:"mt-2",children:p.content})]}),o.jsxs("div",{className:"flex justify-between items-center mt-2 border-t border-slate-700/50 pt-3",children:[o.jsx("button",{onClick:e,className:"text-xs uppercase font-bold text-slate-500 hover:text-white transition-colors",children:"Skip"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:x,disabled:s===0,className:"px-4 py-2 rounded bg-slate-800 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-bold border border-slate-600 transition-colors",children:"Prev"}),o.jsx("button",{onClick:h,className:"px-5 py-2 rounded bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold shadow-lg transition-colors",children:s===m.length-1?"Finish":"Next"})]})]})]})]})},Xf=({leaderboard:e,onClose:t})=>o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-xl border border-slate-600 rounded-lg w-full max-w-2xl h-[80vh] flex flex-col shadow-[0_0_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-up",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 md:p-6 border-b border-slate-700/50 bg-slate-900/40",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl md:text-2xl font-black text-gold-accent tracking-widest uppercase",children:"Leaderboard"}),o.jsx("p",{className:"text-sm text-slate-400 font-mono",children:"Global Defense Rankings"})]}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white px-4 py-2 rounded border border-slate-700 hover:border-slate-500 hover:bg-slate-800 transition-colors text-xs font-bold uppercase tracking-wider",children:"Close"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-0 scrollbar-thin scrollbar-thumb-slate-700",children:e.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 italic gap-2 text-base",children:o.jsx("p",{children:"No records found."})}):o.jsxs("table",{className:"w-full text-left text-sm md:text-base",children:[o.jsx("thead",{className:"text-xs md:text-sm text-slate-500 uppercase font-mono bg-slate-900 sticky top-0 z-10 shadow-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3 md:p-4 font-normal tracking-wider",children:"Rank"}),o.jsx("th",{className:"p-3 md:p-4 font-normal tracking-wider",children:"Name"}),o.jsx("th",{className:"p-3 md:p-4 text-right font-normal tracking-wider",children:"Wave"}),o.jsx("th",{className:"p-3 md:p-4 text-right font-normal tracking-wider",children:"Score"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-800/50 bg-slate-900/20",children:e.map((n,r)=>{const s=r<3;let l="text-slate-500";return r===0&&(l="text-yellow-400"),r===1&&(l="text-slate-300"),r===2&&(l="text-amber-600"),o.jsxs("tr",{className:`hover:bg-slate-800/40 transition-colors ${s?"bg-white/5":""}`,children:[o.jsxs("td",{className:`p-3 md:p-4 font-mono font-bold ${l}`,children:["#",r+1]}),o.jsxs("td",{className:"p-3 md:p-4 font-bold text-slate-200",children:[n.name,r===0&&o.jsx("span",{className:"ml-2 text-xs bg-yellow-500/20 text-yellow-400 px-1.5 py-0.5 rounded border border-yellow-500/30",children:"CHAMPION"})]}),o.jsx("td",{className:"p-3 md:p-4 text-right text-blue-400 font-mono font-bold",children:n.wave}),o.jsx("td",{className:"p-3 md:p-4 text-right text-gold-accent font-mono font-bold text-lg",children:n.score.toLocaleString()})]},r)})})]})}),o.jsx("div",{className:"p-3 border-t border-slate-700/50 bg-slate-900/60 text-center",children:o.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-widest",children:"Records are synchronized globally."})})]})}),qf=({onClose:e})=>o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-xl border border-slate-600 rounded-lg w-full max-w-2xl h-[80vh] flex flex-col shadow-[0_0_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-up",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 md:p-6 border-b border-slate-700/50 bg-slate-900/40",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-200 tracking-widest uppercase",children:"Change Log"}),o.jsx("p",{className:"text-sm text-slate-400 font-mono",children:"System Update History"})]}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white px-4 py-2 rounded border border-slate-700 hover:border-slate-500 hover:bg-slate-800 transition-colors text-xs font-bold uppercase tracking-wider",children:"Close"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-slate-700 text-slate-300 leading-relaxed",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"v0.54"}),o.jsx("div",{className:"text-xs text-gold-accent font-mono mb-4 uppercase",children:"Latest Release"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-cyan-400 font-bold uppercase text-xs tracking-wider mb-2 border-b border-slate-700/50 pb-1 w-fit",children:"Are We a Roguelike Now?"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[o.jsx("li",{children:"Reworked many underperforming modules to bring them closer in line with current build pacing."}),o.jsx("li",{children:"Added end-game stats displaying gold spent vs. damage done on a per-module basis."}),o.jsx("li",{children:"Updated visuals for several remaining modules still using older effects."}),o.jsx("li",{children:"Introduced a new roguelike-inspired system: every 5 waves, players now choose from a semi-random pool of Void Modules, adding variety and replay depth."}),o.jsx("li",{children:"Adjusted multiple module stats to support the new progression structure."}),o.jsx("li",{children:"Due to the influx of new player power, scores and performance may differ from previous versions."})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-cyan-400 font-bold uppercase text-xs tracking-wider mb-2 border-b border-slate-700/50 pb-1 w-fit",children:"Whats in the Pipeline"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[o.jsx("li",{children:"Continued focus on balance improvements and smoothing out power spikes."}),o.jsx("li",{children:"Building internal tools to analyze player run data for more strategic adjustments."}),o.jsx("li",{children:"Ongoing bug fixing as issues are reported."}),o.jsx("li",{children:"Once balance stabilizes and bugs are minimal, development will shift toward packaging Void Defense as a standalone application."})]})]})]})]}),o.jsxs("div",{className:"mb-8 opacity-60 hover:opacity-100 transition-opacity",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"v0.2 (Demo)"}),o.jsx("div",{className:"text-xs text-slate-500 font-mono mb-4 uppercase",children:"Previous Release"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h4",{className:"text-slate-400 font-bold uppercase text-xs tracking-wider mb-2 border-b border-slate-700/50 pb-1 w-fit",children:"Balance & Gameplay"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[o.jsx("li",{children:"Legendary module drop rate rebalanced."}),o.jsx("li",{children:"Damage percentage upgrade tiers adjusted."}),o.jsx("li",{children:"Astral Ring module fully reworked."}),o.jsx("li",{children:"Added a new tower targeting option: Fastest in Range."}),o.jsx("li",{children:"Fixed a bug involving healer enemies."})]})]})})]})]})]})}),Zf=({options:e,onSelect:t})=>{const n=r=>{switch(r){case"HEAL":return o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8",children:o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8.5 12H9v-2H7v-1.5h2V9h1.5v2.5h2V13h-2v2z"})});case"GOLD":return o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.15-1.46-3.27-3.4h1.97c.1 1.05.82 1.83 2.62 1.83 1.52 0 2.49-.74 2.49-2.03 0-1.06-.62-1.65-3.33-2.26-3.33-.79-4.91-2.15-4.91-4.56 0-1.91 1.43-3.24 3.13-3.59V2h2.67v1.95c1.6.36 2.91 1.42 2.97 3.35h-1.93c-.1-.92-.71-1.65-2.3-1.65-1.46 0-2.31.72-2.31 1.89 0 1.04.68 1.6 3.35 2.18 3.32.73 4.9 2.1 4.9 4.65-.01 2.05-1.47 3.4-3.18 3.76z"})});case"DAMAGE":return o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8",children:o.jsx("path",{d:"M7 18h2v-2h-2v2zm0-4h2v-2h-2v2zm4 4h2v-2h-2v2zm0-4h2v-2h-2v2zm-4-4h2V8h-2v2zm4 0h2V8h-2v2zm-2-2h2V6h-2v2zm-2-2h2V4h-2v2zm6 2h2V6h-2v2zm0-4h2V2h-2v2z"})});case"SPEED":return o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8",children:o.jsx("path",{d:"M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"})});default:return null}};return o.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in p-4",children:o.jsxs("div",{className:"w-full max-w-4xl flex flex-col items-center gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-violet-400 tracking-[0.2em] uppercase drop-shadow-lg mb-2",children:"Tactical Decision"}),o.jsx("p",{className:"text-slate-400 font-mono text-sm md:text-base tracking-widest uppercase",children:"Select immediate reinforcement"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full",children:e.map((r,s)=>o.jsxs("button",{onClick:()=>t(r.id),className:"group relative flex flex-col items-center p-6 bg-slate-900/80 border border-slate-700 hover:border-white rounded-xl transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(255,255,255,0.1)] overflow-hidden text-center h-full",children:[o.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-10 bg-gradient-to-b ${r.color==="gold"?"from-yellow-500":r.color==="red"?"from-red-500":r.color==="green"?"from-green-500":"from-cyan-500"} to-transparent transition-opacity`}),o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center bg-black/50 border-2 mb-4 shadow-lg group-hover:scale-110 transition-transform ${r.color==="gold"?"border-yellow-500 text-yellow-500":r.color==="red"?"border-red-500 text-red-500":r.color==="green"?"border-green-500 text-green-500":"border-cyan-500 text-cyan-500"}`,children:n(r.icon)}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2 uppercase tracking-wide group-hover:text-cyan-200 transition-colors",children:r.title}),o.jsx("p",{className:"text-slate-400 text-sm leading-relaxed group-hover:text-slate-200 mb-6 flex-grow",children:r.description}),o.jsx("div",{className:"mt-auto px-4 py-2 bg-slate-800 rounded text-xs font-bold uppercase tracking-widest text-slate-500 group-hover:bg-white group-hover:text-slate-900 transition-colors",children:"Select"})]},r.id))})]})})},Jf=async e=>{const t=["The void hungers...","Shadows lengthen around the spire.","They are coming.","A chill wind blows from the abyss.","The ground trembles.","Darkness gathers.","Protect the core at all costs.","Relentless.","Entropy increases.","The swarm approaches.","Geometric shapes screech in the distance.","No escape.","The Infinite Spire endures.","Another wave breaks against the walls.","Signal lost...","The silence is deafening.","They adapt.","Power levels fluctuating."],n=t[Math.floor(Math.random()*t.length)];return Promise.resolve(n)};function eh(){const e=H.useRef(null),[t,n]=H.useState(null),[r,s]=H.useState(!1),[l,i]=H.useState("ENEMIES"),[a,u]=H.useState(!1),[c,m]=H.useState(!1),[p,h]=H.useState(!1),[x,b]=H.useState(!1),[g,E]=H.useState(!1),[f,d]=H.useState(null),[v,S]=H.useState({width:1280,height:720}),[R,C]=H.useState(!1),[w,k]=H.useState(!1);H.useEffect(()=>{const B=()=>{const F=window.innerWidth,ae=window.innerHeight,Be=window.matchMedia("(pointer: coarse)").matches,gt=F<1100||Be&&F<1366;k(gt);const Uc=ae>F;C(!!(Uc&&gt));const Hs=bt/Rt,Bc=F/ae;let Er,Tr;const ii=gt?1:.98,Fc=F*ii,Hc=ae*ii;Bc>Hs?(Tr=Hc,Er=Tr*Hs):(Er=Fc,Tr=Er/Hs),S({width:Er,height:Tr})};return B(),window.addEventListener("resize",B),e.current||(e.current=new Af(F=>{n({...F})},O,(F,ae)=>{d({isOpen:!0,options:F,onSelect:ae})}),n(e.current.getState())),()=>{var F;window.removeEventListener("resize",B),(F=e.current)==null||F.stop()}},[]),H.useEffect(()=>{if(!e.current)return;const B=(f==null?void 0:f.isOpen)??!1;g&&(r||a||c||p||x||R||B?e.current.stop():e.current.start())},[r,a,c,p,x,g,R,f==null?void 0:f.isOpen]);const I=()=>{var F;Y.init(),E(!0),localStorage.getItem("void_defense_tutorial_seen")||(m(!0),localStorage.setItem("void_defense_tutorial_seen","true")),(F=e.current)==null||F.start()},O=async B=>{try{const F=await Jf(B);e.current&&e.current.setFlavorText(F)}catch(F){console.error("Failed to generate flavor text",F)}},U=()=>{var B;(B=e.current)==null||B.restart()},K=()=>{var B;(B=e.current)==null||B.reset(),E(!1)},W=B=>{var F;(F=e.current)==null||F.buyUpgrade(B)},te=()=>{var B;(B=e.current)==null||B.triggerReroll()},ve=B=>{var F;(F=e.current)==null||F.unlockAbility(B)},Ce=()=>{var B;(B=e.current)==null||B.toggleTargetingMode()},D=(B,F)=>{var ae;(ae=e.current)==null||ae.setModuleTargeting(B,F)},j=B=>{var F;(F=e.current)==null||F.saveHighScore(B)},z=()=>{var B;(B=e.current)==null||B.toggleGameSpeed()},N=B=>{f&&f.onSelect&&(f.onSelect(B),d(null))};if(!t)return o.jsx("div",{className:"bg-void-dark h-[100dvh] w-screen flex items-center justify-center text-white",children:"Loading Spire..."});const A=t?Math.floor((Math.max(1,t.wave)-1)/5)%bs.length:0,V=bs[A];return o.jsxs("div",{className:"relative w-screen h-[100dvh] overflow-hidden flex items-center justify-center font-sans transition-colors duration-[2000ms] ease-in-out touch-none select-none",style:{backgroundColor:V},children:[R&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 flex flex-col items-center justify-center p-6 text-center animate-fade-in",children:[o.jsxs("div",{className:"w-20 h-20 mb-6 text-cyan-400 relative",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-full h-full animate-pulse",children:o.jsx("path",{d:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"})}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 animate-spin-slow opacity-50",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16 1.24 2.66 2.19 4.29 2.52v-2.06c-1.02-.28-1.94-.85-2.77-1.64L7.1 18.32zM13 4v2.05c1.01.28 1.94.85 2.77 1.64l1.51-1.51C16.14 4.94 14.64 4 13 4zm6.93 9h2.02c-.17-1.39-.72-2.73-1.62-3.89l-1.41 1.42c.52.75.87 1.59 1.01 2.47zm-1.01 5.32l-1.41-1.42c.82-.8 1.48-1.74 1.92-2.8h2.06c-.57 1.62-1.6 3.09-2.57 4.22z"})})})]}),o.jsx("h2",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-violet-400 uppercase tracking-widest mb-4",children:"Landscape Required"}),o.jsx("p",{className:"text-slate-400 text-sm font-mono leading-relaxed max-w-xs",children:"Void Defense protocols require a horizontal viewport for optimal control."}),o.jsxs("div",{className:"mt-8 flex items-center justify-center gap-4 opacity-75",children:[o.jsx("div",{className:"h-12 w-8 border-2 border-slate-600 rounded bg-slate-800/50 flex items-center justify-center",children:o.jsx("div",{className:"w-1 h-1 bg-red-500 rounded-full"})}),o.jsx("div",{className:"text-slate-500 font-bold",children:""}),o.jsx("div",{className:"w-12 h-8 border-2 border-cyan-500 rounded bg-cyan-900/20 shadow-[0_0_15px_rgba(34,211,238,0.3)] flex items-center justify-center",children:o.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full animate-ping"})})]})]}),g&&!R&&o.jsxs("div",{className:`absolute left-0 w-full text-center pointer-events-none z-10 animate-float ${w?"top-2":"top-8"}`,children:[o.jsxs("h1",{className:`font-bold text-slate-200 tracking-[0.5em] uppercase opacity-90 drop-shadow-lg mix-blend-overlay ${w?"text-lg":"text-3xl"}`,children:["Wave ",t.wave]}),o.jsx("p",{className:`text-gold-accent font-mono inline-block bg-black/40 px-4 py-1 rounded border border-gold-accent/20 shadow-lg backdrop-blur-sm ${w?"text-[10px] mt-0.5":"text-sm mt-2"}`,children:t.flavorText})]}),o.jsxs("div",{className:`relative overflow-hidden border border-slate-800/50 transition-all duration-1000 ${w?"":"shadow-2xl rounded-lg"} ${!g&&!c?"scale-105 blur-sm opacity-50":"scale-100 blur-0 opacity-100"} ${R?"opacity-0":"opacity-100"}`,style:{width:v.width,height:v.height},children:[o.jsx(Hf,{engine:e.current,width:v.width,height:v.height}),(g||c)&&!w&&o.jsx(Sa,{layout:"desktop",className:"absolute inset-0 z-20 pointer-events-none flex",gameState:t,onBuyItem:W,onReroll:te,onToggleTargeting:Ce,onOpenCodex:()=>s(!0),onOpenTechShop:()=>u(!0),onRestart:U,onMainMenu:K,onToggleSpeed:z,idPrefix:"desktop-hud"})]}),(g||c)&&w&&!R&&o.jsx(Sa,{layout:"mobile",className:"fixed inset-0 z-30 pointer-events-none",gameState:t,onBuyItem:W,onReroll:te,onToggleTargeting:Ce,onOpenCodex:()=>s(!0),onOpenTechShop:()=>u(!0),onRestart:U,onMainMenu:K,onToggleSpeed:z,idPrefix:"mobile-hud"}),!g&&!c&&!R&&o.jsx(Yf,{gameState:t,onStart:I,onOpenTutorial:()=>m(!0),onOpenCodex:()=>s(!0),onOpenLeaderboard:()=>h(!0),onOpenChangelog:()=>b(!0)}),(f==null?void 0:f.isOpen)&&!R&&o.jsx(Zf,{options:f.options,onSelect:N}),r&&!R&&o.jsx($f,{onClose:()=>s(!1),gameState:t,onSetTargeting:D,activeTab:l,onTabChange:i}),a&&!R&&o.jsx(Kf,{gameState:t,onUnlock:ve,onClose:()=>u(!1)}),c&&!R&&o.jsx(Qf,{onClose:()=>{m(!1),s(!1),u(!1)},onSetCodexOpen:s,onSetCodexTab:i,onSetTechShopOpen:u}),p&&!R&&o.jsx(Xf,{leaderboard:t.leaderboard,onClose:()=>h(!1)}),x&&!R&&o.jsx(qf,{onClose:()=>b(!1)}),t.isGameOver&&g&&!R&&o.jsx(Wf,{gameState:t,onRestart:U,onSaveScore:j,onMainMenu:K})]})}const Dc=document.getElementById("root");if(!Dc)throw new Error("Could not find root element to mount to");const th=ml.createRoot(Dc);th.render(o.jsx(ld.StrictMode,{children:o.jsx(eh,{})}));
